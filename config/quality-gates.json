{
  "version": 1,
  "strict": true,
  "accept": {
    "mimeTypes": [
      "application/pdf",
      "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
    ],
    "extensions": [".pdf", ".docx"]
  },
  "limits": {
    "maxFileSizeMb": 150,
    "maxPages": 500,
    "processTimeoutSec": 300,
    "stdoutTailKb": 64,
    "stderrTailKb": 64
  },
  "quality": {
    "minTextChars": 200,
    "minTextCharsPerPageAvg": 50,
    "minTextItems": 3,
    "minMarkdownChars": 50,
    "minTables": 0
  },
  "gates": [
    {
      "code": "DOC_PAGES_GT_0",
      "enabled": true,
      "severity": "FAIL",
      "metric": "pages",
      "op": ">",
      "threshold": 0,
      "message": "Documentul nu are pagini detectabile."
    },

    {
      "code": "TEXT_CHARS_MIN",
      "enabled": true,
      "severity": "FAIL",
      "metric": "textChars",
      "op": ">=",
      "threshold": 200,
      "message": "Prea puțin text extras (probabil PDF scanat / fără layer de text)."
    },
    {
      "code": "TEXT_CHARS_PER_PAGE_AVG_MIN",
      "enabled": true,
      "severity": "FAIL",
      "metric": "textCharsPerPageAvg",
      "op": ">=",
      "threshold": 50,
      "message": "Densitate extrem de mică de text (probabil scan fără OCR)."
    },
    {
      "code": "TEXT_ITEMS_MIN",
      "enabled": true,
      "severity": "FAIL",
      "metric": "textItems",
      "op": ">=",
      "threshold": 3,
      "message": "Prea puține blocuri de text detectate (extragere aproape goală)."
    },
    {
      "code": "MARKDOWN_CHARS_MIN",
      "enabled": true,
      "severity": "FAIL",
      "metric": "mdChars",
      "op": ">=",
      "threshold": 50,
      "message": "Exportul Markdown e aproape gol (posibil bug de export sau parsing eșuat)."
    },

    {
      "code": "TEXT_CHARS_PER_PAGE_AVG_WARN",
      "enabled": true,
      "severity": "WARN",
      "metric": "textCharsPerPageAvg",
      "op": ">=",
      "threshold": 250,
      "message": "Text rar per pagină; posibil layout dificil sau scan parțial. Verifică output-ul."
    },
    {
      "code": "TEXT_ITEMS_WARN",
      "enabled": true,
      "severity": "WARN",
      "metric": "textItems",
      "op": ">=",
      "threshold": 20,
      "message": "Puține blocuri de text; structurarea poate fi slabă. Verifică output-ul."
    },
    {
      "code": "MARKDOWN_CHARS_WARN",
      "enabled": true,
      "severity": "WARN",
      "metric": "mdChars",
      "op": ">=",
      "threshold": 500,
      "message": "Markdown mic; posibil document scurt sau parsing care a pierdut structură."
    },

    {
      "code": "TABLES_MIN",
      "enabled": false,
      "severity": "WARN",
      "metric": "tables",
      "op": ">=",
      "threshold": 1,
      "message": "Nu s-au detectat tabele. (Dezactivat implicit; multe documente valide nu au tabele.)"
    }
  ]
}
