/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/docs/upload/route";
exports.ids = ["app/api/docs/upload/route"];
exports.modules = {

/***/ "(rsc)/./app/_lib/config.ts":
/*!****************************!*\
  !*** ./app/_lib/config.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gateSchema: () => (/* binding */ gateSchema),\n/* harmony export */   getGatesConfigPath: () => (/* binding */ getGatesConfigPath),\n/* harmony export */   loadQualityGatesConfig: () => (/* binding */ loadQualityGatesConfig),\n/* harmony export */   qualityGatesSchema: () => (/* binding */ qualityGatesSchema)\n/* harmony export */ });\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/**\n * @fileoverview Loads and validates the quality gates config from disk.\n */ \n\n\nconst gateSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    code: zod__WEBPACK_IMPORTED_MODULE_2__.string(),\n    enabled: zod__WEBPACK_IMPORTED_MODULE_2__.boolean(),\n    severity: zod__WEBPACK_IMPORTED_MODULE_2__.string(),\n    metric: zod__WEBPACK_IMPORTED_MODULE_2__.string(),\n    op: zod__WEBPACK_IMPORTED_MODULE_2__.string(),\n    threshold: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n    message: zod__WEBPACK_IMPORTED_MODULE_2__.string()\n}).strict();\nconst qualityGatesSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    version: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n    strict: zod__WEBPACK_IMPORTED_MODULE_2__.boolean(),\n    accept: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        mimeTypes: zod__WEBPACK_IMPORTED_MODULE_2__.array(zod__WEBPACK_IMPORTED_MODULE_2__.string()),\n        extensions: zod__WEBPACK_IMPORTED_MODULE_2__.array(zod__WEBPACK_IMPORTED_MODULE_2__.string())\n    }).strict(),\n    limits: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        maxFileSizeMb: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n        maxPages: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n        processTimeoutSec: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n        stdoutTailKb: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n        stderrTailKb: zod__WEBPACK_IMPORTED_MODULE_2__.number()\n    }).strict(),\n    quality: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        minTextChars: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n        minTextCharsPerPageAvg: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n        minTextItems: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n        minMarkdownChars: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n        minTables: zod__WEBPACK_IMPORTED_MODULE_2__.number()\n    }).strict(),\n    gates: zod__WEBPACK_IMPORTED_MODULE_2__.array(gateSchema)\n}).strict();\nlet cachedConfig = null;\n/**\n * Resolves the quality gates config path from env or defaults.\n */ function getGatesConfigPath() {\n    return process.env.GATES_CONFIG_PATH || node_path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"config\", \"quality-gates.json\");\n}\n/**\n * Loads and caches the parsed quality gates config.\n */ async function loadQualityGatesConfig() {\n    if (cachedConfig) {\n        return cachedConfig;\n    }\n    const configPath = getGatesConfigPath();\n    const raw = await node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(configPath, \"utf-8\");\n    const parsed = qualityGatesSchema.parse(JSON.parse(raw));\n    cachedConfig = parsed;\n    return parsed;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvX2xpYi9jb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7O0NBRUMsR0FDaUM7QUFDTDtBQUNMO0FBRWpCLE1BQU1HLGFBQWFELHVDQUNqQixDQUFDO0lBQ05HLE1BQU1ILHVDQUFRO0lBQ2RLLFNBQVNMLHdDQUFTO0lBQ2xCTyxVQUFVUCx1Q0FBUTtJQUNsQlEsUUFBUVIsdUNBQVE7SUFDaEJTLElBQUlULHVDQUFRO0lBQ1pVLFdBQVdWLHVDQUFRO0lBQ25CWSxTQUFTWix1Q0FBUTtBQUNuQixHQUNDYSxNQUFNLEdBQUc7QUFFTCxNQUFNQyxxQkFBcUJkLHVDQUN6QixDQUFDO0lBQ05lLFNBQVNmLHVDQUFRO0lBQ2pCYSxRQUFRYix3Q0FBUztJQUNqQmdCLFFBQVFoQix1Q0FDQyxDQUFDO1FBQ05pQixXQUFXakIsc0NBQU8sQ0FBQ0EsdUNBQVE7UUFDM0JtQixZQUFZbkIsc0NBQU8sQ0FBQ0EsdUNBQVE7SUFDOUIsR0FDQ2EsTUFBTTtJQUNUTyxRQUFRcEIsdUNBQ0MsQ0FBQztRQUNOcUIsZUFBZXJCLHVDQUFRO1FBQ3ZCc0IsVUFBVXRCLHVDQUFRO1FBQ2xCdUIsbUJBQW1CdkIsdUNBQVE7UUFDM0J3QixjQUFjeEIsdUNBQVE7UUFDdEJ5QixjQUFjekIsdUNBQVE7SUFDeEIsR0FDQ2EsTUFBTTtJQUNUYSxTQUFTMUIsdUNBQ0EsQ0FBQztRQUNOMkIsY0FBYzNCLHVDQUFRO1FBQ3RCNEIsd0JBQXdCNUIsdUNBQVE7UUFDaEM2QixjQUFjN0IsdUNBQVE7UUFDdEI4QixrQkFBa0I5Qix1Q0FBUTtRQUMxQitCLFdBQVcvQix1Q0FBUTtJQUNyQixHQUNDYSxNQUFNO0lBQ1RtQixPQUFPaEMsc0NBQU8sQ0FBQ0M7QUFDakIsR0FDQ1ksTUFBTSxHQUFHO0FBSVosSUFBSW9CLGVBQTBDO0FBRTlDOztDQUVDLEdBQ00sU0FBU0M7SUFDZCxPQUNFQyxRQUFRQyxHQUFHLENBQUNDLGlCQUFpQixJQUM3QnRDLHFEQUFTLENBQUNvQyxRQUFRSSxHQUFHLElBQUksVUFBVTtBQUV2QztBQUVBOztDQUVDLEdBQ00sZUFBZUM7SUFDcEIsSUFBSVAsY0FBYztRQUNoQixPQUFPQTtJQUNUO0lBRUEsTUFBTVEsYUFBYVA7SUFDbkIsTUFBTVEsTUFBTSxNQUFNNUMsZ0VBQVcsQ0FBQzJDLFlBQVk7SUFDMUMsTUFBTUcsU0FBUzlCLG1CQUFtQitCLEtBQUssQ0FBQ0MsS0FBS0QsS0FBSyxDQUFDSDtJQUNuRFQsZUFBZVc7SUFDZixPQUFPQTtBQUNUIiwic291cmNlcyI6WyJEOlxcUHJvZ3JhbW1pbmdcXFBsYXlncm91bmQgQUlcXFBpcGVsaW5lX09DUitFeHBvcnRfUmFwb2FydGVfUERGXFxhcHBcXF9saWJcXGNvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgTG9hZHMgYW5kIHZhbGlkYXRlcyB0aGUgcXVhbGl0eSBnYXRlcyBjb25maWcgZnJvbSBkaXNrLlxuICovXG5pbXBvcnQgZnMgZnJvbSBcIm5vZGU6ZnMvcHJvbWlzZXNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmV4cG9ydCBjb25zdCBnYXRlU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBjb2RlOiB6LnN0cmluZygpLFxuICAgIGVuYWJsZWQ6IHouYm9vbGVhbigpLFxuICAgIHNldmVyaXR5OiB6LnN0cmluZygpLFxuICAgIG1ldHJpYzogei5zdHJpbmcoKSxcbiAgICBvcDogei5zdHJpbmcoKSxcbiAgICB0aHJlc2hvbGQ6IHoubnVtYmVyKCksXG4gICAgbWVzc2FnZTogei5zdHJpbmcoKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBxdWFsaXR5R2F0ZXNTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIHZlcnNpb246IHoubnVtYmVyKCksXG4gICAgc3RyaWN0OiB6LmJvb2xlYW4oKSxcbiAgICBhY2NlcHQ6IHpcbiAgICAgIC5vYmplY3Qoe1xuICAgICAgICBtaW1lVHlwZXM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgICAgIGV4dGVuc2lvbnM6IHouYXJyYXkoei5zdHJpbmcoKSlcbiAgICAgIH0pXG4gICAgICAuc3RyaWN0KCksXG4gICAgbGltaXRzOiB6XG4gICAgICAub2JqZWN0KHtcbiAgICAgICAgbWF4RmlsZVNpemVNYjogei5udW1iZXIoKSxcbiAgICAgICAgbWF4UGFnZXM6IHoubnVtYmVyKCksXG4gICAgICAgIHByb2Nlc3NUaW1lb3V0U2VjOiB6Lm51bWJlcigpLFxuICAgICAgICBzdGRvdXRUYWlsS2I6IHoubnVtYmVyKCksXG4gICAgICAgIHN0ZGVyclRhaWxLYjogei5udW1iZXIoKVxuICAgICAgfSlcbiAgICAgIC5zdHJpY3QoKSxcbiAgICBxdWFsaXR5OiB6XG4gICAgICAub2JqZWN0KHtcbiAgICAgICAgbWluVGV4dENoYXJzOiB6Lm51bWJlcigpLFxuICAgICAgICBtaW5UZXh0Q2hhcnNQZXJQYWdlQXZnOiB6Lm51bWJlcigpLFxuICAgICAgICBtaW5UZXh0SXRlbXM6IHoubnVtYmVyKCksXG4gICAgICAgIG1pbk1hcmtkb3duQ2hhcnM6IHoubnVtYmVyKCksXG4gICAgICAgIG1pblRhYmxlczogei5udW1iZXIoKVxuICAgICAgfSlcbiAgICAgIC5zdHJpY3QoKSxcbiAgICBnYXRlczogei5hcnJheShnYXRlU2NoZW1hKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCB0eXBlIFF1YWxpdHlHYXRlc0NvbmZpZyA9IHouaW5mZXI8dHlwZW9mIHF1YWxpdHlHYXRlc1NjaGVtYT47XG5cbmxldCBjYWNoZWRDb25maWc6IFF1YWxpdHlHYXRlc0NvbmZpZyB8IG51bGwgPSBudWxsO1xuXG4vKipcbiAqIFJlc29sdmVzIHRoZSBxdWFsaXR5IGdhdGVzIGNvbmZpZyBwYXRoIGZyb20gZW52IG9yIGRlZmF1bHRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2F0ZXNDb25maWdQYXRoKCk6IHN0cmluZyB7XG4gIHJldHVybiAoXG4gICAgcHJvY2Vzcy5lbnYuR0FURVNfQ09ORklHX1BBVEggfHxcbiAgICBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJjb25maWdcIiwgXCJxdWFsaXR5LWdhdGVzLmpzb25cIilcbiAgKTtcbn1cblxuLyoqXG4gKiBMb2FkcyBhbmQgY2FjaGVzIHRoZSBwYXJzZWQgcXVhbGl0eSBnYXRlcyBjb25maWcuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkUXVhbGl0eUdhdGVzQ29uZmlnKCk6IFByb21pc2U8UXVhbGl0eUdhdGVzQ29uZmlnPiB7XG4gIGlmIChjYWNoZWRDb25maWcpIHtcbiAgICByZXR1cm4gY2FjaGVkQ29uZmlnO1xuICB9XG5cbiAgY29uc3QgY29uZmlnUGF0aCA9IGdldEdhdGVzQ29uZmlnUGF0aCgpO1xuICBjb25zdCByYXcgPSBhd2FpdCBmcy5yZWFkRmlsZShjb25maWdQYXRoLCBcInV0Zi04XCIpO1xuICBjb25zdCBwYXJzZWQgPSBxdWFsaXR5R2F0ZXNTY2hlbWEucGFyc2UoSlNPTi5wYXJzZShyYXcpKTtcbiAgY2FjaGVkQ29uZmlnID0gcGFyc2VkO1xuICByZXR1cm4gcGFyc2VkO1xufVxyXG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwieiIsImdhdGVTY2hlbWEiLCJvYmplY3QiLCJjb2RlIiwic3RyaW5nIiwiZW5hYmxlZCIsImJvb2xlYW4iLCJzZXZlcml0eSIsIm1ldHJpYyIsIm9wIiwidGhyZXNob2xkIiwibnVtYmVyIiwibWVzc2FnZSIsInN0cmljdCIsInF1YWxpdHlHYXRlc1NjaGVtYSIsInZlcnNpb24iLCJhY2NlcHQiLCJtaW1lVHlwZXMiLCJhcnJheSIsImV4dGVuc2lvbnMiLCJsaW1pdHMiLCJtYXhGaWxlU2l6ZU1iIiwibWF4UGFnZXMiLCJwcm9jZXNzVGltZW91dFNlYyIsInN0ZG91dFRhaWxLYiIsInN0ZGVyclRhaWxLYiIsInF1YWxpdHkiLCJtaW5UZXh0Q2hhcnMiLCJtaW5UZXh0Q2hhcnNQZXJQYWdlQXZnIiwibWluVGV4dEl0ZW1zIiwibWluTWFya2Rvd25DaGFycyIsIm1pblRhYmxlcyIsImdhdGVzIiwiY2FjaGVkQ29uZmlnIiwiZ2V0R2F0ZXNDb25maWdQYXRoIiwicHJvY2VzcyIsImVudiIsIkdBVEVTX0NPTkZJR19QQVRIIiwiam9pbiIsImN3ZCIsImxvYWRRdWFsaXR5R2F0ZXNDb25maWciLCJjb25maWdQYXRoIiwicmF3IiwicmVhZEZpbGUiLCJwYXJzZWQiLCJwYXJzZSIsIkpTT04iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/_lib/config.ts\n");

/***/ }),

/***/ "(rsc)/./app/_lib/env.ts":
/*!*************************!*\
  !*** ./app/_lib/env.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMissingEnv: () => (/* binding */ getMissingEnv),\n/* harmony export */   getRequiredEnvKeys: () => (/* binding */ getRequiredEnvKeys),\n/* harmony export */   getResolvedRuntimeEnv: () => (/* binding */ getResolvedRuntimeEnv),\n/* harmony export */   resolveEnvValue: () => (/* binding */ resolveEnvValue)\n/* harmony export */ });\n/**\n * @fileoverview Resolves and validates required runtime environment values.\n */ const requiredEnvKeys = [\n    \"PYTHON_BIN\",\n    \"DOCLING_WORKER\",\n    \"DATA_DIR\",\n    \"GATES_CONFIG_PATH\"\n];\n/**\n * Returns the list of required environment variable keys.\n */ function getRequiredEnvKeys() {\n    return [\n        ...requiredEnvKeys\n    ];\n}\n/**\n * Resolves a required env var or returns null when missing/blank.\n */ function resolveEnvValue(key) {\n    const raw = process.env[key];\n    if (!raw || raw.trim().length === 0) {\n        return null;\n    }\n    return raw;\n}\n/**\n * Lists required env vars that are missing or empty.\n */ function getMissingEnv() {\n    return requiredEnvKeys.filter((key)=>resolveEnvValue(key) === null);\n}\n/**\n * Returns the env values needed by the worker runtime.\n */ function getResolvedRuntimeEnv() {\n    return {\n        PYTHON_BIN: resolveEnvValue(\"PYTHON_BIN\"),\n        DOCLING_WORKER: resolveEnvValue(\"DOCLING_WORKER\")\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvX2xpYi9lbnYudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztDQUVDLEdBQ0QsTUFBTUEsa0JBQWtCO0lBQ3RCO0lBQ0E7SUFDQTtJQUNBO0NBQ0Q7QUFJRDs7Q0FFQyxHQUNNLFNBQVNDO0lBQ2QsT0FBTztXQUFJRDtLQUFnQjtBQUM3QjtBQUVBOztDQUVDLEdBQ00sU0FBU0UsZ0JBQWdCQyxHQUFtQjtJQUNqRCxNQUFNQyxNQUFNQyxRQUFRQyxHQUFHLENBQUNILElBQUk7SUFDNUIsSUFBSSxDQUFDQyxPQUFPQSxJQUFJRyxJQUFJLEdBQUdDLE1BQU0sS0FBSyxHQUFHO1FBQ25DLE9BQU87SUFDVDtJQUNBLE9BQU9KO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNNLFNBQVNLO0lBQ2QsT0FBT1QsZ0JBQWdCVSxNQUFNLENBQUMsQ0FBQ1AsTUFBUUQsZ0JBQWdCQyxTQUFTO0FBQ2xFO0FBRUE7O0NBRUMsR0FDTSxTQUFTUTtJQUlkLE9BQU87UUFDTEMsWUFBWVYsZ0JBQWdCO1FBQzVCVyxnQkFBZ0JYLGdCQUFnQjtJQUNsQztBQUNGIiwic291cmNlcyI6WyJEOlxcUHJvZ3JhbW1pbmdcXFBsYXlncm91bmQgQUlcXFBpcGVsaW5lX09DUitFeHBvcnRfUmFwb2FydGVfUERGXFxhcHBcXF9saWJcXGVudi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgUmVzb2x2ZXMgYW5kIHZhbGlkYXRlcyByZXF1aXJlZCBydW50aW1lIGVudmlyb25tZW50IHZhbHVlcy5cbiAqL1xuY29uc3QgcmVxdWlyZWRFbnZLZXlzID0gW1xuICBcIlBZVEhPTl9CSU5cIixcbiAgXCJET0NMSU5HX1dPUktFUlwiLFxuICBcIkRBVEFfRElSXCIsXG4gIFwiR0FURVNfQ09ORklHX1BBVEhcIlxuXSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgUmVxdWlyZWRFbnZLZXkgPSAodHlwZW9mIHJlcXVpcmVkRW52S2V5cylbbnVtYmVyXTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlIGtleXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1aXJlZEVudktleXMoKTogUmVxdWlyZWRFbnZLZXlbXSB7XG4gIHJldHVybiBbLi4ucmVxdWlyZWRFbnZLZXlzXTtcbn1cblxuLyoqXG4gKiBSZXNvbHZlcyBhIHJlcXVpcmVkIGVudiB2YXIgb3IgcmV0dXJucyBudWxsIHdoZW4gbWlzc2luZy9ibGFuay5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVFbnZWYWx1ZShrZXk6IFJlcXVpcmVkRW52S2V5KTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IHJhdyA9IHByb2Nlc3MuZW52W2tleV07XG4gIGlmICghcmF3IHx8IHJhdy50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHJhdztcbn1cblxuLyoqXG4gKiBMaXN0cyByZXF1aXJlZCBlbnYgdmFycyB0aGF0IGFyZSBtaXNzaW5nIG9yIGVtcHR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWlzc2luZ0VudigpOiBzdHJpbmdbXSB7XG4gIHJldHVybiByZXF1aXJlZEVudktleXMuZmlsdGVyKChrZXkpID0+IHJlc29sdmVFbnZWYWx1ZShrZXkpID09PSBudWxsKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBlbnYgdmFsdWVzIG5lZWRlZCBieSB0aGUgd29ya2VyIHJ1bnRpbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXNvbHZlZFJ1bnRpbWVFbnYoKToge1xuICBQWVRIT05fQklOOiBzdHJpbmcgfCBudWxsO1xuICBET0NMSU5HX1dPUktFUjogc3RyaW5nIHwgbnVsbDtcbn0ge1xuICByZXR1cm4ge1xuICAgIFBZVEhPTl9CSU46IHJlc29sdmVFbnZWYWx1ZShcIlBZVEhPTl9CSU5cIiksXG4gICAgRE9DTElOR19XT1JLRVI6IHJlc29sdmVFbnZWYWx1ZShcIkRPQ0xJTkdfV09SS0VSXCIpXG4gIH07XG59XG4iXSwibmFtZXMiOlsicmVxdWlyZWRFbnZLZXlzIiwiZ2V0UmVxdWlyZWRFbnZLZXlzIiwicmVzb2x2ZUVudlZhbHVlIiwia2V5IiwicmF3IiwicHJvY2VzcyIsImVudiIsInRyaW0iLCJsZW5ndGgiLCJnZXRNaXNzaW5nRW52IiwiZmlsdGVyIiwiZ2V0UmVzb2x2ZWRSdW50aW1lRW52IiwiUFlUSE9OX0JJTiIsIkRPQ0xJTkdfV09SS0VSIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/_lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./app/_lib/meta.ts":
/*!**************************!*\
  !*** ./app/_lib/meta.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resolveStatus: () => (/* binding */ resolveStatus),\n/* harmony export */   toDocMeta: () => (/* binding */ toDocMeta)\n/* harmony export */ });\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schema */ \"(rsc)/./app/_lib/schema.ts\");\n/**\n * @fileoverview Normalizes meta.json into UI-friendly document metadata.\n */ \n/**\n * Converts raw meta.json into a validated UI-friendly structure.\n */ function toDocMeta(meta) {\n    const metrics = normalizeMetrics(meta.metrics);\n    const failedGates = normalizeFailedGates(meta.qualityGates.failedGates);\n    const logs = normalizeLogs(meta.logs);\n    const status = resolveStatus(meta, failedGates);\n    const raw = {\n        id: meta.id ?? \"\",\n        originalFileName: meta.source?.originalFileName ?? \"\",\n        mimeType: meta.source?.mimeType ?? \"\",\n        createdAt: meta.createdAt ?? \"\",\n        status,\n        metrics,\n        failedGates,\n        logs\n    };\n    return _schema__WEBPACK_IMPORTED_MODULE_0__.docMetaSchema.parse(raw);\n}\n/**\n * Resolves the final document status from processing and gate outputs.\n */ function resolveStatus(meta, failedGates) {\n    const processingStatus = meta.processing.status ?? \"PENDING\";\n    const hasOutputs = Boolean(meta.outputs.markdownPath) && Boolean(meta.outputs.jsonPath);\n    if (processingStatus === \"PENDING\") {\n        return \"PENDING\";\n    }\n    if (failedGates.length > 0) {\n        return \"FAILED\";\n    }\n    if (processingStatus !== \"SUCCESS\") {\n        return \"FAILED\";\n    }\n    if (!hasOutputs) {\n        return \"FAILED\";\n    }\n    return \"SUCCESS\";\n}\nfunction normalizeMetrics(metrics) {\n    return {\n        pages: Number.isFinite(metrics.pages) ? metrics.pages : 0,\n        textChars: Number.isFinite(metrics.textChars) ? metrics.textChars : 0,\n        mdChars: Number.isFinite(metrics.mdChars) ? metrics.mdChars : 0,\n        textItems: Number.isFinite(metrics.textItems) ? metrics.textItems : 0,\n        tables: Number.isFinite(metrics.tables) ? metrics.tables : 0,\n        textCharsPerPageAvg: Number.isFinite(metrics.textCharsPerPageAvg) ? metrics.textCharsPerPageAvg : 0\n    };\n}\nfunction normalizeFailedGates(gates) {\n    return gates.map((gate)=>({\n            code: gate.code ?? \"\",\n            message: gate.message ?? \"\",\n            actual: Number.isFinite(gate.actual) ? gate.actual : 0,\n            expectedOp: gate.expectedOp ?? \"\",\n            expected: Number.isFinite(gate.expected) ? gate.expected : 0\n        }));\n}\nfunction normalizeLogs(logs) {\n    return {\n        stdoutTail: logs.stdoutTail ?? \"\",\n        stderrTail: logs.stderrTail ?? \"\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvX2xpYi9tZXRhLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztDQUVDLEdBT2lCO0FBRWxCOztDQUVDLEdBQ00sU0FBU0MsVUFBVUMsSUFBYztJQUN0QyxNQUFNQyxVQUFVQyxpQkFBaUJGLEtBQUtDLE9BQU87SUFDN0MsTUFBTUUsY0FBY0MscUJBQXFCSixLQUFLSyxZQUFZLENBQUNGLFdBQVc7SUFDdEUsTUFBTUcsT0FBT0MsY0FBY1AsS0FBS00sSUFBSTtJQUNwQyxNQUFNRSxTQUFTQyxjQUFjVCxNQUFNRztJQUNuQyxNQUFNTyxNQUFNO1FBQ1ZDLElBQUlYLEtBQUtXLEVBQUUsSUFBSTtRQUNmQyxrQkFBa0JaLEtBQUthLE1BQU0sRUFBRUQsb0JBQW9CO1FBQ25ERSxVQUFVZCxLQUFLYSxNQUFNLEVBQUVDLFlBQVk7UUFDbkNDLFdBQVdmLEtBQUtlLFNBQVMsSUFBSTtRQUM3QlA7UUFDQVA7UUFDQUU7UUFDQUc7SUFDRjtJQUVBLE9BQU9SLGtEQUFhQSxDQUFDa0IsS0FBSyxDQUFDTjtBQUM3QjtBQUVBOztDQUVDLEdBQ00sU0FBU0QsY0FBY1QsSUFBYyxFQUFFRyxXQUF5QjtJQUNyRSxNQUFNYyxtQkFBbUJqQixLQUFLa0IsVUFBVSxDQUFDVixNQUFNLElBQUk7SUFDbkQsTUFBTVcsYUFBYUMsUUFBUXBCLEtBQUtxQixPQUFPLENBQUNDLFlBQVksS0FBS0YsUUFBUXBCLEtBQUtxQixPQUFPLENBQUNFLFFBQVE7SUFFdEYsSUFBSU4scUJBQXFCLFdBQVc7UUFDbEMsT0FBTztJQUNUO0lBRUEsSUFBSWQsWUFBWXFCLE1BQU0sR0FBRyxHQUFHO1FBQzFCLE9BQU87SUFDVDtJQUVBLElBQUlQLHFCQUFxQixXQUFXO1FBQ2xDLE9BQU87SUFDVDtJQUVBLElBQUksQ0FBQ0UsWUFBWTtRQUNmLE9BQU87SUFDVDtJQUVBLE9BQU87QUFDVDtBQUVBLFNBQVNqQixpQkFBaUJELE9BQWdCO0lBQ3hDLE9BQU87UUFDTHdCLE9BQU9DLE9BQU9DLFFBQVEsQ0FBQzFCLFFBQVF3QixLQUFLLElBQUl4QixRQUFRd0IsS0FBSyxHQUFHO1FBQ3hERyxXQUFXRixPQUFPQyxRQUFRLENBQUMxQixRQUFRMkIsU0FBUyxJQUFJM0IsUUFBUTJCLFNBQVMsR0FBRztRQUNwRUMsU0FBU0gsT0FBT0MsUUFBUSxDQUFDMUIsUUFBUTRCLE9BQU8sSUFBSTVCLFFBQVE0QixPQUFPLEdBQUc7UUFDOURDLFdBQVdKLE9BQU9DLFFBQVEsQ0FBQzFCLFFBQVE2QixTQUFTLElBQUk3QixRQUFRNkIsU0FBUyxHQUFHO1FBQ3BFQyxRQUFRTCxPQUFPQyxRQUFRLENBQUMxQixRQUFROEIsTUFBTSxJQUFJOUIsUUFBUThCLE1BQU0sR0FBRztRQUMzREMscUJBQXFCTixPQUFPQyxRQUFRLENBQUMxQixRQUFRK0IsbUJBQW1CLElBQzVEL0IsUUFBUStCLG1CQUFtQixHQUMzQjtJQUNOO0FBQ0Y7QUFFQSxTQUFTNUIscUJBQXFCNkIsS0FBbUI7SUFDL0MsT0FBT0EsTUFBTUMsR0FBRyxDQUFDLENBQUNDLE9BQVU7WUFDMUJDLE1BQU1ELEtBQUtDLElBQUksSUFBSTtZQUNuQkMsU0FBU0YsS0FBS0UsT0FBTyxJQUFJO1lBQ3pCQyxRQUFRWixPQUFPQyxRQUFRLENBQUNRLEtBQUtHLE1BQU0sSUFBSUgsS0FBS0csTUFBTSxHQUFHO1lBQ3JEQyxZQUFZSixLQUFLSSxVQUFVLElBQUk7WUFDL0JDLFVBQVVkLE9BQU9DLFFBQVEsQ0FBQ1EsS0FBS0ssUUFBUSxJQUFJTCxLQUFLSyxRQUFRLEdBQUc7UUFDN0Q7QUFDRjtBQUVBLFNBQVNqQyxjQUFjRCxJQUFzQjtJQUMzQyxPQUFPO1FBQ0xtQyxZQUFZbkMsS0FBS21DLFVBQVUsSUFBSTtRQUMvQkMsWUFBWXBDLEtBQUtvQyxVQUFVLElBQUk7SUFDakM7QUFDRiIsInNvdXJjZXMiOlsiRDpcXFByb2dyYW1taW5nXFxQbGF5Z3JvdW5kIEFJXFxQaXBlbGluZV9PQ1IrRXhwb3J0X1JhcG9hcnRlX1BERlxcYXBwXFxfbGliXFxtZXRhLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVvdmVydmlldyBOb3JtYWxpemVzIG1ldGEuanNvbiBpbnRvIFVJLWZyaWVuZGx5IGRvY3VtZW50IG1ldGFkYXRhLlxuICovXG5pbXBvcnQge1xuICBkb2NNZXRhU2NoZW1hLFxuICB0eXBlIERvY01ldGEsXG4gIHR5cGUgRmFpbGVkR2F0ZSxcbiAgdHlwZSBNZXRhRmlsZSxcbiAgdHlwZSBNZXRyaWNzXG59IGZyb20gXCIuL3NjaGVtYVwiO1xuXG4vKipcbiAqIENvbnZlcnRzIHJhdyBtZXRhLmpzb24gaW50byBhIHZhbGlkYXRlZCBVSS1mcmllbmRseSBzdHJ1Y3R1cmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RvY01ldGEobWV0YTogTWV0YUZpbGUpOiBEb2NNZXRhIHtcbiAgY29uc3QgbWV0cmljcyA9IG5vcm1hbGl6ZU1ldHJpY3MobWV0YS5tZXRyaWNzKTtcbiAgY29uc3QgZmFpbGVkR2F0ZXMgPSBub3JtYWxpemVGYWlsZWRHYXRlcyhtZXRhLnF1YWxpdHlHYXRlcy5mYWlsZWRHYXRlcyk7XG4gIGNvbnN0IGxvZ3MgPSBub3JtYWxpemVMb2dzKG1ldGEubG9ncyk7XG4gIGNvbnN0IHN0YXR1cyA9IHJlc29sdmVTdGF0dXMobWV0YSwgZmFpbGVkR2F0ZXMpO1xuICBjb25zdCByYXcgPSB7XG4gICAgaWQ6IG1ldGEuaWQgPz8gXCJcIixcbiAgICBvcmlnaW5hbEZpbGVOYW1lOiBtZXRhLnNvdXJjZT8ub3JpZ2luYWxGaWxlTmFtZSA/PyBcIlwiLFxuICAgIG1pbWVUeXBlOiBtZXRhLnNvdXJjZT8ubWltZVR5cGUgPz8gXCJcIixcbiAgICBjcmVhdGVkQXQ6IG1ldGEuY3JlYXRlZEF0ID8/IFwiXCIsXG4gICAgc3RhdHVzLFxuICAgIG1ldHJpY3MsXG4gICAgZmFpbGVkR2F0ZXMsXG4gICAgbG9nc1xuICB9O1xuXG4gIHJldHVybiBkb2NNZXRhU2NoZW1hLnBhcnNlKHJhdyk7XG59XG5cbi8qKlxuICogUmVzb2x2ZXMgdGhlIGZpbmFsIGRvY3VtZW50IHN0YXR1cyBmcm9tIHByb2Nlc3NpbmcgYW5kIGdhdGUgb3V0cHV0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVTdGF0dXMobWV0YTogTWV0YUZpbGUsIGZhaWxlZEdhdGVzOiBGYWlsZWRHYXRlW10pOiBEb2NNZXRhW1wic3RhdHVzXCJdIHtcbiAgY29uc3QgcHJvY2Vzc2luZ1N0YXR1cyA9IG1ldGEucHJvY2Vzc2luZy5zdGF0dXMgPz8gXCJQRU5ESU5HXCI7XG4gIGNvbnN0IGhhc091dHB1dHMgPSBCb29sZWFuKG1ldGEub3V0cHV0cy5tYXJrZG93blBhdGgpICYmIEJvb2xlYW4obWV0YS5vdXRwdXRzLmpzb25QYXRoKTtcblxuICBpZiAocHJvY2Vzc2luZ1N0YXR1cyA9PT0gXCJQRU5ESU5HXCIpIHtcbiAgICByZXR1cm4gXCJQRU5ESU5HXCI7XG4gIH1cblxuICBpZiAoZmFpbGVkR2F0ZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBcIkZBSUxFRFwiO1xuICB9XG5cbiAgaWYgKHByb2Nlc3NpbmdTdGF0dXMgIT09IFwiU1VDQ0VTU1wiKSB7XG4gICAgcmV0dXJuIFwiRkFJTEVEXCI7XG4gIH1cblxuICBpZiAoIWhhc091dHB1dHMpIHtcbiAgICByZXR1cm4gXCJGQUlMRURcIjtcbiAgfVxuXG4gIHJldHVybiBcIlNVQ0NFU1NcIjtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplTWV0cmljcyhtZXRyaWNzOiBNZXRyaWNzKTogTWV0cmljcyB7XG4gIHJldHVybiB7XG4gICAgcGFnZXM6IE51bWJlci5pc0Zpbml0ZShtZXRyaWNzLnBhZ2VzKSA/IG1ldHJpY3MucGFnZXMgOiAwLFxuICAgIHRleHRDaGFyczogTnVtYmVyLmlzRmluaXRlKG1ldHJpY3MudGV4dENoYXJzKSA/IG1ldHJpY3MudGV4dENoYXJzIDogMCxcbiAgICBtZENoYXJzOiBOdW1iZXIuaXNGaW5pdGUobWV0cmljcy5tZENoYXJzKSA/IG1ldHJpY3MubWRDaGFycyA6IDAsXG4gICAgdGV4dEl0ZW1zOiBOdW1iZXIuaXNGaW5pdGUobWV0cmljcy50ZXh0SXRlbXMpID8gbWV0cmljcy50ZXh0SXRlbXMgOiAwLFxuICAgIHRhYmxlczogTnVtYmVyLmlzRmluaXRlKG1ldHJpY3MudGFibGVzKSA/IG1ldHJpY3MudGFibGVzIDogMCxcbiAgICB0ZXh0Q2hhcnNQZXJQYWdlQXZnOiBOdW1iZXIuaXNGaW5pdGUobWV0cmljcy50ZXh0Q2hhcnNQZXJQYWdlQXZnKVxuICAgICAgPyBtZXRyaWNzLnRleHRDaGFyc1BlclBhZ2VBdmdcbiAgICAgIDogMFxuICB9O1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVGYWlsZWRHYXRlcyhnYXRlczogRmFpbGVkR2F0ZVtdKTogRmFpbGVkR2F0ZVtdIHtcbiAgcmV0dXJuIGdhdGVzLm1hcCgoZ2F0ZSkgPT4gKHtcbiAgICBjb2RlOiBnYXRlLmNvZGUgPz8gXCJcIixcbiAgICBtZXNzYWdlOiBnYXRlLm1lc3NhZ2UgPz8gXCJcIixcbiAgICBhY3R1YWw6IE51bWJlci5pc0Zpbml0ZShnYXRlLmFjdHVhbCkgPyBnYXRlLmFjdHVhbCA6IDAsXG4gICAgZXhwZWN0ZWRPcDogZ2F0ZS5leHBlY3RlZE9wID8/IFwiXCIsXG4gICAgZXhwZWN0ZWQ6IE51bWJlci5pc0Zpbml0ZShnYXRlLmV4cGVjdGVkKSA/IGdhdGUuZXhwZWN0ZWQgOiAwXG4gIH0pKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplTG9ncyhsb2dzOiBNZXRhRmlsZVtcImxvZ3NcIl0pOiB7IHN0ZG91dFRhaWw6IHN0cmluZzsgc3RkZXJyVGFpbDogc3RyaW5nIH0ge1xuICByZXR1cm4ge1xuICAgIHN0ZG91dFRhaWw6IGxvZ3Muc3Rkb3V0VGFpbCA/PyBcIlwiLFxuICAgIHN0ZGVyclRhaWw6IGxvZ3Muc3RkZXJyVGFpbCA/PyBcIlwiXG4gIH07XG59XG4iXSwibmFtZXMiOlsiZG9jTWV0YVNjaGVtYSIsInRvRG9jTWV0YSIsIm1ldGEiLCJtZXRyaWNzIiwibm9ybWFsaXplTWV0cmljcyIsImZhaWxlZEdhdGVzIiwibm9ybWFsaXplRmFpbGVkR2F0ZXMiLCJxdWFsaXR5R2F0ZXMiLCJsb2dzIiwibm9ybWFsaXplTG9ncyIsInN0YXR1cyIsInJlc29sdmVTdGF0dXMiLCJyYXciLCJpZCIsIm9yaWdpbmFsRmlsZU5hbWUiLCJzb3VyY2UiLCJtaW1lVHlwZSIsImNyZWF0ZWRBdCIsInBhcnNlIiwicHJvY2Vzc2luZ1N0YXR1cyIsInByb2Nlc3NpbmciLCJoYXNPdXRwdXRzIiwiQm9vbGVhbiIsIm91dHB1dHMiLCJtYXJrZG93blBhdGgiLCJqc29uUGF0aCIsImxlbmd0aCIsInBhZ2VzIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJ0ZXh0Q2hhcnMiLCJtZENoYXJzIiwidGV4dEl0ZW1zIiwidGFibGVzIiwidGV4dENoYXJzUGVyUGFnZUF2ZyIsImdhdGVzIiwibWFwIiwiZ2F0ZSIsImNvZGUiLCJtZXNzYWdlIiwiYWN0dWFsIiwiZXhwZWN0ZWRPcCIsImV4cGVjdGVkIiwic3Rkb3V0VGFpbCIsInN0ZGVyclRhaWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/_lib/meta.ts\n");

/***/ }),

/***/ "(rsc)/./app/_lib/processRunner.ts":
/*!***********************************!*\
  !*** ./app/_lib/processRunner.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runProcess: () => (/* binding */ runProcess)\n/* harmony export */ });\n/* harmony import */ var node_child_process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:child_process */ \"node:child_process\");\n/* harmony import */ var node_child_process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_child_process__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * @fileoverview Runs a child process with output tailing and timeout control.\n */ \n/**\n * Spawns a process and collects exit status plus tailed output.\n */ function runProcess(options) {\n    const { command, args, cwd, timeoutMs, stdoutTailBytes, stderrTailBytes, onStdoutLine, onStderrLine } = options;\n    const stdoutTail = createTailBuffer(stdoutTailBytes);\n    const stderrTail = createTailBuffer(stderrTailBytes);\n    const stdoutLines = onStdoutLine ? createLineBuffer() : null;\n    const stderrLines = onStderrLine ? createLineBuffer() : null;\n    return new Promise((resolve, reject)=>{\n        const child = (0,node_child_process__WEBPACK_IMPORTED_MODULE_0__.spawn)(command, args, {\n            cwd,\n            env: process.env,\n            stdio: [\n                \"ignore\",\n                \"pipe\",\n                \"pipe\"\n            ]\n        });\n        let timedOut = false;\n        const timeout = setTimeout(()=>{\n            timedOut = true;\n            if (!child.killed) {\n                child.kill(\"SIGKILL\");\n            }\n        }, timeoutMs);\n        child.stdout?.on(\"data\", (chunk)=>{\n            stdoutTail.append(chunk);\n            if (stdoutLines && onStdoutLine) {\n                stdoutLines.append(chunk, onStdoutLine);\n            }\n        });\n        child.stderr?.on(\"data\", (chunk)=>{\n            stderrTail.append(chunk);\n            if (stderrLines && onStderrLine) {\n                stderrLines.append(chunk, onStderrLine);\n            }\n        });\n        child.on(\"error\", (error)=>{\n            clearTimeout(timeout);\n            stdoutLines?.flush(onStdoutLine ?? (()=>{}));\n            stderrLines?.flush(onStderrLine ?? (()=>{}));\n            stderrTail.append(Buffer.from(String(error)));\n            reject(error);\n        });\n        child.on(\"close\", (code, signal)=>{\n            clearTimeout(timeout);\n            stdoutLines?.flush(onStdoutLine ?? (()=>{}));\n            stderrLines?.flush(onStderrLine ?? (()=>{}));\n            resolve({\n                exitCode: typeof code === \"number\" ? code : -1,\n                signal: signal ?? null,\n                stdoutTail: stdoutTail.toString(),\n                stderrTail: stderrTail.toString(),\n                timedOut\n            });\n        });\n    });\n}\nfunction createTailBuffer(maxBytes) {\n    let buffer = Buffer.alloc(0);\n    return {\n        append (chunk) {\n            if (maxBytes <= 0) {\n                return;\n            }\n            buffer = Buffer.concat([\n                buffer,\n                chunk\n            ]);\n            if (buffer.length > maxBytes) {\n                buffer = buffer.subarray(buffer.length - maxBytes);\n            }\n        },\n        toString () {\n            return buffer.toString(\"utf-8\");\n        }\n    };\n}\nfunction createLineBuffer() {\n    let buffer = \"\";\n    const flushLine = (line, onLine)=>{\n        const trimmed = line.endsWith(\"\\r\") ? line.slice(0, -1) : line;\n        if (trimmed.length > 0) {\n            onLine(trimmed);\n        }\n    };\n    return {\n        append (chunk, onLine) {\n            buffer += chunk.toString(\"utf-8\");\n            let index = buffer.indexOf(\"\\n\");\n            while(index >= 0){\n                const line = buffer.slice(0, index);\n                buffer = buffer.slice(index + 1);\n                flushLine(line, onLine);\n                index = buffer.indexOf(\"\\n\");\n            }\n        },\n        flush (onLine) {\n            if (buffer.length > 0) {\n                flushLine(buffer, onLine);\n                buffer = \"\";\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUcsR0FBRztZQUN0QkksT0FBT0M7UUFDVDtJQUNGO0lBRUEsT0FBTztRQUNMckIsUUFBT0QsS0FBSyxFQUFFcUIsTUFBTTtZQUNsQlAsVUFBVWQsTUFBTVksUUFBUSxDQUFDO1lBQ3pCLElBQUlhLFFBQVFYLE9BQU9ZLE9BQU8sQ0FBQztZQUMzQixNQUFPRCxTQUFTLEVBQUc7Z0JBQ2pCLE1BQU1MLE9BQU9OLE9BQU9VLEtBQUssQ0FBQyxHQUFHQztnQkFDN0JYLFNBQVNBLE9BQU9VLEtBQUssQ0FBQ0MsUUFBUTtnQkFDOUJOLFVBQVVDLE1BQU1DO2dCQUNoQkksUUFBUVgsT0FBT1ksT0FBTyxDQUFDO1lBQ3pCO1FBQ0Y7UUFDQXJCLE9BQU1nQixNQUFNO1lBQ1YsSUFBSVAsT0FBT0csTUFBTSxHQUFHLEdBQUc7Z0JBQ3JCRSxVQUFVTCxRQUFRTztnQkFDbEJQLFNBQVM7WUFDWDtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiRDpcXFByb2dyYW1taW5nXFxQbGF5Z3JvdW5kIEFJXFxQaXBlbGluZV9PQ1IrRXhwb3J0X1JhcG9hcnRlX1BERlxcYXBwXFxfbGliXFxwcm9jZXNzUnVubmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVvdmVydmlldyBSdW5zIGEgY2hpbGQgcHJvY2VzcyB3aXRoIG91dHB1dCB0YWlsaW5nIGFuZCB0aW1lb3V0IGNvbnRyb2wuXG4gKi9cbmltcG9ydCB7IHNwYXduIH0gZnJvbSBcIm5vZGU6Y2hpbGRfcHJvY2Vzc1wiO1xuXG5leHBvcnQgdHlwZSBQcm9jZXNzUmVzdWx0ID0ge1xuICBleGl0Q29kZTogbnVtYmVyO1xuICBzaWduYWw6IE5vZGVKUy5TaWduYWxzIHwgbnVsbDtcbiAgc3Rkb3V0VGFpbDogc3RyaW5nO1xuICBzdGRlcnJUYWlsOiBzdHJpbmc7XG4gIHRpbWVkT3V0OiBib29sZWFuO1xufTtcblxudHlwZSBSdW5PcHRpb25zID0ge1xuICBjb21tYW5kOiBzdHJpbmc7XG4gIGFyZ3M6IHN0cmluZ1tdO1xuICBjd2Q/OiBzdHJpbmc7XG4gIHRpbWVvdXRNczogbnVtYmVyO1xuICBzdGRvdXRUYWlsQnl0ZXM6IG51bWJlcjtcbiAgc3RkZXJyVGFpbEJ5dGVzOiBudW1iZXI7XG4gIG9uU3Rkb3V0TGluZT86IChsaW5lOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uU3RkZXJyTGluZT86IChsaW5lOiBzdHJpbmcpID0+IHZvaWQ7XG59O1xuXG4vKipcbiAqIFNwYXducyBhIHByb2Nlc3MgYW5kIGNvbGxlY3RzIGV4aXQgc3RhdHVzIHBsdXMgdGFpbGVkIG91dHB1dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJ1blByb2Nlc3Mob3B0aW9uczogUnVuT3B0aW9ucyk6IFByb21pc2U8UHJvY2Vzc1Jlc3VsdD4ge1xuICBjb25zdCB7XG4gICAgY29tbWFuZCxcbiAgICBhcmdzLFxuICAgIGN3ZCxcbiAgICB0aW1lb3V0TXMsXG4gICAgc3Rkb3V0VGFpbEJ5dGVzLFxuICAgIHN0ZGVyclRhaWxCeXRlcyxcbiAgICBvblN0ZG91dExpbmUsXG4gICAgb25TdGRlcnJMaW5lXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBzdGRvdXRUYWlsID0gY3JlYXRlVGFpbEJ1ZmZlcihzdGRvdXRUYWlsQnl0ZXMpO1xuICBjb25zdCBzdGRlcnJUYWlsID0gY3JlYXRlVGFpbEJ1ZmZlcihzdGRlcnJUYWlsQnl0ZXMpO1xuICBjb25zdCBzdGRvdXRMaW5lcyA9IG9uU3Rkb3V0TGluZSA/IGNyZWF0ZUxpbmVCdWZmZXIoKSA6IG51bGw7XG4gIGNvbnN0IHN0ZGVyckxpbmVzID0gb25TdGRlcnJMaW5lID8gY3JlYXRlTGluZUJ1ZmZlcigpIDogbnVsbDtcblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGNoaWxkID0gc3Bhd24oY29tbWFuZCwgYXJncywge1xuICAgICAgY3dkLFxuICAgICAgZW52OiBwcm9jZXNzLmVudixcbiAgICAgIHN0ZGlvOiBbXCJpZ25vcmVcIiwgXCJwaXBlXCIsIFwicGlwZVwiXVxuICAgIH0pO1xuXG4gICAgbGV0IHRpbWVkT3V0ID0gZmFsc2U7XG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGltZWRPdXQgPSB0cnVlO1xuICAgICAgaWYgKCFjaGlsZC5raWxsZWQpIHtcbiAgICAgICAgY2hpbGQua2lsbChcIlNJR0tJTExcIik7XG4gICAgICB9XG4gICAgfSwgdGltZW91dE1zKTtcblxuICAgIGNoaWxkLnN0ZG91dD8ub24oXCJkYXRhXCIsIChjaHVuazogQnVmZmVyKSA9PiB7XG4gICAgICBzdGRvdXRUYWlsLmFwcGVuZChjaHVuayk7XG4gICAgICBpZiAoc3Rkb3V0TGluZXMgJiYgb25TdGRvdXRMaW5lKSB7XG4gICAgICAgIHN0ZG91dExpbmVzLmFwcGVuZChjaHVuaywgb25TdGRvdXRMaW5lKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNoaWxkLnN0ZGVycj8ub24oXCJkYXRhXCIsIChjaHVuazogQnVmZmVyKSA9PiB7XG4gICAgICBzdGRlcnJUYWlsLmFwcGVuZChjaHVuayk7XG4gICAgICBpZiAoc3RkZXJyTGluZXMgJiYgb25TdGRlcnJMaW5lKSB7XG4gICAgICAgIHN0ZGVyckxpbmVzLmFwcGVuZChjaHVuaywgb25TdGRlcnJMaW5lKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNoaWxkLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICBzdGRvdXRMaW5lcz8uZmx1c2gob25TdGRvdXRMaW5lID8/ICgoKSA9PiB7fSkpO1xuICAgICAgc3RkZXJyTGluZXM/LmZsdXNoKG9uU3RkZXJyTGluZSA/PyAoKCkgPT4ge30pKTtcbiAgICAgIHN0ZGVyclRhaWwuYXBwZW5kKEJ1ZmZlci5mcm9tKFN0cmluZyhlcnJvcikpKTtcbiAgICAgIHJlamVjdChlcnJvcik7XG4gICAgfSk7XG5cbiAgICBjaGlsZC5vbihcImNsb3NlXCIsIChjb2RlLCBzaWduYWwpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHN0ZG91dExpbmVzPy5mbHVzaChvblN0ZG91dExpbmUgPz8gKCgpID0+IHt9KSk7XG4gICAgICBzdGRlcnJMaW5lcz8uZmx1c2gob25TdGRlcnJMaW5lID8/ICgoKSA9PiB7fSkpO1xuICAgICAgcmVzb2x2ZSh7XG4gICAgICAgIGV4aXRDb2RlOiB0eXBlb2YgY29kZSA9PT0gXCJudW1iZXJcIiA/IGNvZGUgOiAtMSxcbiAgICAgICAgc2lnbmFsOiBzaWduYWwgPz8gbnVsbCxcbiAgICAgICAgc3Rkb3V0VGFpbDogc3Rkb3V0VGFpbC50b1N0cmluZygpLFxuICAgICAgICBzdGRlcnJUYWlsOiBzdGRlcnJUYWlsLnRvU3RyaW5nKCksXG4gICAgICAgIHRpbWVkT3V0XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbnR5cGUgVGFpbEJ1ZmZlciA9IHtcbiAgYXBwZW5kOiAoY2h1bms6IEJ1ZmZlcikgPT4gdm9pZDtcbiAgdG9TdHJpbmc6ICgpID0+IHN0cmluZztcbn07XG5cbnR5cGUgTGluZUJ1ZmZlciA9IHtcbiAgYXBwZW5kOiAoY2h1bms6IEJ1ZmZlciwgb25MaW5lOiAobGluZTogc3RyaW5nKSA9PiB2b2lkKSA9PiB2b2lkO1xuICBmbHVzaDogKG9uTGluZTogKGxpbmU6IHN0cmluZykgPT4gdm9pZCkgPT4gdm9pZDtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZVRhaWxCdWZmZXIobWF4Qnl0ZXM6IG51bWJlcik6IFRhaWxCdWZmZXIge1xuICBsZXQgYnVmZmVyID0gQnVmZmVyLmFsbG9jKDApO1xuXG4gIHJldHVybiB7XG4gICAgYXBwZW5kKGNodW5rOiBCdWZmZXIpIHtcbiAgICAgIGlmIChtYXhCeXRlcyA8PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW2J1ZmZlciwgY2h1bmtdKTtcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gbWF4Qnl0ZXMpIHtcbiAgICAgICAgYnVmZmVyID0gYnVmZmVyLnN1YmFycmF5KGJ1ZmZlci5sZW5ndGggLSBtYXhCeXRlcyk7XG4gICAgICB9XG4gICAgfSxcbiAgICB0b1N0cmluZygpIHtcbiAgICAgIHJldHVybiBidWZmZXIudG9TdHJpbmcoXCJ1dGYtOFwiKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmVCdWZmZXIoKTogTGluZUJ1ZmZlciB7XG4gIGxldCBidWZmZXIgPSBcIlwiO1xuXG4gIGNvbnN0IGZsdXNoTGluZSA9IChsaW5lOiBzdHJpbmcsIG9uTGluZTogKGxpbmU6IHN0cmluZykgPT4gdm9pZCkgPT4ge1xuICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLmVuZHNXaXRoKFwiXFxyXCIpID8gbGluZS5zbGljZSgwLCAtMSkgOiBsaW5lO1xuICAgIGlmICh0cmltbWVkLmxlbmd0aCA+IDApIHtcbiAgICAgIG9uTGluZSh0cmltbWVkKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhcHBlbmQoY2h1bmssIG9uTGluZSkge1xuICAgICAgYnVmZmVyICs9IGNodW5rLnRvU3RyaW5nKFwidXRmLThcIik7XG4gICAgICBsZXQgaW5kZXggPSBidWZmZXIuaW5kZXhPZihcIlxcblwiKTtcbiAgICAgIHdoaWxlIChpbmRleCA+PSAwKSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXIuc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoaW5kZXggKyAxKTtcbiAgICAgICAgZmx1c2hMaW5lKGxpbmUsIG9uTGluZSk7XG4gICAgICAgIGluZGV4ID0gYnVmZmVyLmluZGV4T2YoXCJcXG5cIik7XG4gICAgICB9XG4gICAgfSxcbiAgICBmbHVzaChvbkxpbmUpIHtcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBmbHVzaExpbmUoYnVmZmVyLCBvbkxpbmUpO1xuICAgICAgICBidWZmZXIgPSBcIlwiO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJzcGF3biIsInJ1blByb2Nlc3MiLCJvcHRpb25zIiwiY29tbWFuZCIsImFyZ3MiLCJjd2QiLCJ0aW1lb3V0TXMiLCJzdGRvdXRUYWlsQnl0ZXMiLCJzdGRlcnJUYWlsQnl0ZXMiLCJvblN0ZG91dExpbmUiLCJvblN0ZGVyckxpbmUiLCJzdGRvdXRUYWlsIiwiY3JlYXRlVGFpbEJ1ZmZlciIsInN0ZGVyclRhaWwiLCJzdGRvdXRMaW5lcyIsImNyZWF0ZUxpbmVCdWZmZXIiLCJzdGRlcnJMaW5lcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2hpbGQiLCJlbnYiLCJwcm9jZXNzIiwic3RkaW8iLCJ0aW1lZE91dCIsInRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwia2lsbGVkIiwia2lsbCIsInN0ZG91dCIsIm9uIiwiY2h1bmsiLCJhcHBlbmQiLCJzdGRlcnIiLCJlcnJvciIsImNsZWFyVGltZW91dCIsImZsdXNoIiwiQnVmZmVyIiwiZnJvbSIsIlN0cmluZyIsImNvZGUiLCJzaWduYWwiLCJleGl0Q29kZSIsInRvU3RyaW5nIiwibWF4Qnl0ZXMiLCJidWZmZXIiLCJhbGxvYyIsImNvbmNhdCIsImxlbmd0aCIsInN1YmFycmF5IiwiZmx1c2hMaW5lIiwibGluZSIsIm9uTGluZSIsInRyaW1tZWQiLCJlbmRzV2l0aCIsInNsaWNlIiwiaW5kZXgiLCJpbmRleE9mIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/_lib/processRunner.ts\n");

/***/ }),

/***/ "(rsc)/./app/_lib/schema.ts":
/*!****************************!*\
  !*** ./app/_lib/schema.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   docMetaSchema: () => (/* binding */ docMetaSchema),\n/* harmony export */   docStatusSchema: () => (/* binding */ docStatusSchema),\n/* harmony export */   docsIndexSchema: () => (/* binding */ docsIndexSchema),\n/* harmony export */   failedGateSchema: () => (/* binding */ failedGateSchema),\n/* harmony export */   metaFileSchema: () => (/* binding */ metaFileSchema),\n/* harmony export */   metaLogsSchema: () => (/* binding */ metaLogsSchema),\n/* harmony export */   metaOutputsSchema: () => (/* binding */ metaOutputsSchema),\n/* harmony export */   metaProcessingSchema: () => (/* binding */ metaProcessingSchema),\n/* harmony export */   metaQualityGatesSchema: () => (/* binding */ metaQualityGatesSchema),\n/* harmony export */   metaSourceSchema: () => (/* binding */ metaSourceSchema),\n/* harmony export */   metricsSchema: () => (/* binding */ metricsSchema),\n/* harmony export */   mimeTypeSchema: () => (/* binding */ mimeTypeSchema),\n/* harmony export */   qualityGateEvaluationSchema: () => (/* binding */ qualityGateEvaluationSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/**\n * @fileoverview Defines Zod schemas and types for meta.json contracts.\n */ \nconst mimeTypeSchema = zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n    \"application/pdf\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n]);\nconst docStatusSchema = zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n    \"PENDING\",\n    \"SUCCESS\",\n    \"FAILED\"\n]);\nconst metricsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    pages: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    textChars: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    mdChars: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    textItems: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    tables: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    textCharsPerPageAvg: zod__WEBPACK_IMPORTED_MODULE_0__.number()\n}).strict();\nconst failedGateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    code: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    message: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    actual: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    expectedOp: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    expected: zod__WEBPACK_IMPORTED_MODULE_0__.number()\n}).strict();\nconst qualityGateEvaluationSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    code: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    actual: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    passed: zod__WEBPACK_IMPORTED_MODULE_0__.boolean(),\n    severity: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"FAIL\",\n        \"WARN\"\n    ]).optional(),\n    metric: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    op: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    threshold: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    expectedOp: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    expected: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    message: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n}).strict();\nconst metaSourceSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    originalFileName: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    mimeType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    sizeBytes: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    sha256: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    storedPath: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n}).strict();\nconst metaProcessingSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    status: docStatusSchema,\n    stage: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    progress: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    message: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    requestId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    startedAt: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    finishedAt: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n    durationMs: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    timeoutSec: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    exitCode: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    worker: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        pythonBin: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n        pythonVersion: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n        doclingVersion: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n    }).optional()\n}).strict();\nconst metaOutputsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    markdownPath: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    jsonPath: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    bytes: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        markdown: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n        json: zod__WEBPACK_IMPORTED_MODULE_0__.number()\n    }).strict()\n}).strict();\nconst metaQualityGatesSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    configVersion: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    strict: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n    passed: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n    failedGates: zod__WEBPACK_IMPORTED_MODULE_0__.array(failedGateSchema),\n    evaluated: zod__WEBPACK_IMPORTED_MODULE_0__.array(qualityGateEvaluationSchema)\n}).strict();\nconst metaLogsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    stdoutTail: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    stderrTail: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n}).strict();\nconst metaFileSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    schemaVersion: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    requestId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    createdAt: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    source: metaSourceSchema,\n    processing: metaProcessingSchema,\n    outputs: metaOutputsSchema,\n    metrics: metricsSchema,\n    qualityGates: metaQualityGatesSchema,\n    logs: metaLogsSchema\n}).strict();\nconst docMetaSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    originalFileName: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    mimeType: mimeTypeSchema,\n    createdAt: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    status: docStatusSchema,\n    metrics: metricsSchema,\n    failedGates: zod__WEBPACK_IMPORTED_MODULE_0__.array(failedGateSchema),\n    logs: metaLogsSchema\n}).strict();\nconst docsIndexSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    docs: zod__WEBPACK_IMPORTED_MODULE_0__.array(docMetaSchema)\n}).strict();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Yix3Q0FBUyxHQUFHeUIsUUFBUTtJQUM1QkgsUUFBUXRCLHdDQUFTLEdBQUd5QixRQUFRO0lBQzVCaUMsYUFBYTFELHNDQUFPLENBQUNjO0lBQ3JCOEMsV0FBVzVELHNDQUFPLENBQUNxQjtBQUNyQixHQUNDUixNQUFNLEdBQUc7QUFFTCxNQUFNZ0QsaUJBQWlCN0QsdUNBQ3JCLENBQUM7SUFDTjhELFlBQVk5RCx1Q0FBUTtJQUNwQitELFlBQVkvRCx1Q0FBUTtBQUN0QixHQUNDYSxNQUFNLEdBQUc7QUFFTCxNQUFNbUQsaUJBQWlCaEUsdUNBQ3JCLENBQUM7SUFDTmlFLGVBQWVqRSx1Q0FBUSxHQUFHeUIsUUFBUTtJQUNsQ3lDLElBQUlsRSx1Q0FBUTtJQUNadUMsV0FBV3ZDLHVDQUFRLEdBQUd5QixRQUFRO0lBQzlCMEMsV0FBV25FLHVDQUFRLEdBQUd5QixRQUFRO0lBQzlCMkMsUUFBUXZDO0lBQ1J3QyxZQUFZbEM7SUFDWm1DLFNBQVNwQjtJQUNUcUIsU0FBU25FO0lBQ1RvRSxjQUFjaEI7SUFDZGlCLE1BQU1aO0FBQ1IsR0FDQ2hELE1BQU0sR0FBRztBQUVMLE1BQU02RCxnQkFBZ0IxRSx1Q0FDcEIsQ0FBQztJQUNOa0UsSUFBSWxFLHVDQUFRO0lBQ1o4QixrQkFBa0I5Qix1Q0FBUTtJQUMxQitCLFVBQVU5QjtJQUNWa0UsV0FBV25FLHVDQUFRO0lBQ25Cb0MsUUFBUWpDO0lBQ1JvRSxTQUFTbkU7SUFDVHNELGFBQWExRCxzQ0FBTyxDQUFDYztJQUNyQjJELE1BQU1aO0FBQ1IsR0FDQ2hELE1BQU0sR0FBRztBQUVMLE1BQU04RCxrQkFBa0IzRSx1Q0FDdEIsQ0FBQztJQUNONEUsTUFBTTVFLHNDQUFPLENBQUMwRTtBQUNoQixHQUNDN0QsTUFBTSxHQUFHIiwic291cmNlcyI6WyJEOlxcUHJvZ3JhbW1pbmdcXFBsYXlncm91bmQgQUlcXFBpcGVsaW5lX09DUitFeHBvcnRfUmFwb2FydGVfUERGXFxhcHBcXF9saWJcXHNjaGVtYS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgRGVmaW5lcyBab2Qgc2NoZW1hcyBhbmQgdHlwZXMgZm9yIG1ldGEuanNvbiBjb250cmFjdHMuXG4gKi9cbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmV4cG9ydCBjb25zdCBtaW1lVHlwZVNjaGVtYSA9IHouZW51bShbXG4gIFwiYXBwbGljYXRpb24vcGRmXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnRcIlxuXSk7XG5cbmV4cG9ydCBjb25zdCBkb2NTdGF0dXNTY2hlbWEgPSB6LmVudW0oW1wiUEVORElOR1wiLCBcIlNVQ0NFU1NcIiwgXCJGQUlMRURcIl0pO1xuXG5leHBvcnQgY29uc3QgbWV0cmljc1NjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgcGFnZXM6IHoubnVtYmVyKCksXG4gICAgdGV4dENoYXJzOiB6Lm51bWJlcigpLFxuICAgIG1kQ2hhcnM6IHoubnVtYmVyKCksXG4gICAgdGV4dEl0ZW1zOiB6Lm51bWJlcigpLFxuICAgIHRhYmxlczogei5udW1iZXIoKSxcbiAgICB0ZXh0Q2hhcnNQZXJQYWdlQXZnOiB6Lm51bWJlcigpXG4gIH0pXG4gIC5zdHJpY3QoKTtcblxuZXhwb3J0IGNvbnN0IGZhaWxlZEdhdGVTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIGNvZGU6IHouc3RyaW5nKCksXG4gICAgbWVzc2FnZTogei5zdHJpbmcoKSxcbiAgICBhY3R1YWw6IHoubnVtYmVyKCksXG4gICAgZXhwZWN0ZWRPcDogei5zdHJpbmcoKSxcbiAgICBleHBlY3RlZDogei5udW1iZXIoKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBxdWFsaXR5R2F0ZUV2YWx1YXRpb25TY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIGNvZGU6IHouc3RyaW5nKCksXG4gICAgYWN0dWFsOiB6Lm51bWJlcigpLFxuICAgIHBhc3NlZDogei5ib29sZWFuKCksXG4gICAgc2V2ZXJpdHk6IHouZW51bShbXCJGQUlMXCIsIFwiV0FSTlwiXSkub3B0aW9uYWwoKSxcbiAgICBtZXRyaWM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBvcDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHRocmVzaG9sZDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGV4cGVjdGVkT3A6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBleHBlY3RlZDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBtZXRhU291cmNlU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBvcmlnaW5hbEZpbGVOYW1lOiB6LnN0cmluZygpLFxuICAgIG1pbWVUeXBlOiB6LnN0cmluZygpLFxuICAgIHNpemVCeXRlczogei5udW1iZXIoKSxcbiAgICBzaGEyNTY6IHouc3RyaW5nKCksXG4gICAgc3RvcmVkUGF0aDogei5zdHJpbmcoKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBtZXRhUHJvY2Vzc2luZ1NjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgc3RhdHVzOiBkb2NTdGF0dXNTY2hlbWEsXG4gICAgc3RhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwcm9ncmVzczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXF1ZXN0SWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzdGFydGVkQXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBmaW5pc2hlZEF0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBkdXJhdGlvbk1zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgdGltZW91dFNlYzogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGV4aXRDb2RlOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgd29ya2VyOiB6XG4gICAgICAub2JqZWN0KHtcbiAgICAgICAgcHl0aG9uQmluOiB6LnN0cmluZygpLFxuICAgICAgICBweXRob25WZXJzaW9uOiB6LnN0cmluZygpLFxuICAgICAgICBkb2NsaW5nVmVyc2lvbjogei5zdHJpbmcoKVxuICAgICAgfSlcbiAgICAgIC5vcHRpb25hbCgpXG4gIH0pXG4gIC5zdHJpY3QoKTtcblxuZXhwb3J0IGNvbnN0IG1ldGFPdXRwdXRzU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBtYXJrZG93blBhdGg6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBqc29uUGF0aDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGJ5dGVzOiB6XG4gICAgICAub2JqZWN0KHtcbiAgICAgICAgbWFya2Rvd246IHoubnVtYmVyKCksXG4gICAgICAgIGpzb246IHoubnVtYmVyKClcbiAgICAgIH0pXG4gICAgICAuc3RyaWN0KClcbiAgfSlcbiAgLnN0cmljdCgpO1xuXG5leHBvcnQgY29uc3QgbWV0YVF1YWxpdHlHYXRlc1NjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgY29uZmlnVmVyc2lvbjogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIHN0cmljdDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICBwYXNzZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgZmFpbGVkR2F0ZXM6IHouYXJyYXkoZmFpbGVkR2F0ZVNjaGVtYSksXG4gICAgZXZhbHVhdGVkOiB6LmFycmF5KHF1YWxpdHlHYXRlRXZhbHVhdGlvblNjaGVtYSlcbiAgfSlcbiAgLnN0cmljdCgpO1xuXG5leHBvcnQgY29uc3QgbWV0YUxvZ3NTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIHN0ZG91dFRhaWw6IHouc3RyaW5nKCksXG4gICAgc3RkZXJyVGFpbDogei5zdHJpbmcoKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBtZXRhRmlsZVNjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgc2NoZW1hVmVyc2lvbjogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHJlcXVlc3RJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNyZWF0ZWRBdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNvdXJjZTogbWV0YVNvdXJjZVNjaGVtYSxcbiAgICBwcm9jZXNzaW5nOiBtZXRhUHJvY2Vzc2luZ1NjaGVtYSxcbiAgICBvdXRwdXRzOiBtZXRhT3V0cHV0c1NjaGVtYSxcbiAgICBtZXRyaWNzOiBtZXRyaWNzU2NoZW1hLFxuICAgIHF1YWxpdHlHYXRlczogbWV0YVF1YWxpdHlHYXRlc1NjaGVtYSxcbiAgICBsb2dzOiBtZXRhTG9nc1NjaGVtYVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBkb2NNZXRhU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICBvcmlnaW5hbEZpbGVOYW1lOiB6LnN0cmluZygpLFxuICAgIG1pbWVUeXBlOiBtaW1lVHlwZVNjaGVtYSxcbiAgICBjcmVhdGVkQXQ6IHouc3RyaW5nKCksXG4gICAgc3RhdHVzOiBkb2NTdGF0dXNTY2hlbWEsXG4gICAgbWV0cmljczogbWV0cmljc1NjaGVtYSxcbiAgICBmYWlsZWRHYXRlczogei5hcnJheShmYWlsZWRHYXRlU2NoZW1hKSxcbiAgICBsb2dzOiBtZXRhTG9nc1NjaGVtYVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBkb2NzSW5kZXhTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIGRvY3M6IHouYXJyYXkoZG9jTWV0YVNjaGVtYSlcbiAgfSlcbiAgLnN0cmljdCgpO1xuXG5leHBvcnQgdHlwZSBEb2NNZXRhID0gei5pbmZlcjx0eXBlb2YgZG9jTWV0YVNjaGVtYT47XG5leHBvcnQgdHlwZSBNZXRyaWNzID0gei5pbmZlcjx0eXBlb2YgbWV0cmljc1NjaGVtYT47XG5leHBvcnQgdHlwZSBGYWlsZWRHYXRlID0gei5pbmZlcjx0eXBlb2YgZmFpbGVkR2F0ZVNjaGVtYT47XG5leHBvcnQgdHlwZSBEb2NTdGF0dXMgPSB6LmluZmVyPHR5cGVvZiBkb2NTdGF0dXNTY2hlbWE+O1xuZXhwb3J0IHR5cGUgTWV0YUZpbGUgPSB6LmluZmVyPHR5cGVvZiBtZXRhRmlsZVNjaGVtYT47XG5leHBvcnQgdHlwZSBRdWFsaXR5R2F0ZUV2YWx1YXRpb24gPSB6LmluZmVyPHR5cGVvZiBxdWFsaXR5R2F0ZUV2YWx1YXRpb25TY2hlbWE+O1xuZXhwb3J0IHR5cGUgRG9jc0luZGV4ID0gei5pbmZlcjx0eXBlb2YgZG9jc0luZGV4U2NoZW1hPjtcbiJdLCJuYW1lcyI6WyJ6IiwibWltZVR5cGVTY2hlbWEiLCJlbnVtIiwiZG9jU3RhdHVzU2NoZW1hIiwibWV0cmljc1NjaGVtYSIsIm9iamVjdCIsInBhZ2VzIiwibnVtYmVyIiwidGV4dENoYXJzIiwibWRDaGFycyIsInRleHRJdGVtcyIsInRhYmxlcyIsInRleHRDaGFyc1BlclBhZ2VBdmciLCJzdHJpY3QiLCJmYWlsZWRHYXRlU2NoZW1hIiwiY29kZSIsInN0cmluZyIsIm1lc3NhZ2UiLCJhY3R1YWwiLCJleHBlY3RlZE9wIiwiZXhwZWN0ZWQiLCJxdWFsaXR5R2F0ZUV2YWx1YXRpb25TY2hlbWEiLCJwYXNzZWQiLCJib29sZWFuIiwic2V2ZXJpdHkiLCJvcHRpb25hbCIsIm1ldHJpYyIsIm9wIiwidGhyZXNob2xkIiwibWV0YVNvdXJjZVNjaGVtYSIsIm9yaWdpbmFsRmlsZU5hbWUiLCJtaW1lVHlwZSIsInNpemVCeXRlcyIsInNoYTI1NiIsInN0b3JlZFBhdGgiLCJtZXRhUHJvY2Vzc2luZ1NjaGVtYSIsInN0YXR1cyIsInN0YWdlIiwicHJvZ3Jlc3MiLCJyZXF1ZXN0SWQiLCJzdGFydGVkQXQiLCJmaW5pc2hlZEF0IiwibnVsbGFibGUiLCJkdXJhdGlvbk1zIiwidGltZW91dFNlYyIsImV4aXRDb2RlIiwid29ya2VyIiwicHl0aG9uQmluIiwicHl0aG9uVmVyc2lvbiIsImRvY2xpbmdWZXJzaW9uIiwibWV0YU91dHB1dHNTY2hlbWEiLCJtYXJrZG93blBhdGgiLCJqc29uUGF0aCIsImJ5dGVzIiwibWFya2Rvd24iLCJqc29uIiwibWV0YVF1YWxpdHlHYXRlc1NjaGVtYSIsImNvbmZpZ1ZlcnNpb24iLCJmYWlsZWRHYXRlcyIsImFycmF5IiwiZXZhbHVhdGVkIiwibWV0YUxvZ3NTY2hlbWEiLCJzdGRvdXRUYWlsIiwic3RkZXJyVGFpbCIsIm1ldGFGaWxlU2NoZW1hIiwic2NoZW1hVmVyc2lvbiIsImlkIiwiY3JlYXRlZEF0Iiwic291cmNlIiwicHJvY2Vzc2luZyIsIm91dHB1dHMiLCJtZXRyaWNzIiwicXVhbGl0eUdhdGVzIiwibG9ncyIsImRvY01ldGFTY2hlbWEiLCJkb2NzSW5kZXhTY2hlbWEiLCJkb2NzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/_lib/schema.ts\n");

/***/ }),

/***/ "(rsc)/./app/_lib/storage.ts":
/*!*****************************!*\
  !*** ./app/_lib/storage.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureDataDirs: () => (/* binding */ ensureDataDirs),\n/* harmony export */   getDataDir: () => (/* binding */ getDataDir),\n/* harmony export */   getDocExportDir: () => (/* binding */ getDocExportDir),\n/* harmony export */   getExportsDir: () => (/* binding */ getExportsDir),\n/* harmony export */   getIndexPath: () => (/* binding */ getIndexPath),\n/* harmony export */   getJsonPath: () => (/* binding */ getJsonPath),\n/* harmony export */   getMarkdownPath: () => (/* binding */ getMarkdownPath),\n/* harmony export */   getMetaPath: () => (/* binding */ getMetaPath),\n/* harmony export */   getProgressPath: () => (/* binding */ getProgressPath),\n/* harmony export */   getUploadPath: () => (/* binding */ getUploadPath),\n/* harmony export */   getUploadsDir: () => (/* binding */ getUploadsDir),\n/* harmony export */   listDocs: () => (/* binding */ listDocs),\n/* harmony export */   readIndex: () => (/* binding */ readIndex),\n/* harmony export */   readMetaFile: () => (/* binding */ readMetaFile),\n/* harmony export */   upsertIndexDoc: () => (/* binding */ upsertIndexDoc),\n/* harmony export */   writeIndex: () => (/* binding */ writeIndex),\n/* harmony export */   writeJsonAtomic: () => (/* binding */ writeJsonAtomic)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./schema */ \"(rsc)/./app/_lib/schema.ts\");\n/**\n * @fileoverview Filesystem helpers for document storage paths and indexes.\n */ \n\n\n\n/**\n * Resolves the root data directory from env or defaults.\n */ function getDataDir() {\n    const envDir = process.env.DATA_DIR ?? \"./data\";\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().resolve(process.cwd(), envDir);\n}\n/**\n * Returns the uploads directory path.\n */ function getUploadsDir() {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDataDir(), \"uploads\");\n}\n/**\n * Returns the exports directory path.\n */ function getExportsDir() {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDataDir(), \"exports\");\n}\n/**\n * Returns the export directory for a specific document id.\n */ function getDocExportDir(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getExportsDir(), id);\n}\n/**\n * Builds the path for a stored upload by id and extension.\n */ function getUploadPath(id, extension) {\n    const safeExt = extension.startsWith(\".\") ? extension : `.${extension}`;\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getUploadsDir(), `${id}${safeExt}`);\n}\n/**\n * Returns the meta.json path for a document.\n */ function getMetaPath(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDocExportDir(id), \"meta.json\");\n}\n/**\n * Returns the progress.json path for a document.\n */ function getProgressPath(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDocExportDir(id), \"progress.json\");\n}\n/**\n * Returns the markdown output path for a document.\n */ function getMarkdownPath(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDocExportDir(id), \"output.md\");\n}\n/**\n * Returns the JSON output path for a document.\n */ function getJsonPath(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDocExportDir(id), \"output.json\");\n}\n/**\n * Returns the index.json path.\n */ function getIndexPath() {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDataDir(), \"index.json\");\n}\n/**\n * Ensures the upload and export directories exist.\n */ async function ensureDataDirs() {\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir(getUploadsDir(), {\n        recursive: true\n    });\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir(getExportsDir(), {\n        recursive: true\n    });\n}\n/**\n * Reads the docs index from disk and validates its shape.\n */ async function readIndex() {\n    const indexPath = getIndexPath();\n    try {\n        const raw = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(indexPath, \"utf-8\");\n        const parsed = _schema__WEBPACK_IMPORTED_MODULE_3__.docsIndexSchema.safeParse(JSON.parse(raw));\n        if (!parsed.success) {\n            return {\n                docs: []\n            };\n        }\n        return parsed.data;\n    } catch (error) {\n        if (error.code === \"ENOENT\") {\n            return {\n                docs: []\n            };\n        }\n        throw error;\n    }\n}\n/**\n * Writes the docs index to disk.\n */ async function writeIndex(index) {\n    await writeJsonAtomic(getIndexPath(), index);\n}\n/**\n * Inserts or updates a document entry in the index.\n */ async function upsertIndexDoc(doc) {\n    const index = await readIndex();\n    const existingIndex = index.docs.findIndex((entry)=>entry.id === doc.id);\n    if (existingIndex >= 0) {\n        index.docs[existingIndex] = doc;\n    } else {\n        index.docs.unshift(doc);\n    }\n    index.docs = index.docs.slice(0, 200);\n    await writeIndex(index);\n}\n/**\n * Returns recent documents from the index.\n */ async function listDocs(limit = 50) {\n    const index = await readIndex();\n    return index.docs.slice(0, limit);\n}\n/**\n * Reads meta.json and overlays any progress.json fields when present.\n */ async function readMetaFile(id) {\n    const raw = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(getMetaPath(id), \"utf-8\");\n    const meta = _schema__WEBPACK_IMPORTED_MODULE_3__.metaFileSchema.parse(JSON.parse(raw));\n    try {\n        // WHY: progress.json provides incremental updates before meta.json is rewritten.\n        const progressRaw = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(getProgressPath(id), \"utf-8\");\n        const progress = JSON.parse(progressRaw);\n        if (isRecord(progress)) {\n            if (typeof progress.stage === \"string\") {\n                meta.processing.stage = progress.stage;\n            }\n            if (typeof progress.progress === \"number\") {\n                meta.processing.progress = progress.progress;\n            }\n            if (typeof progress.message === \"string\") {\n                meta.processing.message = progress.message;\n            }\n            if (typeof progress.requestId === \"string\") {\n                meta.processing.requestId = progress.requestId;\n                meta.requestId = progress.requestId;\n            }\n        }\n    } catch (error) {\n        if (error.code !== \"ENOENT\") {\n            throw error;\n        }\n    }\n    return meta;\n}\n/**\n * Writes JSON atomically to avoid partial reads.\n */ async function writeJsonAtomic(filePath, value) {\n    const dir = node_path__WEBPACK_IMPORTED_MODULE_2___default().dirname(filePath);\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir(dir, {\n        recursive: true\n    });\n    const unique = `${process.pid}-${Date.now()}-${node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID()}`;\n    const tmpPath = `${filePath}.${unique}.tmp`;\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().writeFile(tmpPath, JSON.stringify(value, null, 2), \"utf-8\");\n    await renameWithRetry(tmpPath, filePath, 4, 50);\n}\nfunction isRecord(value) {\n    return Boolean(value) && typeof value === \"object\" && !Array.isArray(value);\n}\nasync function renameWithRetry(fromPath, toPath, attempts, delayMs) {\n    for(let attempt = 0; attempt < attempts; attempt += 1){\n        try {\n            await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().rename(fromPath, toPath);\n            return;\n        } catch (error) {\n            const code = error.code;\n            if (attempt < attempts - 1 && (code === \"EPERM\" || code === \"EACCES\" || code === \"EBUSY\")) {\n                // WHY: Windows can transiently lock files during rapid writes.\n                await new Promise((resolve)=>setTimeout(resolve, delayMs));\n                continue;\n            }\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cyI6WyJEOlxcUHJvZ3JhbW1pbmdcXFBsYXlncm91bmQgQUlcXFBpcGVsaW5lX09DUitFeHBvcnRfUmFwb2FydGVfUERGXFxhcHBcXF9saWJcXHN0b3JhZ2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEZpbGVzeXN0ZW0gaGVscGVycyBmb3IgZG9jdW1lbnQgc3RvcmFnZSBwYXRocyBhbmQgaW5kZXhlcy5cbiAqL1xuaW1wb3J0IGNyeXB0byBmcm9tIFwibm9kZTpjcnlwdG9cIjtcbmltcG9ydCBmcyBmcm9tIFwibm9kZTpmcy9wcm9taXNlc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiO1xuaW1wb3J0IHsgZG9jc0luZGV4U2NoZW1hLCBtZXRhRmlsZVNjaGVtYSwgdHlwZSBEb2NNZXRhLCB0eXBlIERvY3NJbmRleCwgdHlwZSBNZXRhRmlsZSB9IGZyb20gXCIuL3NjaGVtYVwiO1xuXG5leHBvcnQgdHlwZSBEb2NJbmRleEVudHJ5ID0gRG9jTWV0YTtcblxuLyoqXG4gKiBSZXNvbHZlcyB0aGUgcm9vdCBkYXRhIGRpcmVjdG9yeSBmcm9tIGVudiBvciBkZWZhdWx0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFEaXIoKTogc3RyaW5nIHtcbiAgY29uc3QgZW52RGlyID0gcHJvY2Vzcy5lbnYuREFUQV9ESVIgPz8gXCIuL2RhdGFcIjtcbiAgcmV0dXJuIHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCBlbnZEaXIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHVwbG9hZHMgZGlyZWN0b3J5IHBhdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVcGxvYWRzRGlyKCk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLmpvaW4oZ2V0RGF0YURpcigpLCBcInVwbG9hZHNcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZXhwb3J0cyBkaXJlY3RvcnkgcGF0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4cG9ydHNEaXIoKTogc3RyaW5nIHtcbiAgcmV0dXJuIHBhdGguam9pbihnZXREYXRhRGlyKCksIFwiZXhwb3J0c1wiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBleHBvcnQgZGlyZWN0b3J5IGZvciBhIHNwZWNpZmljIGRvY3VtZW50IGlkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9jRXhwb3J0RGlyKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gcGF0aC5qb2luKGdldEV4cG9ydHNEaXIoKSwgaWQpO1xufVxuXG4vKipcbiAqIEJ1aWxkcyB0aGUgcGF0aCBmb3IgYSBzdG9yZWQgdXBsb2FkIGJ5IGlkIGFuZCBleHRlbnNpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVcGxvYWRQYXRoKGlkOiBzdHJpbmcsIGV4dGVuc2lvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc2FmZUV4dCA9IGV4dGVuc2lvbi5zdGFydHNXaXRoKFwiLlwiKSA/IGV4dGVuc2lvbiA6IGAuJHtleHRlbnNpb259YDtcbiAgcmV0dXJuIHBhdGguam9pbihnZXRVcGxvYWRzRGlyKCksIGAke2lkfSR7c2FmZUV4dH1gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtZXRhLmpzb24gcGF0aCBmb3IgYSBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1ldGFQYXRoKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gcGF0aC5qb2luKGdldERvY0V4cG9ydERpcihpZCksIFwibWV0YS5qc29uXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHByb2dyZXNzLmpzb24gcGF0aCBmb3IgYSBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2dyZXNzUGF0aChpZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHBhdGguam9pbihnZXREb2NFeHBvcnREaXIoaWQpLCBcInByb2dyZXNzLmpzb25cIik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWFya2Rvd24gb3V0cHV0IHBhdGggZm9yIGEgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXJrZG93blBhdGgoaWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLmpvaW4oZ2V0RG9jRXhwb3J0RGlyKGlkKSwgXCJvdXRwdXQubWRcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgSlNPTiBvdXRwdXQgcGF0aCBmb3IgYSBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEpzb25QYXRoKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gcGF0aC5qb2luKGdldERvY0V4cG9ydERpcihpZCksIFwib3V0cHV0Lmpzb25cIik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXguanNvbiBwYXRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5kZXhQYXRoKCk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLmpvaW4oZ2V0RGF0YURpcigpLCBcImluZGV4Lmpzb25cIik7XG59XG5cbi8qKlxuICogRW5zdXJlcyB0aGUgdXBsb2FkIGFuZCBleHBvcnQgZGlyZWN0b3JpZXMgZXhpc3QuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVEYXRhRGlycygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgZnMubWtkaXIoZ2V0VXBsb2Fkc0RpcigpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgYXdhaXQgZnMubWtkaXIoZ2V0RXhwb3J0c0RpcigpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jcyBpbmRleCBmcm9tIGRpc2sgYW5kIHZhbGlkYXRlcyBpdHMgc2hhcGUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkSW5kZXgoKTogUHJvbWlzZTxEb2NzSW5kZXg+IHtcbiAgY29uc3QgaW5kZXhQYXRoID0gZ2V0SW5kZXhQYXRoKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmF3ID0gYXdhaXQgZnMucmVhZEZpbGUoaW5kZXhQYXRoLCBcInV0Zi04XCIpO1xuICAgIGNvbnN0IHBhcnNlZCA9IGRvY3NJbmRleFNjaGVtYS5zYWZlUGFyc2UoSlNPTi5wYXJzZShyYXcpKTtcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4geyBkb2NzOiBbXSB9O1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkLmRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKChlcnJvciBhcyBOb2RlSlMuRXJybm9FeGNlcHRpb24pLmNvZGUgPT09IFwiRU5PRU5UXCIpIHtcbiAgICAgIHJldHVybiB7IGRvY3M6IFtdIH07XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogV3JpdGVzIHRoZSBkb2NzIGluZGV4IHRvIGRpc2suXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3cml0ZUluZGV4KGluZGV4OiBEb2NzSW5kZXgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgd3JpdGVKc29uQXRvbWljKGdldEluZGV4UGF0aCgpLCBpbmRleCk7XG59XG5cbi8qKlxuICogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgZW50cnkgaW4gdGhlIGluZGV4LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBzZXJ0SW5kZXhEb2MoZG9jOiBEb2NJbmRleEVudHJ5KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGluZGV4ID0gYXdhaXQgcmVhZEluZGV4KCk7XG4gIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBpbmRleC5kb2NzLmZpbmRJbmRleCgoZW50cnkpID0+IGVudHJ5LmlkID09PSBkb2MuaWQpO1xuICBpZiAoZXhpc3RpbmdJbmRleCA+PSAwKSB7XG4gICAgaW5kZXguZG9jc1tleGlzdGluZ0luZGV4XSA9IGRvYztcbiAgfSBlbHNlIHtcbiAgICBpbmRleC5kb2NzLnVuc2hpZnQoZG9jKTtcbiAgfVxuICBpbmRleC5kb2NzID0gaW5kZXguZG9jcy5zbGljZSgwLCAyMDApO1xuICBhd2FpdCB3cml0ZUluZGV4KGluZGV4KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHJlY2VudCBkb2N1bWVudHMgZnJvbSB0aGUgaW5kZXguXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0RG9jcyhsaW1pdCA9IDUwKTogUHJvbWlzZTxEb2NJbmRleEVudHJ5W10+IHtcbiAgY29uc3QgaW5kZXggPSBhd2FpdCByZWFkSW5kZXgoKTtcbiAgcmV0dXJuIGluZGV4LmRvY3Muc2xpY2UoMCwgbGltaXQpO1xufVxuXG4vKipcbiAqIFJlYWRzIG1ldGEuanNvbiBhbmQgb3ZlcmxheXMgYW55IHByb2dyZXNzLmpzb24gZmllbGRzIHdoZW4gcHJlc2VudC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRNZXRhRmlsZShpZDogc3RyaW5nKTogUHJvbWlzZTxNZXRhRmlsZT4ge1xuICBjb25zdCByYXcgPSBhd2FpdCBmcy5yZWFkRmlsZShnZXRNZXRhUGF0aChpZCksIFwidXRmLThcIik7XG4gIGNvbnN0IG1ldGEgPSBtZXRhRmlsZVNjaGVtYS5wYXJzZShKU09OLnBhcnNlKHJhdykpO1xuICB0cnkge1xuICAgIC8vIFdIWTogcHJvZ3Jlc3MuanNvbiBwcm92aWRlcyBpbmNyZW1lbnRhbCB1cGRhdGVzIGJlZm9yZSBtZXRhLmpzb24gaXMgcmV3cml0dGVuLlxuICAgIGNvbnN0IHByb2dyZXNzUmF3ID0gYXdhaXQgZnMucmVhZEZpbGUoZ2V0UHJvZ3Jlc3NQYXRoKGlkKSwgXCJ1dGYtOFwiKTtcbiAgICBjb25zdCBwcm9ncmVzcyA9IEpTT04ucGFyc2UocHJvZ3Jlc3NSYXcpO1xuICAgIGlmIChpc1JlY29yZChwcm9ncmVzcykpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvZ3Jlc3Muc3RhZ2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbWV0YS5wcm9jZXNzaW5nLnN0YWdlID0gcHJvZ3Jlc3Muc3RhZ2U7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHByb2dyZXNzLnByb2dyZXNzID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIG1ldGEucHJvY2Vzc2luZy5wcm9ncmVzcyA9IHByb2dyZXNzLnByb2dyZXNzO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBwcm9ncmVzcy5tZXNzYWdlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG1ldGEucHJvY2Vzc2luZy5tZXNzYWdlID0gcHJvZ3Jlc3MubWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcHJvZ3Jlc3MucmVxdWVzdElkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG1ldGEucHJvY2Vzc2luZy5yZXF1ZXN0SWQgPSBwcm9ncmVzcy5yZXF1ZXN0SWQ7XG4gICAgICAgIG1ldGEucmVxdWVzdElkID0gcHJvZ3Jlc3MucmVxdWVzdElkO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoKGVycm9yIGFzIE5vZGVKUy5FcnJub0V4Y2VwdGlvbikuY29kZSAhPT0gXCJFTk9FTlRcIikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIHJldHVybiBtZXRhO1xufVxuXG4vKipcbiAqIFdyaXRlcyBKU09OIGF0b21pY2FsbHkgdG8gYXZvaWQgcGFydGlhbCByZWFkcy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlSnNvbkF0b21pYyhmaWxlUGF0aDogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBkaXIgPSBwYXRoLmRpcm5hbWUoZmlsZVBhdGgpO1xuICBhd2FpdCBmcy5ta2RpcihkaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICBjb25zdCB1bmlxdWUgPSBgJHtwcm9jZXNzLnBpZH0tJHtEYXRlLm5vdygpfS0ke2NyeXB0by5yYW5kb21VVUlEKCl9YDtcbiAgY29uc3QgdG1wUGF0aCA9IGAke2ZpbGVQYXRofS4ke3VuaXF1ZX0udG1wYDtcbiAgYXdhaXQgZnMud3JpdGVGaWxlKHRtcFBhdGgsIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCAyKSwgXCJ1dGYtOFwiKTtcbiAgYXdhaXQgcmVuYW1lV2l0aFJldHJ5KHRtcFBhdGgsIGZpbGVQYXRoLCA0LCA1MCk7XG59XG5cbmZ1bmN0aW9uIGlzUmVjb3JkKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICByZXR1cm4gQm9vbGVhbih2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVuYW1lV2l0aFJldHJ5KFxuICBmcm9tUGF0aDogc3RyaW5nLFxuICB0b1BhdGg6IHN0cmluZyxcbiAgYXR0ZW1wdHM6IG51bWJlcixcbiAgZGVsYXlNczogbnVtYmVyXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBhdHRlbXB0czsgYXR0ZW1wdCArPSAxKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZzLnJlbmFtZShmcm9tUGF0aCwgdG9QYXRoKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgY29kZSA9IChlcnJvciBhcyBOb2RlSlMuRXJybm9FeGNlcHRpb24pLmNvZGU7XG4gICAgICBpZiAoYXR0ZW1wdCA8IGF0dGVtcHRzIC0gMSAmJiAoY29kZSA9PT0gXCJFUEVSTVwiIHx8IGNvZGUgPT09IFwiRUFDQ0VTXCIgfHwgY29kZSA9PT0gXCJFQlVTWVwiKSkge1xuICAgICAgICAvLyBXSFk6IFdpbmRvd3MgY2FuIHRyYW5zaWVudGx5IGxvY2sgZmlsZXMgZHVyaW5nIHJhcGlkIHdyaXRlcy5cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXlNcykpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyeXB0byIsImZzIiwicGF0aCIsImRvY3NJbmRleFNjaGVtYSIsIm1ldGFGaWxlU2NoZW1hIiwiZ2V0RGF0YURpciIsImVudkRpciIsInByb2Nlc3MiLCJlbnYiLCJEQVRBX0RJUiIsInJlc29sdmUiLCJjd2QiLCJnZXRVcGxvYWRzRGlyIiwiam9pbiIsImdldEV4cG9ydHNEaXIiLCJnZXREb2NFeHBvcnREaXIiLCJpZCIsImdldFVwbG9hZFBhdGgiLCJleHRlbnNpb24iLCJzYWZlRXh0Iiwic3RhcnRzV2l0aCIsImdldE1ldGFQYXRoIiwiZ2V0UHJvZ3Jlc3NQYXRoIiwiZ2V0TWFya2Rvd25QYXRoIiwiZ2V0SnNvblBhdGgiLCJnZXRJbmRleFBhdGgiLCJlbnN1cmVEYXRhRGlycyIsIm1rZGlyIiwicmVjdXJzaXZlIiwicmVhZEluZGV4IiwiaW5kZXhQYXRoIiwicmF3IiwicmVhZEZpbGUiLCJwYXJzZWQiLCJzYWZlUGFyc2UiLCJKU09OIiwicGFyc2UiLCJzdWNjZXNzIiwiZG9jcyIsImRhdGEiLCJlcnJvciIsImNvZGUiLCJ3cml0ZUluZGV4IiwiaW5kZXgiLCJ3cml0ZUpzb25BdG9taWMiLCJ1cHNlcnRJbmRleERvYyIsImRvYyIsImV4aXN0aW5nSW5kZXgiLCJmaW5kSW5kZXgiLCJlbnRyeSIsInVuc2hpZnQiLCJzbGljZSIsImxpc3REb2NzIiwibGltaXQiLCJyZWFkTWV0YUZpbGUiLCJtZXRhIiwicHJvZ3Jlc3NSYXciLCJwcm9ncmVzcyIsImlzUmVjb3JkIiwic3RhZ2UiLCJwcm9jZXNzaW5nIiwibWVzc2FnZSIsInJlcXVlc3RJZCIsImZpbGVQYXRoIiwidmFsdWUiLCJkaXIiLCJkaXJuYW1lIiwidW5pcXVlIiwicGlkIiwiRGF0ZSIsIm5vdyIsInJhbmRvbVVVSUQiLCJ0bXBQYXRoIiwid3JpdGVGaWxlIiwic3RyaW5naWZ5IiwicmVuYW1lV2l0aFJldHJ5IiwiQm9vbGVhbiIsIkFycmF5IiwiaXNBcnJheSIsImZyb21QYXRoIiwidG9QYXRoIiwiYXR0ZW1wdHMiLCJkZWxheU1zIiwiYXR0ZW1wdCIsInJlbmFtZSIsIlByb21pc2UiLCJzZXRUaW1lb3V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/_lib/storage.ts\n");

/***/ }),

/***/ "(rsc)/./app/_lib/utils.ts":
/*!***************************!*\
  !*** ./app/_lib/utils.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateDocId: () => (/* binding */ generateDocId),\n/* harmony export */   getFileExtension: () => (/* binding */ getFileExtension)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * @fileoverview Small utility helpers for document ids and filenames.\n */ \n\n/**\n * Generates a unique document id with a stable prefix.\n */ function generateDocId() {\n    return `doc_${node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID().replace(/-/g, \"\")}`;\n}\n/**\n * Returns the lowercase extension for a file name.\n */ function getFileExtension(fileName) {\n    return node_path__WEBPACK_IMPORTED_MODULE_1___default().extname(fileName).toLowerCase();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvX2xpYi91dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Q0FFQyxHQUNnQztBQUNKO0FBRTdCOztDQUVDLEdBQ00sU0FBU0U7SUFDZCxPQUFPLENBQUMsSUFBSSxFQUFFRiw2REFBaUIsR0FBR0ksT0FBTyxDQUFDLE1BQU0sS0FBSztBQUN2RDtBQUVBOztDQUVDLEdBQ00sU0FBU0MsaUJBQWlCQyxRQUFnQjtJQUMvQyxPQUFPTCx3REFBWSxDQUFDSyxVQUFVRSxXQUFXO0FBQzNDIiwic291cmNlcyI6WyJEOlxcUHJvZ3JhbW1pbmdcXFBsYXlncm91bmQgQUlcXFBpcGVsaW5lX09DUitFeHBvcnRfUmFwb2FydGVfUERGXFxhcHBcXF9saWJcXHV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVvdmVydmlldyBTbWFsbCB1dGlsaXR5IGhlbHBlcnMgZm9yIGRvY3VtZW50IGlkcyBhbmQgZmlsZW5hbWVzLlxuICovXG5pbXBvcnQgY3J5cHRvIGZyb20gXCJub2RlOmNyeXB0b1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHVuaXF1ZSBkb2N1bWVudCBpZCB3aXRoIGEgc3RhYmxlIHByZWZpeC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlRG9jSWQoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBkb2NfJHtjcnlwdG8ucmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgXCJcIil9YDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsb3dlcmNhc2UgZXh0ZW5zaW9uIGZvciBhIGZpbGUgbmFtZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVFeHRlbnNpb24oZmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLmV4dG5hbWUoZmlsZU5hbWUpLnRvTG93ZXJDYXNlKCk7XG59XG4iXSwibmFtZXMiOlsiY3J5cHRvIiwicGF0aCIsImdlbmVyYXRlRG9jSWQiLCJyYW5kb21VVUlEIiwicmVwbGFjZSIsImdldEZpbGVFeHRlbnNpb24iLCJmaWxlTmFtZSIsImV4dG5hbWUiLCJ0b0xvd2VyQ2FzZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/_lib/utils.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/docs/upload/route.ts":
/*!**************************************!*\
  !*** ./app/api/docs/upload/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../_lib/config */ \"(rsc)/./app/_lib/config.ts\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../_lib/env */ \"(rsc)/./app/_lib/env.ts\");\n/* harmony import */ var _lib_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../_lib/storage */ \"(rsc)/./app/_lib/storage.ts\");\n/* harmony import */ var _lib_processRunner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../_lib/processRunner */ \"(rsc)/./app/_lib/processRunner.ts\");\n/* harmony import */ var _lib_meta__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../_lib/meta */ \"(rsc)/./app/_lib/meta.ts\");\n/* harmony import */ var _lib_schema__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../_lib/schema */ \"(rsc)/./app/_lib/schema.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../_lib/utils */ \"(rsc)/./app/_lib/utils.ts\");\n/**\n * @fileoverview Upload endpoint that spawns the Docling worker and tracks progress.\n */ \n\n\n\n\n\n\n\n\n\nconst runtime = \"nodejs\";\n/**\n * Accepts an upload, validates gates, and kicks off worker processing.\n */ async function POST(req) {\n    const requestId = node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID();\n    const missingEnv = (0,_lib_env__WEBPACK_IMPORTED_MODULE_4__.getMissingEnv)();\n    if (missingEnv.length > 0) {\n        return jsonError({\n            status: 500,\n            stage: \"SETUP\",\n            message: \"Setup required.\",\n            requestId,\n            code: \"MISSING_ENV\",\n            missingEnv\n        });\n    }\n    let config;\n    try {\n        config = await (0,_lib_config__WEBPACK_IMPORTED_MODULE_3__.loadQualityGatesConfig)();\n    } catch (error) {\n        return jsonError({\n            status: 500,\n            stage: \"CONFIG\",\n            message: error.message || \"Failed to load quality gate config.\",\n            requestId\n        });\n    }\n    let formData;\n    try {\n        formData = await req.formData();\n    } catch (error) {\n        return jsonError({\n            status: 400,\n            stage: \"UPLOAD\",\n            message: \"Unable to read the upload form payload.\",\n            requestId\n        });\n    }\n    const file = formData.get(\"file\");\n    if (!isFileLike(file)) {\n        return jsonError({\n            status: 400,\n            stage: \"VALIDATION\",\n            message: \"Missing file upload.\",\n            requestId\n        });\n    }\n    const mimeType = file.type;\n    const extension = resolveExtension((0,_lib_utils__WEBPACK_IMPORTED_MODULE_9__.getFileExtension)(file.name), mimeType);\n    if (!config.accept.mimeTypes.includes(mimeType)) {\n        return jsonError({\n            status: 400,\n            stage: \"VALIDATION\",\n            message: \"Unsupported mime type.\",\n            requestId\n        });\n    }\n    if (!extension || !config.accept.extensions.includes(extension)) {\n        return jsonError({\n            status: 400,\n            stage: \"VALIDATION\",\n            message: \"Unsupported file extension.\",\n            requestId\n        });\n    }\n    const maxBytes = config.limits.maxFileSizeMb * 1024 * 1024;\n    if (file.size > maxBytes) {\n        return jsonError({\n            status: 413,\n            stage: \"VALIDATION\",\n            message: \"File exceeds max size.\",\n            requestId\n        });\n    }\n    const id = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_9__.generateDocId)();\n    const startedAt = new Date();\n    await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.ensureDataDirs)();\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir((0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.getDocExportDir)(id), {\n        recursive: true\n    });\n    const uploadPath = (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.getUploadPath)(id, extension);\n    const metaPath = (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.getMetaPath)(id);\n    const progressPath = (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.getProgressPath)(id);\n    const timeoutSec = config.limits.processTimeoutSec;\n    let meta = buildPendingMeta({\n        id,\n        file,\n        mimeType,\n        uploadPath,\n        sha256: \"\",\n        configVersion: config.version,\n        strict: config.strict,\n        timeoutSec,\n        startedAt,\n        requestId\n    });\n    await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.writeJsonAtomic)(metaPath, meta);\n    await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.upsertIndexDoc)((0,_lib_meta__WEBPACK_IMPORTED_MODULE_7__.toDocMeta)(meta));\n    let buffer;\n    try {\n        buffer = Buffer.from(await file.arrayBuffer());\n    } catch (error) {\n        meta = applyFailure(meta, {\n            stage: \"UPLOAD\",\n            message: \"Failed to read the uploaded file.\",\n            finishedAt: new Date(),\n            exitCode: -1,\n            stderrTail: String(error)\n        });\n        await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.writeJsonAtomic)(metaPath, meta);\n        await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.upsertIndexDoc)((0,_lib_meta__WEBPACK_IMPORTED_MODULE_7__.toDocMeta)(meta));\n        return jsonError({\n            status: 500,\n            stage: \"UPLOAD\",\n            message: \"Failed to read the uploaded file.\",\n            requestId,\n            docId: id\n        });\n    }\n    try {\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().writeFile(uploadPath, buffer);\n    } catch (error) {\n        meta = applyFailure(meta, {\n            stage: \"UPLOAD\",\n            message: \"Failed to store the uploaded file.\",\n            finishedAt: new Date(),\n            exitCode: -1,\n            stderrTail: String(error)\n        });\n        await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.writeJsonAtomic)(metaPath, meta);\n        await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.upsertIndexDoc)((0,_lib_meta__WEBPACK_IMPORTED_MODULE_7__.toDocMeta)(meta));\n        return jsonError({\n            status: 500,\n            stage: \"UPLOAD\",\n            message: \"Failed to store the uploaded file.\",\n            requestId,\n            docId: id\n        });\n    }\n    const sha256 = node_crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(\"sha256\").update(buffer).digest(\"hex\");\n    meta = applySource(meta, {\n        file,\n        mimeType,\n        uploadPath,\n        sha256\n    });\n    meta.processing = {\n        ...meta.processing,\n        stage: \"SPAWN\",\n        progress: 5,\n        message: \"Starting worker.\",\n        requestId\n    };\n    await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.writeJsonAtomic)(metaPath, meta);\n    await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.upsertIndexDoc)((0,_lib_meta__WEBPACK_IMPORTED_MODULE_7__.toDocMeta)(meta));\n    const pythonBin = process.env.PYTHON_BIN ?? \"\";\n    const workerPath = process.env.DOCLING_WORKER ?? \"\";\n    const progressState = {\n        stage: \"SPAWN\",\n        progress: 5,\n        message: \"Starting worker.\"\n    };\n    // WHY: Serialize progress/meta writes to avoid overlapping file operations.\n    let writeQueue = Promise.resolve();\n    let allowProgressWrites = true;\n    const scheduleProgressWrite = async ()=>{\n        writeQueue = writeQueue.then(async ()=>{\n            if (!allowProgressWrites) {\n                return;\n            }\n            await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.writeJsonAtomic)(progressPath, {\n                stage: progressState.stage,\n                message: progressState.message,\n                progress: progressState.progress,\n                requestId,\n                updatedAt: new Date().toISOString()\n            });\n        }).catch(()=>undefined);\n        return writeQueue;\n    };\n    const scheduleFinalWrite = async (nextMeta)=>{\n        writeQueue = writeQueue.then(()=>(0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.writeJsonAtomic)(metaPath, nextMeta)).catch(()=>undefined);\n        return writeQueue;\n    };\n    const handleProgressLine = (line)=>{\n        const update = parseProgressLine(line);\n        if (!update) {\n            return;\n        }\n        meta = applyProgress(meta, update, progressState);\n        const stageValue = (update.stage ?? \"\").toUpperCase();\n        if (stageValue === \"DONE\" || stageValue === \"FAILED\") {\n            allowProgressWrites = false;\n            return;\n        }\n        void scheduleProgressWrite();\n    };\n    void (0,_lib_processRunner__WEBPACK_IMPORTED_MODULE_6__.runProcess)({\n        command: pythonBin,\n        args: [\n            workerPath,\n            \"--input\",\n            uploadPath,\n            \"--doc-id\",\n            id,\n            \"--data-dir\",\n            (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.getDataDir)(),\n            \"--gates\",\n            (0,_lib_config__WEBPACK_IMPORTED_MODULE_3__.getGatesConfigPath)()\n        ],\n        timeoutMs: timeoutSec * 1000,\n        stdoutTailBytes: config.limits.stdoutTailKb * 1024,\n        stderrTailBytes: config.limits.stderrTailKb * 1024,\n        onStdoutLine: handleProgressLine\n    }).then(async (result)=>{\n        allowProgressWrites = false;\n        meta = await finalizeMeta({\n            meta,\n            metaPath,\n            file,\n            mimeType,\n            uploadPath,\n            sha256,\n            requestId,\n            result,\n            startedAt,\n            timeoutSec,\n            progressState\n        });\n        await scheduleFinalWrite(meta);\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().rm(progressPath, {\n            force: true\n        });\n        await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.upsertIndexDoc)((0,_lib_meta__WEBPACK_IMPORTED_MODULE_7__.toDocMeta)(meta));\n    }).catch(async (error)=>{\n        allowProgressWrites = false;\n        meta = applyFailure(meta, {\n            stage: \"SPAWN\",\n            message: \"Failed to start the processing worker.\",\n            finishedAt: new Date(),\n            exitCode: -1,\n            stderrTail: String(error)\n        });\n        await scheduleFinalWrite(meta);\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().rm(progressPath, {\n            force: true\n        });\n        await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_5__.upsertIndexDoc)((0,_lib_meta__WEBPACK_IMPORTED_MODULE_7__.toDocMeta)(meta));\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n        id,\n        originalFileName: file.name,\n        status: \"PENDING\",\n        requestId,\n        stage: meta.processing.stage ?? \"SPAWN\",\n        progress: meta.processing.progress ?? 0\n    }, {\n        status: 202\n    });\n}\nfunction jsonError(options) {\n    const { status, stage, message, requestId, code, missingEnv, docId } = options;\n    return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n        error: {\n            message,\n            stage,\n            requestId,\n            code\n        },\n        requestId,\n        docId,\n        missingEnv\n    }, {\n        status\n    });\n}\nfunction buildPendingMeta(options) {\n    const startedAt = options.startedAt.toISOString();\n    return {\n        schemaVersion: 1,\n        id: options.id,\n        requestId: options.requestId,\n        createdAt: startedAt,\n        source: {\n            originalFileName: options.file.name,\n            mimeType: options.mimeType,\n            sizeBytes: options.file.size,\n            sha256: options.sha256,\n            storedPath: options.uploadPath\n        },\n        processing: {\n            status: \"PENDING\",\n            stage: \"UPLOAD\",\n            progress: 0,\n            message: \"Receiving upload.\",\n            requestId: options.requestId,\n            startedAt,\n            finishedAt: null,\n            durationMs: 0,\n            timeoutSec: options.timeoutSec,\n            exitCode: 0,\n            worker: {\n                pythonBin: process.env.PYTHON_BIN ?? \"UNKNOWN\",\n                pythonVersion: \"UNKNOWN\",\n                doclingVersion: \"UNKNOWN\"\n            }\n        },\n        outputs: {\n            markdownPath: null,\n            jsonPath: null,\n            bytes: {\n                markdown: 0,\n                json: 0\n            }\n        },\n        metrics: {\n            pages: 0,\n            textChars: 0,\n            mdChars: 0,\n            textItems: 0,\n            tables: 0,\n            textCharsPerPageAvg: 0\n        },\n        qualityGates: {\n            configVersion: options.configVersion,\n            strict: options.strict,\n            passed: false,\n            failedGates: [],\n            evaluated: []\n        },\n        logs: {\n            stdoutTail: \"\",\n            stderrTail: \"\"\n        }\n    };\n}\nfunction applySource(meta, options) {\n    return {\n        ...meta,\n        source: {\n            ...meta.source,\n            originalFileName: options.file.name,\n            mimeType: options.mimeType,\n            sizeBytes: options.file.size,\n            sha256: options.sha256,\n            storedPath: options.uploadPath\n        }\n    };\n}\nfunction applyFailure(meta, options) {\n    const startedAt = resolveStartedAt(meta, options.finishedAt);\n    const processing = {\n        ...meta.processing,\n        status: \"FAILED\",\n        stage: options.stage,\n        message: options.message,\n        exitCode: options.exitCode,\n        finishedAt: options.finishedAt.toISOString(),\n        durationMs: options.finishedAt.getTime() - startedAt.getTime()\n    };\n    return {\n        ...meta,\n        processing,\n        outputs: {\n            markdownPath: null,\n            jsonPath: null,\n            bytes: {\n                markdown: 0,\n                json: 0\n            }\n        },\n        qualityGates: {\n            ...meta.qualityGates,\n            passed: false\n        },\n        logs: {\n            stdoutTail: options.stdoutTail ?? \"\",\n            stderrTail: options.stderrTail ?? \"\"\n        }\n    };\n}\nfunction applyProgress(meta, update, progressState) {\n    const processing = {\n        ...meta.processing\n    };\n    if (update.stage) {\n        processing.stage = update.stage;\n        progressState.stage = update.stage;\n    }\n    if (typeof update.progress === \"number\") {\n        const clamped = clampProgress(update.progress);\n        processing.progress = clamped;\n        progressState.progress = clamped;\n    }\n    if (update.message) {\n        processing.message = update.message;\n        progressState.message = update.message;\n    }\n    return {\n        ...meta,\n        processing\n    };\n}\nfunction parseProgressLine(line) {\n    const trimmed = line.trim();\n    if (!trimmed.startsWith(\"{\")) {\n        return null;\n    }\n    try {\n        const parsed = JSON.parse(trimmed);\n        if (!isRecord(parsed)) {\n            return null;\n        }\n        const event = parsed.event ?? parsed.type;\n        if (event !== \"progress\") {\n            return null;\n        }\n        const stage = typeof parsed.stage === \"string\" ? parsed.stage : undefined;\n        const message = typeof parsed.message === \"string\" ? parsed.message : undefined;\n        const progress = typeof parsed.progress === \"number\" ? parsed.progress : undefined;\n        if (!stage && !message && typeof progress !== \"number\") {\n            return null;\n        }\n        return {\n            stage,\n            message,\n            progress\n        };\n    } catch (error) {\n        return null;\n    }\n}\nfunction clampProgress(value) {\n    if (!Number.isFinite(value)) {\n        return 0;\n    }\n    return Math.max(0, Math.min(100, Math.round(value)));\n}\nfunction isFileLike(value) {\n    if (!value || typeof value !== \"object\") {\n        return false;\n    }\n    const candidate = value;\n    return typeof candidate.arrayBuffer === \"function\" && typeof candidate.name === \"string\" && typeof candidate.type === \"string\";\n}\nfunction isRecord(value) {\n    return Boolean(value) && typeof value === \"object\" && !Array.isArray(value);\n}\nfunction resolveExtension(extension, mimeType) {\n    if (extension) {\n        return extension;\n    }\n    if (mimeType === \"application/pdf\") {\n        return \".pdf\";\n    }\n    if (mimeType === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\") {\n        return \".docx\";\n    }\n    return \"\";\n}\nfunction resolveStartedAt(meta, fallback) {\n    const startedAt = meta.processing.startedAt;\n    if (typeof startedAt === \"string\") {\n        const parsed = new Date(startedAt);\n        if (!Number.isNaN(parsed.getTime())) {\n            return parsed;\n        }\n    }\n    return fallback;\n}\nasync function finalizeMeta(options) {\n    const { metaPath, file, mimeType, uploadPath, sha256, requestId, result, startedAt, timeoutSec, progressState } = options;\n    const finishedAt = new Date();\n    let meta = options.meta;\n    // WHY: Grab a fresh meta snapshot in case progress writes updated the file.\n    const snapshot = await readMetaSnapshot(metaPath, 3, 50);\n    if (snapshot) {\n        meta = snapshot;\n    }\n    meta = applySource(meta, {\n        file,\n        mimeType,\n        uploadPath,\n        sha256\n    });\n    meta.requestId = requestId;\n    const processing = {\n        ...meta.processing\n    };\n    const started = resolveStartedAt(meta, startedAt);\n    processing.startedAt = processing.startedAt ?? started.toISOString();\n    processing.finishedAt = finishedAt.toISOString();\n    processing.durationMs = finishedAt.getTime() - started.getTime();\n    processing.timeoutSec = timeoutSec;\n    processing.exitCode = result.exitCode;\n    processing.requestId = requestId;\n    if (result.timedOut) {\n        processing.status = \"FAILED\";\n        processing.stage = \"TIMEOUT\";\n        processing.message = `Worker timed out after ${timeoutSec}s.`;\n    } else if (result.exitCode !== 0) {\n        processing.status = \"FAILED\";\n        processing.stage = processing.stage ?? \"PROCESS\";\n        processing.message = processing.message ?? `Worker exited with code ${result.exitCode}.`;\n    } else if (processing.status === \"PENDING\") {\n        processing.status = \"SUCCESS\";\n    }\n    const hasOutputs = Boolean(meta.outputs.markdownPath) && Boolean(meta.outputs.jsonPath);\n    if (processing.status === \"SUCCESS\" && !hasOutputs) {\n        processing.status = \"FAILED\";\n        processing.stage = \"FAILED\";\n        processing.message = \"Worker did not produce outputs.\";\n    }\n    if (processing.status === \"SUCCESS\") {\n        processing.stage = processing.stage ?? \"DONE\";\n        processing.message = processing.message ?? \"Processing complete.\";\n        processing.progress = 100;\n    } else if (processing.status === \"FAILED\") {\n        processing.stage = processing.stage ?? \"FAILED\";\n        if (!processing.message) {\n            processing.message = result.exitCode === 0 && !result.timedOut ? \"Quality gates failed.\" : \"Processing failed.\";\n        }\n        if (typeof processing.progress !== \"number\") {\n            processing.progress = progressState.progress;\n        }\n    }\n    if (!processing.stage) {\n        processing.stage = progressState.stage;\n    }\n    if (!processing.message) {\n        processing.message = progressState.message;\n    }\n    if (typeof processing.progress !== \"number\") {\n        processing.progress = progressState.progress;\n    }\n    const nextMeta = {\n        ...meta,\n        processing,\n        logs: {\n            stdoutTail: result.stdoutTail,\n            stderrTail: result.stderrTail\n        }\n    };\n    if (processing.status !== \"SUCCESS\") {\n        nextMeta.outputs = {\n            markdownPath: null,\n            jsonPath: null,\n            bytes: {\n                markdown: 0,\n                json: 0\n            }\n        };\n        nextMeta.qualityGates = {\n            ...nextMeta.qualityGates,\n            passed: false\n        };\n    }\n    return nextMeta;\n}\nasync function readMetaSnapshot(metaPath, attempts, delayMs) {\n    for(let attempt = 0; attempt < attempts; attempt += 1){\n        try {\n            const raw = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(metaPath, \"utf-8\");\n            return parseMetaSnapshot(raw);\n        } catch (error) {\n            if (attempt < attempts - 1) {\n                await new Promise((resolve)=>setTimeout(resolve, delayMs));\n            }\n        }\n    }\n    return null;\n}\nfunction parseMetaSnapshot(raw) {\n    const parsed = JSON.parse(raw);\n    return _lib_schema__WEBPACK_IMPORTED_MODULE_8__.metaFileSchema.parse(parsed);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxVQUFVO2dCQUFHaEIsTUFBTTtZQUFFO1FBQ2hDO1FBQ0FuQixTQUFTMkMsWUFBWSxHQUFHO1lBQ3RCLEdBQUczQyxTQUFTMkMsWUFBWTtZQUN4QkMsUUFBUTtRQUNWO0lBQ0Y7SUFFQSxPQUFPNUM7QUFDVDtBQUVBLGVBQWUyRSxpQkFDYnhILFFBQWdCLEVBQ2hCNEgsUUFBZ0IsRUFDaEJDLE9BQWU7SUFFZixJQUFLLElBQUlDLFVBQVUsR0FBR0EsVUFBVUYsVUFBVUUsV0FBVyxFQUFHO1FBQ3RELElBQUk7WUFDRixNQUFNQyxNQUFNLE1BQU10TCxnRUFBVyxDQUFDdUQsVUFBVTtZQUN4QyxPQUFPaUksa0JBQWtCRjtRQUMzQixFQUFFLE9BQU92SixPQUFPO1lBQ2QsSUFBSXNKLFVBQVVGLFdBQVcsR0FBRztnQkFDMUIsTUFBTSxJQUFJekYsUUFBUSxDQUFDQyxVQUFZOEYsV0FBVzlGLFNBQVN5RjtZQUNyRDtRQUNGO0lBQ0Y7SUFDQSxPQUFPO0FBQ1Q7QUFFQSxTQUFTSSxrQkFBa0JGLEdBQVc7SUFDcEMsTUFBTTFCLFNBQVNDLEtBQUtDLEtBQUssQ0FBQ3dCO0lBQzFCLE9BQU92Syx1REFBY0EsQ0FBQytJLEtBQUssQ0FBQ0Y7QUFDOUIiLCJzb3VyY2VzIjpbIkQ6XFxQcm9ncmFtbWluZ1xcUGxheWdyb3VuZCBBSVxcUGlwZWxpbmVfT0NSK0V4cG9ydF9SYXBvYXJ0ZV9QREZcXGFwcFxcYXBpXFxkb2NzXFx1cGxvYWRcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVvdmVydmlldyBVcGxvYWQgZW5kcG9pbnQgdGhhdCBzcGF3bnMgdGhlIERvY2xpbmcgd29ya2VyIGFuZCB0cmFja3MgcHJvZ3Jlc3MuXG4gKi9cbmltcG9ydCBjcnlwdG8gZnJvbSBcIm5vZGU6Y3J5cHRvXCI7XG5pbXBvcnQgZnMgZnJvbSBcIm5vZGU6ZnMvcHJvbWlzZXNcIjtcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgZ2V0R2F0ZXNDb25maWdQYXRoLCBsb2FkUXVhbGl0eUdhdGVzQ29uZmlnLCB0eXBlIFF1YWxpdHlHYXRlc0NvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9fbGliL2NvbmZpZ1wiO1xuaW1wb3J0IHsgZ2V0TWlzc2luZ0VudiB9IGZyb20gXCIuLi8uLi8uLi9fbGliL2VudlwiO1xuaW1wb3J0IHtcbiAgZW5zdXJlRGF0YURpcnMsXG4gIGdldERhdGFEaXIsXG4gIGdldERvY0V4cG9ydERpcixcbiAgZ2V0TWV0YVBhdGgsXG4gIGdldFByb2dyZXNzUGF0aCxcbiAgZ2V0VXBsb2FkUGF0aCxcbiAgdXBzZXJ0SW5kZXhEb2MsXG4gIHdyaXRlSnNvbkF0b21pY1xufSBmcm9tIFwiLi4vLi4vLi4vX2xpYi9zdG9yYWdlXCI7XG5pbXBvcnQgeyBydW5Qcm9jZXNzLCB0eXBlIFByb2Nlc3NSZXN1bHQgfSBmcm9tIFwiLi4vLi4vLi4vX2xpYi9wcm9jZXNzUnVubmVyXCI7XG5pbXBvcnQgeyB0b0RvY01ldGEgfSBmcm9tIFwiLi4vLi4vLi4vX2xpYi9tZXRhXCI7XG5pbXBvcnQgeyBtZXRhRmlsZVNjaGVtYSwgdHlwZSBEb2NTdGF0dXMsIHR5cGUgTWV0YUZpbGUgfSBmcm9tIFwiLi4vLi4vLi4vX2xpYi9zY2hlbWFcIjtcbmltcG9ydCB7IGdlbmVyYXRlRG9jSWQsIGdldEZpbGVFeHRlbnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vX2xpYi91dGlsc1wiO1xuXG5leHBvcnQgY29uc3QgcnVudGltZSA9IFwibm9kZWpzXCI7XG5cbi8qKlxuICogQWNjZXB0cyBhbiB1cGxvYWQsIHZhbGlkYXRlcyBnYXRlcywgYW5kIGtpY2tzIG9mZiB3b3JrZXIgcHJvY2Vzc2luZy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIGNvbnN0IHJlcXVlc3RJZCA9IGNyeXB0by5yYW5kb21VVUlEKCk7XG4gIGNvbnN0IG1pc3NpbmdFbnYgPSBnZXRNaXNzaW5nRW52KCk7XG4gIGlmIChtaXNzaW5nRW52Lmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4ganNvbkVycm9yKHtcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgc3RhZ2U6IFwiU0VUVVBcIixcbiAgICAgIG1lc3NhZ2U6IFwiU2V0dXAgcmVxdWlyZWQuXCIsXG4gICAgICByZXF1ZXN0SWQsXG4gICAgICBjb2RlOiBcIk1JU1NJTkdfRU5WXCIsXG4gICAgICBtaXNzaW5nRW52XG4gICAgfSk7XG4gIH1cblxuICBsZXQgY29uZmlnOiBRdWFsaXR5R2F0ZXNDb25maWc7XG4gIHRyeSB7XG4gICAgY29uZmlnID0gYXdhaXQgbG9hZFF1YWxpdHlHYXRlc0NvbmZpZygpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBqc29uRXJyb3Ioe1xuICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICBzdGFnZTogXCJDT05GSUdcIixcbiAgICAgIG1lc3NhZ2U6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB8fCBcIkZhaWxlZCB0byBsb2FkIHF1YWxpdHkgZ2F0ZSBjb25maWcuXCIsXG4gICAgICByZXF1ZXN0SWRcbiAgICB9KTtcbiAgfVxuXG4gIGxldCBmb3JtRGF0YTogRm9ybURhdGE7XG4gIHRyeSB7XG4gICAgZm9ybURhdGEgPSBhd2FpdCByZXEuZm9ybURhdGEoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ganNvbkVycm9yKHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgc3RhZ2U6IFwiVVBMT0FEXCIsXG4gICAgICBtZXNzYWdlOiBcIlVuYWJsZSB0byByZWFkIHRoZSB1cGxvYWQgZm9ybSBwYXlsb2FkLlwiLFxuICAgICAgcmVxdWVzdElkXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KFwiZmlsZVwiKTtcblxuICBpZiAoIWlzRmlsZUxpa2UoZmlsZSkpIHtcbiAgICByZXR1cm4ganNvbkVycm9yKHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgc3RhZ2U6IFwiVkFMSURBVElPTlwiLFxuICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGZpbGUgdXBsb2FkLlwiLFxuICAgICAgcmVxdWVzdElkXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBtaW1lVHlwZSA9IGZpbGUudHlwZTtcbiAgY29uc3QgZXh0ZW5zaW9uID0gcmVzb2x2ZUV4dGVuc2lvbihnZXRGaWxlRXh0ZW5zaW9uKGZpbGUubmFtZSksIG1pbWVUeXBlKTtcblxuICBpZiAoIWNvbmZpZy5hY2NlcHQubWltZVR5cGVzLmluY2x1ZGVzKG1pbWVUeXBlKSkge1xuICAgIHJldHVybiBqc29uRXJyb3Ioe1xuICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICBzdGFnZTogXCJWQUxJREFUSU9OXCIsXG4gICAgICBtZXNzYWdlOiBcIlVuc3VwcG9ydGVkIG1pbWUgdHlwZS5cIixcbiAgICAgIHJlcXVlc3RJZFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKCFleHRlbnNpb24gfHwgIWNvbmZpZy5hY2NlcHQuZXh0ZW5zaW9ucy5pbmNsdWRlcyhleHRlbnNpb24pKSB7XG4gICAgcmV0dXJuIGpzb25FcnJvcih7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICAgIHN0YWdlOiBcIlZBTElEQVRJT05cIixcbiAgICAgIG1lc3NhZ2U6IFwiVW5zdXBwb3J0ZWQgZmlsZSBleHRlbnNpb24uXCIsXG4gICAgICByZXF1ZXN0SWRcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IG1heEJ5dGVzID0gY29uZmlnLmxpbWl0cy5tYXhGaWxlU2l6ZU1iICogMTAyNCAqIDEwMjQ7XG4gIGlmIChmaWxlLnNpemUgPiBtYXhCeXRlcykge1xuICAgIHJldHVybiBqc29uRXJyb3Ioe1xuICAgICAgc3RhdHVzOiA0MTMsXG4gICAgICBzdGFnZTogXCJWQUxJREFUSU9OXCIsXG4gICAgICBtZXNzYWdlOiBcIkZpbGUgZXhjZWVkcyBtYXggc2l6ZS5cIixcbiAgICAgIHJlcXVlc3RJZFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgaWQgPSBnZW5lcmF0ZURvY0lkKCk7XG4gIGNvbnN0IHN0YXJ0ZWRBdCA9IG5ldyBEYXRlKCk7XG5cbiAgYXdhaXQgZW5zdXJlRGF0YURpcnMoKTtcbiAgYXdhaXQgZnMubWtkaXIoZ2V0RG9jRXhwb3J0RGlyKGlkKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG5cbiAgY29uc3QgdXBsb2FkUGF0aCA9IGdldFVwbG9hZFBhdGgoaWQsIGV4dGVuc2lvbik7XG4gIGNvbnN0IG1ldGFQYXRoID0gZ2V0TWV0YVBhdGgoaWQpO1xuICBjb25zdCBwcm9ncmVzc1BhdGggPSBnZXRQcm9ncmVzc1BhdGgoaWQpO1xuICBjb25zdCB0aW1lb3V0U2VjID0gY29uZmlnLmxpbWl0cy5wcm9jZXNzVGltZW91dFNlYztcblxuICBsZXQgbWV0YSA9IGJ1aWxkUGVuZGluZ01ldGEoe1xuICAgIGlkLFxuICAgIGZpbGUsXG4gICAgbWltZVR5cGUsXG4gICAgdXBsb2FkUGF0aCxcbiAgICBzaGEyNTY6IFwiXCIsXG4gICAgY29uZmlnVmVyc2lvbjogY29uZmlnLnZlcnNpb24sXG4gICAgc3RyaWN0OiBjb25maWcuc3RyaWN0LFxuICAgIHRpbWVvdXRTZWMsXG4gICAgc3RhcnRlZEF0LFxuICAgIHJlcXVlc3RJZFxuICB9KTtcblxuICBhd2FpdCB3cml0ZUpzb25BdG9taWMobWV0YVBhdGgsIG1ldGEpO1xuICBhd2FpdCB1cHNlcnRJbmRleERvYyh0b0RvY01ldGEobWV0YSkpO1xuXG4gIGxldCBidWZmZXI6IEJ1ZmZlcjtcbiAgdHJ5IHtcbiAgICBidWZmZXIgPSBCdWZmZXIuZnJvbShhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIG1ldGEgPSBhcHBseUZhaWx1cmUobWV0YSwge1xuICAgICAgc3RhZ2U6IFwiVVBMT0FEXCIsXG4gICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byByZWFkIHRoZSB1cGxvYWRlZCBmaWxlLlwiLFxuICAgICAgZmluaXNoZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGV4aXRDb2RlOiAtMSxcbiAgICAgIHN0ZGVyclRhaWw6IFN0cmluZyhlcnJvcilcbiAgICB9KTtcbiAgICBhd2FpdCB3cml0ZUpzb25BdG9taWMobWV0YVBhdGgsIG1ldGEpO1xuICAgIGF3YWl0IHVwc2VydEluZGV4RG9jKHRvRG9jTWV0YShtZXRhKSk7XG4gICAgcmV0dXJuIGpzb25FcnJvcih7XG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIHN0YWdlOiBcIlVQTE9BRFwiLFxuICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcmVhZCB0aGUgdXBsb2FkZWQgZmlsZS5cIixcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIGRvY0lkOiBpZFxuICAgIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUodXBsb2FkUGF0aCwgYnVmZmVyKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBtZXRhID0gYXBwbHlGYWlsdXJlKG1ldGEsIHtcbiAgICAgIHN0YWdlOiBcIlVQTE9BRFwiLFxuICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gc3RvcmUgdGhlIHVwbG9hZGVkIGZpbGUuXCIsXG4gICAgICBmaW5pc2hlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgZXhpdENvZGU6IC0xLFxuICAgICAgc3RkZXJyVGFpbDogU3RyaW5nKGVycm9yKVxuICAgIH0pO1xuICAgIGF3YWl0IHdyaXRlSnNvbkF0b21pYyhtZXRhUGF0aCwgbWV0YSk7XG4gICAgYXdhaXQgdXBzZXJ0SW5kZXhEb2ModG9Eb2NNZXRhKG1ldGEpKTtcbiAgICByZXR1cm4ganNvbkVycm9yKHtcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgc3RhZ2U6IFwiVVBMT0FEXCIsXG4gICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBzdG9yZSB0aGUgdXBsb2FkZWQgZmlsZS5cIixcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIGRvY0lkOiBpZFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3Qgc2hhMjU2ID0gY3J5cHRvLmNyZWF0ZUhhc2goXCJzaGEyNTZcIikudXBkYXRlKGJ1ZmZlcikuZGlnZXN0KFwiaGV4XCIpO1xuICBtZXRhID0gYXBwbHlTb3VyY2UobWV0YSwge1xuICAgIGZpbGUsXG4gICAgbWltZVR5cGUsXG4gICAgdXBsb2FkUGF0aCxcbiAgICBzaGEyNTZcbiAgfSk7XG4gIG1ldGEucHJvY2Vzc2luZyA9IHtcbiAgICAuLi5tZXRhLnByb2Nlc3NpbmcsXG4gICAgc3RhZ2U6IFwiU1BBV05cIixcbiAgICBwcm9ncmVzczogNSxcbiAgICBtZXNzYWdlOiBcIlN0YXJ0aW5nIHdvcmtlci5cIixcbiAgICByZXF1ZXN0SWRcbiAgfTtcblxuICBhd2FpdCB3cml0ZUpzb25BdG9taWMobWV0YVBhdGgsIG1ldGEpO1xuICBhd2FpdCB1cHNlcnRJbmRleERvYyh0b0RvY01ldGEobWV0YSkpO1xuXG4gIGNvbnN0IHB5dGhvbkJpbiA9IHByb2Nlc3MuZW52LlBZVEhPTl9CSU4gPz8gXCJcIjtcbiAgY29uc3Qgd29ya2VyUGF0aCA9IHByb2Nlc3MuZW52LkRPQ0xJTkdfV09SS0VSID8/IFwiXCI7XG4gIGNvbnN0IHByb2dyZXNzU3RhdGU6IFByb2dyZXNzU3RhdGUgPSB7XG4gICAgc3RhZ2U6IFwiU1BBV05cIixcbiAgICBwcm9ncmVzczogNSxcbiAgICBtZXNzYWdlOiBcIlN0YXJ0aW5nIHdvcmtlci5cIlxuICB9O1xuICAvLyBXSFk6IFNlcmlhbGl6ZSBwcm9ncmVzcy9tZXRhIHdyaXRlcyB0byBhdm9pZCBvdmVybGFwcGluZyBmaWxlIG9wZXJhdGlvbnMuXG4gIGxldCB3cml0ZVF1ZXVlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIGxldCBhbGxvd1Byb2dyZXNzV3JpdGVzID0gdHJ1ZTtcblxuICBjb25zdCBzY2hlZHVsZVByb2dyZXNzV3JpdGUgPSBhc3luYyAoKSA9PiB7XG4gICAgd3JpdGVRdWV1ZSA9IHdyaXRlUXVldWVcbiAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFhbGxvd1Byb2dyZXNzV3JpdGVzKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHdyaXRlSnNvbkF0b21pYyhwcm9ncmVzc1BhdGgsIHtcbiAgICAgICAgICBzdGFnZTogcHJvZ3Jlc3NTdGF0ZS5zdGFnZSxcbiAgICAgICAgICBtZXNzYWdlOiBwcm9ncmVzc1N0YXRlLm1lc3NhZ2UsXG4gICAgICAgICAgcHJvZ3Jlc3M6IHByb2dyZXNzU3RhdGUucHJvZ3Jlc3MsXG4gICAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB1bmRlZmluZWQpO1xuICAgIHJldHVybiB3cml0ZVF1ZXVlO1xuICB9O1xuXG4gIGNvbnN0IHNjaGVkdWxlRmluYWxXcml0ZSA9IGFzeW5jIChuZXh0TWV0YTogTWV0YUZpbGUpID0+IHtcbiAgICB3cml0ZVF1ZXVlID0gd3JpdGVRdWV1ZVxuICAgICAgLnRoZW4oKCkgPT4gd3JpdGVKc29uQXRvbWljKG1ldGFQYXRoLCBuZXh0TWV0YSkpXG4gICAgICAuY2F0Y2goKCkgPT4gdW5kZWZpbmVkKTtcbiAgICByZXR1cm4gd3JpdGVRdWV1ZTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVQcm9ncmVzc0xpbmUgPSAobGluZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlID0gcGFyc2VQcm9ncmVzc0xpbmUobGluZSk7XG4gICAgaWYgKCF1cGRhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbWV0YSA9IGFwcGx5UHJvZ3Jlc3MobWV0YSwgdXBkYXRlLCBwcm9ncmVzc1N0YXRlKTtcbiAgICBjb25zdCBzdGFnZVZhbHVlID0gKHVwZGF0ZS5zdGFnZSA/PyBcIlwiKS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmIChzdGFnZVZhbHVlID09PSBcIkRPTkVcIiB8fCBzdGFnZVZhbHVlID09PSBcIkZBSUxFRFwiKSB7XG4gICAgICBhbGxvd1Byb2dyZXNzV3JpdGVzID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZvaWQgc2NoZWR1bGVQcm9ncmVzc1dyaXRlKCk7XG4gIH07XG5cbiAgdm9pZCBydW5Qcm9jZXNzKHtcbiAgICBjb21tYW5kOiBweXRob25CaW4sXG4gICAgYXJnczogW1xuICAgICAgd29ya2VyUGF0aCxcbiAgICAgIFwiLS1pbnB1dFwiLFxuICAgICAgdXBsb2FkUGF0aCxcbiAgICAgIFwiLS1kb2MtaWRcIixcbiAgICAgIGlkLFxuICAgICAgXCItLWRhdGEtZGlyXCIsXG4gICAgICBnZXREYXRhRGlyKCksXG4gICAgICBcIi0tZ2F0ZXNcIixcbiAgICAgIGdldEdhdGVzQ29uZmlnUGF0aCgpXG4gICAgXSxcbiAgICB0aW1lb3V0TXM6IHRpbWVvdXRTZWMgKiAxMDAwLFxuICAgIHN0ZG91dFRhaWxCeXRlczogY29uZmlnLmxpbWl0cy5zdGRvdXRUYWlsS2IgKiAxMDI0LFxuICAgIHN0ZGVyclRhaWxCeXRlczogY29uZmlnLmxpbWl0cy5zdGRlcnJUYWlsS2IgKiAxMDI0LFxuICAgIG9uU3Rkb3V0TGluZTogaGFuZGxlUHJvZ3Jlc3NMaW5lXG4gIH0pXG4gICAgLnRoZW4oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgYWxsb3dQcm9ncmVzc1dyaXRlcyA9IGZhbHNlO1xuICAgICAgbWV0YSA9IGF3YWl0IGZpbmFsaXplTWV0YSh7XG4gICAgICAgIG1ldGEsXG4gICAgICAgIG1ldGFQYXRoLFxuICAgICAgICBmaWxlLFxuICAgICAgICBtaW1lVHlwZSxcbiAgICAgICAgdXBsb2FkUGF0aCxcbiAgICAgICAgc2hhMjU2LFxuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgIHJlc3VsdCxcbiAgICAgICAgc3RhcnRlZEF0LFxuICAgICAgICB0aW1lb3V0U2VjLFxuICAgICAgICBwcm9ncmVzc1N0YXRlXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHNjaGVkdWxlRmluYWxXcml0ZShtZXRhKTtcbiAgICAgIGF3YWl0IGZzLnJtKHByb2dyZXNzUGF0aCwgeyBmb3JjZTogdHJ1ZSB9KTtcbiAgICAgIGF3YWl0IHVwc2VydEluZGV4RG9jKHRvRG9jTWV0YShtZXRhKSk7XG4gICAgfSlcbiAgICAuY2F0Y2goYXN5bmMgKGVycm9yKSA9PiB7XG4gICAgICBhbGxvd1Byb2dyZXNzV3JpdGVzID0gZmFsc2U7XG4gICAgICBtZXRhID0gYXBwbHlGYWlsdXJlKG1ldGEsIHtcbiAgICAgICAgc3RhZ2U6IFwiU1BBV05cIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gc3RhcnQgdGhlIHByb2Nlc3Npbmcgd29ya2VyLlwiLFxuICAgICAgICBmaW5pc2hlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBleGl0Q29kZTogLTEsXG4gICAgICAgIHN0ZGVyclRhaWw6IFN0cmluZyhlcnJvcilcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgc2NoZWR1bGVGaW5hbFdyaXRlKG1ldGEpO1xuICAgICAgYXdhaXQgZnMucm0ocHJvZ3Jlc3NQYXRoLCB7IGZvcmNlOiB0cnVlIH0pO1xuICAgICAgYXdhaXQgdXBzZXJ0SW5kZXhEb2ModG9Eb2NNZXRhKG1ldGEpKTtcbiAgICB9KTtcblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb248VXBsb2FkUmVzcG9uc2U+KFxuICAgIHtcbiAgICAgIGlkLFxuICAgICAgb3JpZ2luYWxGaWxlTmFtZTogZmlsZS5uYW1lLFxuICAgICAgc3RhdHVzOiBcIlBFTkRJTkdcIixcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIHN0YWdlOiBtZXRhLnByb2Nlc3Npbmcuc3RhZ2UgPz8gXCJTUEFXTlwiLFxuICAgICAgcHJvZ3Jlc3M6IG1ldGEucHJvY2Vzc2luZy5wcm9ncmVzcyA/PyAwXG4gICAgfSxcbiAgICB7IHN0YXR1czogMjAyIH1cbiAgKTtcbn1cblxudHlwZSBFcnJvclJlc3BvbnNlT3B0aW9ucyA9IHtcbiAgc3RhdHVzOiBudW1iZXI7XG4gIHN0YWdlOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgcmVxdWVzdElkOiBzdHJpbmc7XG4gIGNvZGU/OiBzdHJpbmc7XG4gIG1pc3NpbmdFbnY/OiBzdHJpbmdbXTtcbiAgZG9jSWQ/OiBzdHJpbmc7XG59O1xuXG50eXBlIFVwbG9hZFJlc3BvbnNlID0ge1xuICBpZDogc3RyaW5nO1xuICBvcmlnaW5hbEZpbGVOYW1lOiBzdHJpbmc7XG4gIHN0YXR1czogRG9jU3RhdHVzO1xuICByZXF1ZXN0SWQ6IHN0cmluZztcbiAgc3RhZ2U6IHN0cmluZztcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcbn07XG5cbmZ1bmN0aW9uIGpzb25FcnJvcihvcHRpb25zOiBFcnJvclJlc3BvbnNlT3B0aW9ucykge1xuICBjb25zdCB7IHN0YXR1cywgc3RhZ2UsIG1lc3NhZ2UsIHJlcXVlc3RJZCwgY29kZSwgbWlzc2luZ0VudiwgZG9jSWQgfSA9IG9wdGlvbnM7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBtZXNzYWdlLFxuICAgICAgICBzdGFnZSxcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICBjb2RlXG4gICAgICB9LFxuICAgICAgcmVxdWVzdElkLFxuICAgICAgZG9jSWQsXG4gICAgICBtaXNzaW5nRW52XG4gICAgfSxcbiAgICB7IHN0YXR1cyB9XG4gICk7XG59XG5cbnR5cGUgUGVuZGluZ01ldGFPcHRpb25zID0ge1xuICBpZDogc3RyaW5nO1xuICBmaWxlOiBGaWxlO1xuICBtaW1lVHlwZTogc3RyaW5nO1xuICB1cGxvYWRQYXRoOiBzdHJpbmc7XG4gIHNoYTI1Njogc3RyaW5nO1xuICBjb25maWdWZXJzaW9uOiBudW1iZXI7XG4gIHN0cmljdDogYm9vbGVhbjtcbiAgdGltZW91dFNlYzogbnVtYmVyO1xuICBzdGFydGVkQXQ6IERhdGU7XG4gIHJlcXVlc3RJZDogc3RyaW5nO1xufTtcblxudHlwZSBGYWlsdXJlT3B0aW9ucyA9IHtcbiAgc3RhZ2U6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBmaW5pc2hlZEF0OiBEYXRlO1xuICBleGl0Q29kZTogbnVtYmVyO1xuICBzdGRvdXRUYWlsPzogc3RyaW5nO1xuICBzdGRlcnJUYWlsPzogc3RyaW5nO1xufTtcblxudHlwZSBQcm9ncmVzc1VwZGF0ZSA9IHtcbiAgc3RhZ2U/OiBzdHJpbmc7XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIHByb2dyZXNzPzogbnVtYmVyO1xufTtcblxudHlwZSBQcm9ncmVzc1N0YXRlID0ge1xuICBzdGFnZTogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHByb2dyZXNzOiBudW1iZXI7XG59O1xuXG50eXBlIEZpbmFsaXplT3B0aW9ucyA9IHtcbiAgbWV0YTogTWV0YUZpbGU7XG4gIG1ldGFQYXRoOiBzdHJpbmc7XG4gIGZpbGU6IEZpbGU7XG4gIG1pbWVUeXBlOiBzdHJpbmc7XG4gIHVwbG9hZFBhdGg6IHN0cmluZztcbiAgc2hhMjU2OiBzdHJpbmc7XG4gIHJlcXVlc3RJZDogc3RyaW5nO1xuICByZXN1bHQ6IFByb2Nlc3NSZXN1bHQ7XG4gIHN0YXJ0ZWRBdDogRGF0ZTtcbiAgdGltZW91dFNlYzogbnVtYmVyO1xuICBwcm9ncmVzc1N0YXRlOiBQcm9ncmVzc1N0YXRlO1xufTtcblxuZnVuY3Rpb24gYnVpbGRQZW5kaW5nTWV0YShvcHRpb25zOiBQZW5kaW5nTWV0YU9wdGlvbnMpOiBNZXRhRmlsZSB7XG4gIGNvbnN0IHN0YXJ0ZWRBdCA9IG9wdGlvbnMuc3RhcnRlZEF0LnRvSVNPU3RyaW5nKCk7XG4gIHJldHVybiB7XG4gICAgc2NoZW1hVmVyc2lvbjogMSxcbiAgICBpZDogb3B0aW9ucy5pZCxcbiAgICByZXF1ZXN0SWQ6IG9wdGlvbnMucmVxdWVzdElkLFxuICAgIGNyZWF0ZWRBdDogc3RhcnRlZEF0LFxuICAgIHNvdXJjZToge1xuICAgICAgb3JpZ2luYWxGaWxlTmFtZTogb3B0aW9ucy5maWxlLm5hbWUsXG4gICAgICBtaW1lVHlwZTogb3B0aW9ucy5taW1lVHlwZSxcbiAgICAgIHNpemVCeXRlczogb3B0aW9ucy5maWxlLnNpemUsXG4gICAgICBzaGEyNTY6IG9wdGlvbnMuc2hhMjU2LFxuICAgICAgc3RvcmVkUGF0aDogb3B0aW9ucy51cGxvYWRQYXRoXG4gICAgfSxcbiAgICBwcm9jZXNzaW5nOiB7XG4gICAgICBzdGF0dXM6IFwiUEVORElOR1wiLFxuICAgICAgc3RhZ2U6IFwiVVBMT0FEXCIsXG4gICAgICBwcm9ncmVzczogMCxcbiAgICAgIG1lc3NhZ2U6IFwiUmVjZWl2aW5nIHVwbG9hZC5cIixcbiAgICAgIHJlcXVlc3RJZDogb3B0aW9ucy5yZXF1ZXN0SWQsXG4gICAgICBzdGFydGVkQXQsXG4gICAgICBmaW5pc2hlZEF0OiBudWxsLFxuICAgICAgZHVyYXRpb25NczogMCxcbiAgICAgIHRpbWVvdXRTZWM6IG9wdGlvbnMudGltZW91dFNlYyxcbiAgICAgIGV4aXRDb2RlOiAwLFxuICAgICAgd29ya2VyOiB7XG4gICAgICAgIHB5dGhvbkJpbjogcHJvY2Vzcy5lbnYuUFlUSE9OX0JJTiA/PyBcIlVOS05PV05cIixcbiAgICAgICAgcHl0aG9uVmVyc2lvbjogXCJVTktOT1dOXCIsXG4gICAgICAgIGRvY2xpbmdWZXJzaW9uOiBcIlVOS05PV05cIlxuICAgICAgfVxuICAgIH0sXG4gICAgb3V0cHV0czoge1xuICAgICAgbWFya2Rvd25QYXRoOiBudWxsLFxuICAgICAganNvblBhdGg6IG51bGwsXG4gICAgICBieXRlczogeyBtYXJrZG93bjogMCwganNvbjogMCB9XG4gICAgfSxcbiAgICBtZXRyaWNzOiB7XG4gICAgICBwYWdlczogMCxcbiAgICAgIHRleHRDaGFyczogMCxcbiAgICAgIG1kQ2hhcnM6IDAsXG4gICAgICB0ZXh0SXRlbXM6IDAsXG4gICAgICB0YWJsZXM6IDAsXG4gICAgICB0ZXh0Q2hhcnNQZXJQYWdlQXZnOiAwXG4gICAgfSxcbiAgICBxdWFsaXR5R2F0ZXM6IHtcbiAgICAgIGNvbmZpZ1ZlcnNpb246IG9wdGlvbnMuY29uZmlnVmVyc2lvbixcbiAgICAgIHN0cmljdDogb3B0aW9ucy5zdHJpY3QsXG4gICAgICBwYXNzZWQ6IGZhbHNlLFxuICAgICAgZmFpbGVkR2F0ZXM6IFtdLFxuICAgICAgZXZhbHVhdGVkOiBbXVxuICAgIH0sXG4gICAgbG9nczoge1xuICAgICAgc3Rkb3V0VGFpbDogXCJcIixcbiAgICAgIHN0ZGVyclRhaWw6IFwiXCJcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGFwcGx5U291cmNlKFxuICBtZXRhOiBNZXRhRmlsZSxcbiAgb3B0aW9uczoge1xuICAgIGZpbGU6IEZpbGU7XG4gICAgbWltZVR5cGU6IHN0cmluZztcbiAgICB1cGxvYWRQYXRoOiBzdHJpbmc7XG4gICAgc2hhMjU2OiBzdHJpbmc7XG4gIH1cbik6IE1ldGFGaWxlIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5tZXRhLFxuICAgIHNvdXJjZToge1xuICAgICAgLi4ubWV0YS5zb3VyY2UsXG4gICAgICBvcmlnaW5hbEZpbGVOYW1lOiBvcHRpb25zLmZpbGUubmFtZSxcbiAgICAgIG1pbWVUeXBlOiBvcHRpb25zLm1pbWVUeXBlLFxuICAgICAgc2l6ZUJ5dGVzOiBvcHRpb25zLmZpbGUuc2l6ZSxcbiAgICAgIHNoYTI1Njogb3B0aW9ucy5zaGEyNTYsXG4gICAgICBzdG9yZWRQYXRoOiBvcHRpb25zLnVwbG9hZFBhdGhcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGFwcGx5RmFpbHVyZShtZXRhOiBNZXRhRmlsZSwgb3B0aW9uczogRmFpbHVyZU9wdGlvbnMpOiBNZXRhRmlsZSB7XG4gIGNvbnN0IHN0YXJ0ZWRBdCA9IHJlc29sdmVTdGFydGVkQXQobWV0YSwgb3B0aW9ucy5maW5pc2hlZEF0KTtcbiAgY29uc3QgcHJvY2Vzc2luZyA9IHtcbiAgICAuLi5tZXRhLnByb2Nlc3NpbmcsXG4gICAgc3RhdHVzOiBcIkZBSUxFRFwiIGFzIGNvbnN0LFxuICAgIHN0YWdlOiBvcHRpb25zLnN0YWdlLFxuICAgIG1lc3NhZ2U6IG9wdGlvbnMubWVzc2FnZSxcbiAgICBleGl0Q29kZTogb3B0aW9ucy5leGl0Q29kZSxcbiAgICBmaW5pc2hlZEF0OiBvcHRpb25zLmZpbmlzaGVkQXQudG9JU09TdHJpbmcoKSxcbiAgICBkdXJhdGlvbk1zOiBvcHRpb25zLmZpbmlzaGVkQXQuZ2V0VGltZSgpIC0gc3RhcnRlZEF0LmdldFRpbWUoKVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgLi4ubWV0YSxcbiAgICBwcm9jZXNzaW5nLFxuICAgIG91dHB1dHM6IHtcbiAgICAgIG1hcmtkb3duUGF0aDogbnVsbCxcbiAgICAgIGpzb25QYXRoOiBudWxsLFxuICAgICAgYnl0ZXM6IHsgbWFya2Rvd246IDAsIGpzb246IDAgfVxuICAgIH0sXG4gICAgcXVhbGl0eUdhdGVzOiB7XG4gICAgICAuLi5tZXRhLnF1YWxpdHlHYXRlcyxcbiAgICAgIHBhc3NlZDogZmFsc2VcbiAgICB9LFxuICAgIGxvZ3M6IHtcbiAgICAgIHN0ZG91dFRhaWw6IG9wdGlvbnMuc3Rkb3V0VGFpbCA/PyBcIlwiLFxuICAgICAgc3RkZXJyVGFpbDogb3B0aW9ucy5zdGRlcnJUYWlsID8/IFwiXCJcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGFwcGx5UHJvZ3Jlc3MoXG4gIG1ldGE6IE1ldGFGaWxlLFxuICB1cGRhdGU6IFByb2dyZXNzVXBkYXRlLFxuICBwcm9ncmVzc1N0YXRlOiBQcm9ncmVzc1N0YXRlXG4pOiBNZXRhRmlsZSB7XG4gIGNvbnN0IHByb2Nlc3NpbmcgPSB7IC4uLm1ldGEucHJvY2Vzc2luZyB9O1xuICBpZiAodXBkYXRlLnN0YWdlKSB7XG4gICAgcHJvY2Vzc2luZy5zdGFnZSA9IHVwZGF0ZS5zdGFnZTtcbiAgICBwcm9ncmVzc1N0YXRlLnN0YWdlID0gdXBkYXRlLnN0YWdlO1xuICB9XG4gIGlmICh0eXBlb2YgdXBkYXRlLnByb2dyZXNzID09PSBcIm51bWJlclwiKSB7XG4gICAgY29uc3QgY2xhbXBlZCA9IGNsYW1wUHJvZ3Jlc3ModXBkYXRlLnByb2dyZXNzKTtcbiAgICBwcm9jZXNzaW5nLnByb2dyZXNzID0gY2xhbXBlZDtcbiAgICBwcm9ncmVzc1N0YXRlLnByb2dyZXNzID0gY2xhbXBlZDtcbiAgfVxuICBpZiAodXBkYXRlLm1lc3NhZ2UpIHtcbiAgICBwcm9jZXNzaW5nLm1lc3NhZ2UgPSB1cGRhdGUubWVzc2FnZTtcbiAgICBwcm9ncmVzc1N0YXRlLm1lc3NhZ2UgPSB1cGRhdGUubWVzc2FnZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIC4uLm1ldGEsXG4gICAgcHJvY2Vzc2luZ1xuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZVByb2dyZXNzTGluZShsaW5lOiBzdHJpbmcpOiBQcm9ncmVzc1VwZGF0ZSB8IG51bGwge1xuICBjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG4gIGlmICghdHJpbW1lZC5zdGFydHNXaXRoKFwie1wiKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZSh0cmltbWVkKTtcbiAgICBpZiAoIWlzUmVjb3JkKHBhcnNlZCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBldmVudCA9IHBhcnNlZC5ldmVudCA/PyBwYXJzZWQudHlwZTtcbiAgICBpZiAoZXZlbnQgIT09IFwicHJvZ3Jlc3NcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHN0YWdlID0gdHlwZW9mIHBhcnNlZC5zdGFnZSA9PT0gXCJzdHJpbmdcIiA/IHBhcnNlZC5zdGFnZSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBtZXNzYWdlID0gdHlwZW9mIHBhcnNlZC5tZXNzYWdlID09PSBcInN0cmluZ1wiID8gcGFyc2VkLm1lc3NhZ2UgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgcHJvZ3Jlc3MgPSB0eXBlb2YgcGFyc2VkLnByb2dyZXNzID09PSBcIm51bWJlclwiID8gcGFyc2VkLnByb2dyZXNzIDogdW5kZWZpbmVkO1xuICAgIGlmICghc3RhZ2UgJiYgIW1lc3NhZ2UgJiYgdHlwZW9mIHByb2dyZXNzICE9PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHsgc3RhZ2UsIG1lc3NhZ2UsIHByb2dyZXNzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xhbXBQcm9ncmVzcyh2YWx1ZTogbnVtYmVyKSB7XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkge1xuICAgIHJldHVybiAwO1xuICB9XG4gIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIE1hdGgucm91bmQodmFsdWUpKSk7XG59XG5cbmZ1bmN0aW9uIGlzRmlsZUxpa2UodmFsdWU6IEZvcm1EYXRhRW50cnlWYWx1ZSB8IG51bGwpOiB2YWx1ZSBpcyBGaWxlIHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgY2FuZGlkYXRlID0gdmFsdWUgYXMgRmlsZTtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgY2FuZGlkYXRlLmFycmF5QnVmZmVyID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICB0eXBlb2YgY2FuZGlkYXRlLm5hbWUgPT09IFwic3RyaW5nXCIgJiZcbiAgICB0eXBlb2YgY2FuZGlkYXRlLnR5cGUgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuZnVuY3Rpb24gaXNSZWNvcmQodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIHJldHVybiBCb29sZWFuKHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpO1xufVxuXG5mdW5jdGlvbiByZXNvbHZlRXh0ZW5zaW9uKGV4dGVuc2lvbjogc3RyaW5nLCBtaW1lVHlwZTogc3RyaW5nKSB7XG4gIGlmIChleHRlbnNpb24pIHtcbiAgICByZXR1cm4gZXh0ZW5zaW9uO1xuICB9XG4gIGlmIChtaW1lVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9wZGZcIikge1xuICAgIHJldHVybiBcIi5wZGZcIjtcbiAgfVxuICBpZiAoXG4gICAgbWltZVR5cGUgPT09IFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnRcIlxuICApIHtcbiAgICByZXR1cm4gXCIuZG9jeFwiO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuXG5mdW5jdGlvbiByZXNvbHZlU3RhcnRlZEF0KG1ldGE6IE1ldGFGaWxlLCBmYWxsYmFjazogRGF0ZSkge1xuICBjb25zdCBzdGFydGVkQXQgPSBtZXRhLnByb2Nlc3Npbmcuc3RhcnRlZEF0O1xuICBpZiAodHlwZW9mIHN0YXJ0ZWRBdCA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBEYXRlKHN0YXJ0ZWRBdCk7XG4gICAgaWYgKCFOdW1iZXIuaXNOYU4ocGFyc2VkLmdldFRpbWUoKSkpIHtcbiAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxsYmFjaztcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmluYWxpemVNZXRhKG9wdGlvbnM6IEZpbmFsaXplT3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgbWV0YVBhdGgsXG4gICAgZmlsZSxcbiAgICBtaW1lVHlwZSxcbiAgICB1cGxvYWRQYXRoLFxuICAgIHNoYTI1NixcbiAgICByZXF1ZXN0SWQsXG4gICAgcmVzdWx0LFxuICAgIHN0YXJ0ZWRBdCxcbiAgICB0aW1lb3V0U2VjLFxuICAgIHByb2dyZXNzU3RhdGVcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGZpbmlzaGVkQXQgPSBuZXcgRGF0ZSgpO1xuICBsZXQgbWV0YSA9IG9wdGlvbnMubWV0YTtcblxuICAvLyBXSFk6IEdyYWIgYSBmcmVzaCBtZXRhIHNuYXBzaG90IGluIGNhc2UgcHJvZ3Jlc3Mgd3JpdGVzIHVwZGF0ZWQgdGhlIGZpbGUuXG4gIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgcmVhZE1ldGFTbmFwc2hvdChtZXRhUGF0aCwgMywgNTApO1xuICBpZiAoc25hcHNob3QpIHtcbiAgICBtZXRhID0gc25hcHNob3Q7XG4gIH1cblxuICBtZXRhID0gYXBwbHlTb3VyY2UobWV0YSwgeyBmaWxlLCBtaW1lVHlwZSwgdXBsb2FkUGF0aCwgc2hhMjU2IH0pO1xuICBtZXRhLnJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcblxuICBjb25zdCBwcm9jZXNzaW5nID0geyAuLi5tZXRhLnByb2Nlc3NpbmcgfTtcbiAgY29uc3Qgc3RhcnRlZCA9IHJlc29sdmVTdGFydGVkQXQobWV0YSwgc3RhcnRlZEF0KTtcbiAgcHJvY2Vzc2luZy5zdGFydGVkQXQgPSBwcm9jZXNzaW5nLnN0YXJ0ZWRBdCA/PyBzdGFydGVkLnRvSVNPU3RyaW5nKCk7XG4gIHByb2Nlc3NpbmcuZmluaXNoZWRBdCA9IGZpbmlzaGVkQXQudG9JU09TdHJpbmcoKTtcbiAgcHJvY2Vzc2luZy5kdXJhdGlvbk1zID0gZmluaXNoZWRBdC5nZXRUaW1lKCkgLSBzdGFydGVkLmdldFRpbWUoKTtcbiAgcHJvY2Vzc2luZy50aW1lb3V0U2VjID0gdGltZW91dFNlYztcbiAgcHJvY2Vzc2luZy5leGl0Q29kZSA9IHJlc3VsdC5leGl0Q29kZTtcbiAgcHJvY2Vzc2luZy5yZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG5cbiAgaWYgKHJlc3VsdC50aW1lZE91dCkge1xuICAgIHByb2Nlc3Npbmcuc3RhdHVzID0gXCJGQUlMRURcIjtcbiAgICBwcm9jZXNzaW5nLnN0YWdlID0gXCJUSU1FT1VUXCI7XG4gICAgcHJvY2Vzc2luZy5tZXNzYWdlID0gYFdvcmtlciB0aW1lZCBvdXQgYWZ0ZXIgJHt0aW1lb3V0U2VjfXMuYDtcbiAgfSBlbHNlIGlmIChyZXN1bHQuZXhpdENvZGUgIT09IDApIHtcbiAgICBwcm9jZXNzaW5nLnN0YXR1cyA9IFwiRkFJTEVEXCI7XG4gICAgcHJvY2Vzc2luZy5zdGFnZSA9IHByb2Nlc3Npbmcuc3RhZ2UgPz8gXCJQUk9DRVNTXCI7XG4gICAgcHJvY2Vzc2luZy5tZXNzYWdlID0gcHJvY2Vzc2luZy5tZXNzYWdlID8/IGBXb3JrZXIgZXhpdGVkIHdpdGggY29kZSAke3Jlc3VsdC5leGl0Q29kZX0uYDtcbiAgfSBlbHNlIGlmIChwcm9jZXNzaW5nLnN0YXR1cyA9PT0gXCJQRU5ESU5HXCIpIHtcbiAgICBwcm9jZXNzaW5nLnN0YXR1cyA9IFwiU1VDQ0VTU1wiO1xuICB9XG5cbiAgY29uc3QgaGFzT3V0cHV0cyA9IEJvb2xlYW4obWV0YS5vdXRwdXRzLm1hcmtkb3duUGF0aCkgJiYgQm9vbGVhbihtZXRhLm91dHB1dHMuanNvblBhdGgpO1xuICBpZiAocHJvY2Vzc2luZy5zdGF0dXMgPT09IFwiU1VDQ0VTU1wiICYmICFoYXNPdXRwdXRzKSB7XG4gICAgcHJvY2Vzc2luZy5zdGF0dXMgPSBcIkZBSUxFRFwiO1xuICAgIHByb2Nlc3Npbmcuc3RhZ2UgPSBcIkZBSUxFRFwiO1xuICAgIHByb2Nlc3NpbmcubWVzc2FnZSA9IFwiV29ya2VyIGRpZCBub3QgcHJvZHVjZSBvdXRwdXRzLlwiO1xuICB9XG5cbiAgaWYgKHByb2Nlc3Npbmcuc3RhdHVzID09PSBcIlNVQ0NFU1NcIikge1xuICAgIHByb2Nlc3Npbmcuc3RhZ2UgPSBwcm9jZXNzaW5nLnN0YWdlID8/IFwiRE9ORVwiO1xuICAgIHByb2Nlc3NpbmcubWVzc2FnZSA9IHByb2Nlc3NpbmcubWVzc2FnZSA/PyBcIlByb2Nlc3NpbmcgY29tcGxldGUuXCI7XG4gICAgcHJvY2Vzc2luZy5wcm9ncmVzcyA9IDEwMDtcbiAgfSBlbHNlIGlmIChwcm9jZXNzaW5nLnN0YXR1cyA9PT0gXCJGQUlMRURcIikge1xuICAgIHByb2Nlc3Npbmcuc3RhZ2UgPSBwcm9jZXNzaW5nLnN0YWdlID8/IFwiRkFJTEVEXCI7XG4gICAgaWYgKCFwcm9jZXNzaW5nLm1lc3NhZ2UpIHtcbiAgICAgIHByb2Nlc3NpbmcubWVzc2FnZSA9XG4gICAgICAgIHJlc3VsdC5leGl0Q29kZSA9PT0gMCAmJiAhcmVzdWx0LnRpbWVkT3V0XG4gICAgICAgICAgPyBcIlF1YWxpdHkgZ2F0ZXMgZmFpbGVkLlwiXG4gICAgICAgICAgOiBcIlByb2Nlc3NpbmcgZmFpbGVkLlwiO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHByb2Nlc3NpbmcucHJvZ3Jlc3MgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHByb2Nlc3NpbmcucHJvZ3Jlc3MgPSBwcm9ncmVzc1N0YXRlLnByb2dyZXNzO1xuICAgIH1cbiAgfVxuXG4gIGlmICghcHJvY2Vzc2luZy5zdGFnZSkge1xuICAgIHByb2Nlc3Npbmcuc3RhZ2UgPSBwcm9ncmVzc1N0YXRlLnN0YWdlO1xuICB9XG4gIGlmICghcHJvY2Vzc2luZy5tZXNzYWdlKSB7XG4gICAgcHJvY2Vzc2luZy5tZXNzYWdlID0gcHJvZ3Jlc3NTdGF0ZS5tZXNzYWdlO1xuICB9XG4gIGlmICh0eXBlb2YgcHJvY2Vzc2luZy5wcm9ncmVzcyAhPT0gXCJudW1iZXJcIikge1xuICAgIHByb2Nlc3NpbmcucHJvZ3Jlc3MgPSBwcm9ncmVzc1N0YXRlLnByb2dyZXNzO1xuICB9XG5cbiAgY29uc3QgbmV4dE1ldGE6IE1ldGFGaWxlID0ge1xuICAgIC4uLm1ldGEsXG4gICAgcHJvY2Vzc2luZyxcbiAgICBsb2dzOiB7XG4gICAgICBzdGRvdXRUYWlsOiByZXN1bHQuc3Rkb3V0VGFpbCxcbiAgICAgIHN0ZGVyclRhaWw6IHJlc3VsdC5zdGRlcnJUYWlsXG4gICAgfVxuICB9O1xuXG4gIGlmIChwcm9jZXNzaW5nLnN0YXR1cyAhPT0gXCJTVUNDRVNTXCIpIHtcbiAgICBuZXh0TWV0YS5vdXRwdXRzID0ge1xuICAgICAgbWFya2Rvd25QYXRoOiBudWxsLFxuICAgICAganNvblBhdGg6IG51bGwsXG4gICAgICBieXRlczogeyBtYXJrZG93bjogMCwganNvbjogMCB9XG4gICAgfTtcbiAgICBuZXh0TWV0YS5xdWFsaXR5R2F0ZXMgPSB7XG4gICAgICAuLi5uZXh0TWV0YS5xdWFsaXR5R2F0ZXMsXG4gICAgICBwYXNzZWQ6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBuZXh0TWV0YTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVhZE1ldGFTbmFwc2hvdChcbiAgbWV0YVBhdGg6IHN0cmluZyxcbiAgYXR0ZW1wdHM6IG51bWJlcixcbiAgZGVsYXlNczogbnVtYmVyXG4pOiBQcm9taXNlPE1ldGFGaWxlIHwgbnVsbD4ge1xuICBmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IGF0dGVtcHRzOyBhdHRlbXB0ICs9IDEpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmF3ID0gYXdhaXQgZnMucmVhZEZpbGUobWV0YVBhdGgsIFwidXRmLThcIik7XG4gICAgICByZXR1cm4gcGFyc2VNZXRhU25hcHNob3QocmF3KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGF0dGVtcHQgPCBhdHRlbXB0cyAtIDEpIHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXlNcykpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gcGFyc2VNZXRhU25hcHNob3QocmF3OiBzdHJpbmcpOiBNZXRhRmlsZSB7XG4gIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocmF3KTtcbiAgcmV0dXJuIG1ldGFGaWxlU2NoZW1hLnBhcnNlKHBhcnNlZCk7XG59XG4iXSwibmFtZXMiOlsiY3J5cHRvIiwiZnMiLCJOZXh0UmVzcG9uc2UiLCJnZXRHYXRlc0NvbmZpZ1BhdGgiLCJsb2FkUXVhbGl0eUdhdGVzQ29uZmlnIiwiZ2V0TWlzc2luZ0VudiIsImVuc3VyZURhdGFEaXJzIiwiZ2V0RGF0YURpciIsImdldERvY0V4cG9ydERpciIsImdldE1ldGFQYXRoIiwiZ2V0UHJvZ3Jlc3NQYXRoIiwiZ2V0VXBsb2FkUGF0aCIsInVwc2VydEluZGV4RG9jIiwid3JpdGVKc29uQXRvbWljIiwicnVuUHJvY2VzcyIsInRvRG9jTWV0YSIsIm1ldGFGaWxlU2NoZW1hIiwiZ2VuZXJhdGVEb2NJZCIsImdldEZpbGVFeHRlbnNpb24iLCJydW50aW1lIiwiUE9TVCIsInJlcSIsInJlcXVlc3RJZCIsInJhbmRvbVVVSUQiLCJtaXNzaW5nRW52IiwibGVuZ3RoIiwianNvbkVycm9yIiwic3RhdHVzIiwic3RhZ2UiLCJtZXNzYWdlIiwiY29kZSIsImNvbmZpZyIsImVycm9yIiwiZm9ybURhdGEiLCJmaWxlIiwiZ2V0IiwiaXNGaWxlTGlrZSIsIm1pbWVUeXBlIiwidHlwZSIsImV4dGVuc2lvbiIsInJlc29sdmVFeHRlbnNpb24iLCJuYW1lIiwiYWNjZXB0IiwibWltZVR5cGVzIiwiaW5jbHVkZXMiLCJleHRlbnNpb25zIiwibWF4Qnl0ZXMiLCJsaW1pdHMiLCJtYXhGaWxlU2l6ZU1iIiwic2l6ZSIsImlkIiwic3RhcnRlZEF0IiwiRGF0ZSIsIm1rZGlyIiwicmVjdXJzaXZlIiwidXBsb2FkUGF0aCIsIm1ldGFQYXRoIiwicHJvZ3Jlc3NQYXRoIiwidGltZW91dFNlYyIsInByb2Nlc3NUaW1lb3V0U2VjIiwibWV0YSIsImJ1aWxkUGVuZGluZ01ldGEiLCJzaGEyNTYiLCJjb25maWdWZXJzaW9uIiwidmVyc2lvbiIsInN0cmljdCIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJhcnJheUJ1ZmZlciIsImFwcGx5RmFpbHVyZSIsImZpbmlzaGVkQXQiLCJleGl0Q29kZSIsInN0ZGVyclRhaWwiLCJTdHJpbmciLCJkb2NJZCIsIndyaXRlRmlsZSIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJhcHBseVNvdXJjZSIsInByb2Nlc3NpbmciLCJwcm9ncmVzcyIsInB5dGhvbkJpbiIsInByb2Nlc3MiLCJlbnYiLCJQWVRIT05fQklOIiwid29ya2VyUGF0aCIsIkRPQ0xJTkdfV09SS0VSIiwicHJvZ3Jlc3NTdGF0ZSIsIndyaXRlUXVldWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsImFsbG93UHJvZ3Jlc3NXcml0ZXMiLCJzY2hlZHVsZVByb2dyZXNzV3JpdGUiLCJ0aGVuIiwidXBkYXRlZEF0IiwidG9JU09TdHJpbmciLCJjYXRjaCIsInVuZGVmaW5lZCIsInNjaGVkdWxlRmluYWxXcml0ZSIsIm5leHRNZXRhIiwiaGFuZGxlUHJvZ3Jlc3NMaW5lIiwibGluZSIsInBhcnNlUHJvZ3Jlc3NMaW5lIiwiYXBwbHlQcm9ncmVzcyIsInN0YWdlVmFsdWUiLCJ0b1VwcGVyQ2FzZSIsImNvbW1hbmQiLCJhcmdzIiwidGltZW91dE1zIiwic3Rkb3V0VGFpbEJ5dGVzIiwic3Rkb3V0VGFpbEtiIiwic3RkZXJyVGFpbEJ5dGVzIiwic3RkZXJyVGFpbEtiIiwib25TdGRvdXRMaW5lIiwicmVzdWx0IiwiZmluYWxpemVNZXRhIiwicm0iLCJmb3JjZSIsImpzb24iLCJvcmlnaW5hbEZpbGVOYW1lIiwib3B0aW9ucyIsInNjaGVtYVZlcnNpb24iLCJjcmVhdGVkQXQiLCJzb3VyY2UiLCJzaXplQnl0ZXMiLCJzdG9yZWRQYXRoIiwiZHVyYXRpb25NcyIsIndvcmtlciIsInB5dGhvblZlcnNpb24iLCJkb2NsaW5nVmVyc2lvbiIsIm91dHB1dHMiLCJtYXJrZG93blBhdGgiLCJqc29uUGF0aCIsImJ5dGVzIiwibWFya2Rvd24iLCJtZXRyaWNzIiwicGFnZXMiLCJ0ZXh0Q2hhcnMiLCJtZENoYXJzIiwidGV4dEl0ZW1zIiwidGFibGVzIiwidGV4dENoYXJzUGVyUGFnZUF2ZyIsInF1YWxpdHlHYXRlcyIsInBhc3NlZCIsImZhaWxlZEdhdGVzIiwiZXZhbHVhdGVkIiwibG9ncyIsInN0ZG91dFRhaWwiLCJyZXNvbHZlU3RhcnRlZEF0IiwiZ2V0VGltZSIsImNsYW1wZWQiLCJjbGFtcFByb2dyZXNzIiwidHJpbW1lZCIsInRyaW0iLCJzdGFydHNXaXRoIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwiaXNSZWNvcmQiLCJldmVudCIsInZhbHVlIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJNYXRoIiwibWF4IiwibWluIiwicm91bmQiLCJjYW5kaWRhdGUiLCJCb29sZWFuIiwiQXJyYXkiLCJpc0FycmF5IiwiZmFsbGJhY2siLCJpc05hTiIsInNuYXBzaG90IiwicmVhZE1ldGFTbmFwc2hvdCIsInN0YXJ0ZWQiLCJ0aW1lZE91dCIsImhhc091dHB1dHMiLCJhdHRlbXB0cyIsImRlbGF5TXMiLCJhdHRlbXB0IiwicmF3IiwicmVhZEZpbGUiLCJwYXJzZU1ldGFTbmFwc2hvdCIsInNldFRpbWVvdXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/docs/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdocs%2Fupload%2Froute&page=%2Fapi%2Fdocs%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocs%2Fupload%2Froute.ts&appDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdocs%2Fupload%2Froute&page=%2Fapi%2Fdocs%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocs%2Fupload%2Froute.ts&appDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/app-render/manifests-singleton */ \"(rsc)/./node_modules/next/dist/server/app-render/manifests-singleton.js\");\n/* harmony import */ var next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var D_Programming_Playground_AI_Pipeline_OCR_Export_Rapoarte_PDF_app_api_docs_upload_route_ts__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./app/api/docs/upload/route.ts */ \"(rsc)/./app/api/docs/upload/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/docs/upload/route\",\n        pathname: \"/api/docs/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/docs/upload/route\"\n    },\n    distDir: \".next-e2e\\\\dev\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"D:\\\\Programming\\\\Playground AI\\\\Pipeline_OCR+Export_Rapoarte_PDF\\\\app\\\\api\\\\docs\\\\upload\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Programming_Playground_AI_Pipeline_OCR_Export_Rapoarte_PDF_app_api_docs_upload_route_ts__WEBPACK_IMPORTED_MODULE_17__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.addRequestMeta)(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/docs/upload/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        (0,next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5__.setManifestsSingleton)({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext, silenceLog)=>routeModule.onRequestError(req, error, errorContext, silenceLog, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean( false || (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        const silenceLog = false;\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_10__.getRevalidateReason)({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, silenceLog, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_13__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__.sendResponse)(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__.NoFallbackError)) {\n            const silenceLog = false;\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_10__.getRevalidateReason)({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            }, silenceLog, routerServerContext);\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZkb2NzJTJGdXBsb2FkJTJGcm91dGUmcGFnZT0lMkZhcGklMkZkb2NzJTJGdXBsb2FkJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZG9jcyUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDUHJvZ3JhbW1pbmclNUNQbGF5Z3JvdW5kJTIwQUklNUNQaXBlbGluZV9PQ1IlMkJFeHBvcnRfUmFwb2FydGVfUERGJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDUHJvZ3JhbW1pbmclNUNQbGF5Z3JvdW5kJTIwQUklNUNQaXBlbGluZV9PQ1IlMkJFeHBvcnRfUmFwb2FydGVfUERGJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPSZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ0U7QUFDUDtBQUNnQjtBQUNUO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUM2RDtBQUMvSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLGdCQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JB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QUFDQSwyR0FBMkcsaUhBQWlIO0FBQzVOO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHdGQUEyQjtBQUN2RDtBQUNBLCtCQUErQiw0RUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ04sNkJBQTZCLDZGQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsNEZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGFkZFJlcXVlc3RNZXRhLCBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IHNldE1hbmlmZXN0c1NpbmdsZXRvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvbWFuaWZlc3RzLXNpbmdsZXRvblwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXFByb2dyYW1taW5nXFxcXFBsYXlncm91bmQgQUlcXFxcUGlwZWxpbmVfT0NSK0V4cG9ydF9SYXBvYXJ0ZV9QREZcXFxcYXBwXFxcXGFwaVxcXFxkb2NzXFxcXHVwbG9hZFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZG9jcy91cGxvYWQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kb2NzL3VwbG9hZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZG9jcy91cGxvYWQvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcUHJvZ3JhbW1pbmdcXFxcUGxheWdyb3VuZCBBSVxcXFxQaXBlbGluZV9PQ1IrRXhwb3J0X1JhcG9hcnRlX1BERlxcXFxhcHBcXFxcYXBpXFxcXGRvY3NcXFxcdXBsb2FkXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIGlmIChyb3V0ZU1vZHVsZS5pc0Rldikge1xuICAgICAgICBhZGRSZXF1ZXN0TWV0YShyZXEsICdkZXZSZXF1ZXN0VGltaW5nSW50ZXJuYWxzRW5kJywgcHJvY2Vzcy5ocnRpbWUuYmlnaW50KCkpO1xuICAgIH1cbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9kb2NzL3VwbG9hZC9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIHBhcnNlZFVybCwgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUsIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0LCBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBjb25zdCByZW5kZXI0MDQgPSBhc3luYyAoKT0+e1xuICAgICAgICAvLyBUT0RPOiBzaG91bGQgcm91dGUtbW9kdWxlIGl0c2VsZiBoYW5kbGUgcmVuZGVyaW5nIHRoZSA0MDRcbiAgICAgICAgaWYgKHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQucmVuZGVyNDA0KSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZXJTZXJ2ZXJDb250ZXh0LnJlbmRlcjQwNChyZXEsIHJlcywgcGFyc2VkVXJsLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hZGFwdGVyUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgcmVuZGVyNDA0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1N0YXRpY0dlbmVyYXRpb24gPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgLy8gQmVmb3JlIHJlbmRlcmluZyAod2hpY2ggaW5pdGlhbGl6ZXMgY29tcG9uZW50IHRyZWUgbW9kdWxlcyksIHdlIGhhdmUgdG9cbiAgICAvLyBzZXQgdGhlIHJlZmVyZW5jZSBtYW5pZmVzdHMgdG8gb3VyIGdsb2JhbCBzdG9yZSBzbyBTZXJ2ZXIgQWN0aW9uJ3NcbiAgICAvLyBlbmNyeXB0aW9uIHV0aWwgY2FuIGFjY2VzcyB0byB0aGVtIGF0IHRoZSB0b3AgbGV2ZWwgb2YgdGhlIHBhZ2UgbW9kdWxlLlxuICAgIGlmIChzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QgJiYgY2xpZW50UmVmZXJlbmNlTWFuaWZlc3QpIHtcbiAgICAgICAgc2V0TWFuaWZlc3RzU2luZ2xldG9uKHtcbiAgICAgICAgICAgIHBhZ2U6IHNyY1BhZ2UsXG4gICAgICAgICAgICBjbGllbnRSZWZlcmVuY2VNYW5pZmVzdCxcbiAgICAgICAgICAgIHNlcnZlckFjdGlvbnNNYW5pZmVzdFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmNhY2hlQ29tcG9uZW50cyksXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiBuZXh0Q29uZmlnLmNhY2hlTGlmZSxcbiAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbCxcbiAgICAgICAgICAgIG9uQ2xvc2U6IChjYik9PntcbiAgICAgICAgICAgICAgICByZXMub24oJ2Nsb3NlJywgY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQWZ0ZXJUYXNrRXJyb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9uSW5zdHJ1bWVudGF0aW9uUmVxdWVzdEVycm9yOiAoZXJyb3IsIF9yZXF1ZXN0LCBlcnJvckNvbnRleHQsIHNpbGVuY2VMb2cpPT5yb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVycm9yLCBlcnJvckNvbnRleHQsIHNpbGVuY2VMb2csIHJvdXRlclNlcnZlckNvbnRleHQpXG4gICAgICAgIH0sXG4gICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgIGJ1aWxkSWRcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgbm9kZU5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XG4gICAgY29uc3Qgbm9kZU5leHRSZXMgPSBuZXcgTm9kZU5leHRSZXNwb25zZShyZXMpO1xuICAgIGNvbnN0IG5leHRSZXEgPSBOZXh0UmVxdWVzdEFkYXB0ZXIuZnJvbU5vZGVOZXh0UmVxdWVzdChub2RlTmV4dFJlcSwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZShyZXMpKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlTW9kdWxlLmhhbmRsZShuZXh0UmVxLCBjb250ZXh0KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3NyY1BhZ2V9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGlzTWluaW1hbE1vZGUgPSBCb29sZWFuKHByb2Nlc3MuZW52Lk1JTklNQUxfTU9ERSB8fCBnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpKTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNNaW5pbWFsTW9kZSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpbGVuY2VMb2cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU3RhdGljR2VuZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgc2lsZW5jZUxvZywgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgICAgIGlzTWluaW1hbE1vZGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNNaW5pbWFsTW9kZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGlzTWluaW1hbE1vZGUgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgLy8gQHRzLWV4cGVjdC1lcnJvciAtIEFyZ3VtZW50IG9mIHR5cGUgJ0J1ZmZlcjxBcnJheUJ1ZmZlckxpa2U+JyBpcyBub3QgYXNzaWduYWJsZSB0byBwYXJhbWV0ZXIgb2YgdHlwZSAnQm9keUluaXQgfCBudWxsIHwgdW5kZWZpbmVkJy5cbiAgICAgICAgICAgIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7c3JjUGFnZX1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgY29uc3Qgc2lsZW5jZUxvZyA9IGZhbHNlO1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzU3RhdGljR2VuZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSwgc2lsZW5jZUxvZywgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdocs%2Fupload%2Froute&page=%2Fapi%2Fdocs%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocs%2Fupload%2Froute.ts&appDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:child_process":
/*!*************************************!*\
  !*** external "node:child_process" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:child_process");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdocs%2Fupload%2Froute&page=%2Fapi%2Fdocs%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocs%2Fupload%2Froute.ts&appDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();