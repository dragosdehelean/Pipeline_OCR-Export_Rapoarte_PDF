/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/docs/[id]/md/route";
exports.ids = ["app/api/docs/[id]/md/route"];
exports.modules = {

/***/ "(rsc)/./app/_lib/schema.ts":
/*!****************************!*\
  !*** ./app/_lib/schema.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   docMetaSchema: () => (/* binding */ docMetaSchema),\n/* harmony export */   docStatusSchema: () => (/* binding */ docStatusSchema),\n/* harmony export */   docsIndexSchema: () => (/* binding */ docsIndexSchema),\n/* harmony export */   failedGateSchema: () => (/* binding */ failedGateSchema),\n/* harmony export */   metaFileSchema: () => (/* binding */ metaFileSchema),\n/* harmony export */   metaLogsSchema: () => (/* binding */ metaLogsSchema),\n/* harmony export */   metaOutputsSchema: () => (/* binding */ metaOutputsSchema),\n/* harmony export */   metaProcessingSchema: () => (/* binding */ metaProcessingSchema),\n/* harmony export */   metaQualityGatesSchema: () => (/* binding */ metaQualityGatesSchema),\n/* harmony export */   metaSourceSchema: () => (/* binding */ metaSourceSchema),\n/* harmony export */   metricsSchema: () => (/* binding */ metricsSchema),\n/* harmony export */   mimeTypeSchema: () => (/* binding */ mimeTypeSchema),\n/* harmony export */   qualityGateEvaluationSchema: () => (/* binding */ qualityGateEvaluationSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/**\n * @fileoverview Defines Zod schemas and types for meta.json contracts.\n */ \nconst mimeTypeSchema = zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n    \"application/pdf\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n]);\nconst docStatusSchema = zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n    \"PENDING\",\n    \"SUCCESS\",\n    \"FAILED\"\n]);\nconst metricsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    pages: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    textChars: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    mdChars: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    textItems: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    tables: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    textCharsPerPageAvg: zod__WEBPACK_IMPORTED_MODULE_0__.number()\n}).strict();\nconst failedGateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    code: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    message: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    actual: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    expectedOp: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    expected: zod__WEBPACK_IMPORTED_MODULE_0__.number()\n}).strict();\nconst qualityGateEvaluationSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    code: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    actual: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    passed: zod__WEBPACK_IMPORTED_MODULE_0__.boolean(),\n    severity: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"FAIL\",\n        \"WARN\"\n    ]).optional(),\n    metric: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    op: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    threshold: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    expectedOp: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    expected: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    message: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n}).strict();\nconst metaSourceSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    originalFileName: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    mimeType: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    sizeBytes: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    sha256: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    storedPath: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n}).strict();\nconst metaProcessingSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    status: docStatusSchema,\n    stage: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    progress: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    message: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    requestId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    startedAt: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    finishedAt: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullable().optional(),\n    durationMs: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    timeoutSec: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    exitCode: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    worker: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        pythonBin: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n        pythonVersion: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n        doclingVersion: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n    }).optional()\n}).strict();\nconst metaOutputsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    markdownPath: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    jsonPath: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n    bytes: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        markdown: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n        json: zod__WEBPACK_IMPORTED_MODULE_0__.number()\n    }).strict()\n}).strict();\nconst metaQualityGatesSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    configVersion: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    strict: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n    passed: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n    failedGates: zod__WEBPACK_IMPORTED_MODULE_0__.array(failedGateSchema),\n    evaluated: zod__WEBPACK_IMPORTED_MODULE_0__.array(qualityGateEvaluationSchema)\n}).strict();\nconst metaLogsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    stdoutTail: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    stderrTail: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n}).strict();\nconst metaFileSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    schemaVersion: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    requestId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    createdAt: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    source: metaSourceSchema,\n    processing: metaProcessingSchema,\n    outputs: metaOutputsSchema,\n    metrics: metricsSchema,\n    qualityGates: metaQualityGatesSchema,\n    logs: metaLogsSchema\n}).strict();\nconst docMetaSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    originalFileName: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    mimeType: mimeTypeSchema,\n    createdAt: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    status: docStatusSchema,\n    metrics: metricsSchema,\n    failedGates: zod__WEBPACK_IMPORTED_MODULE_0__.array(failedGateSchema),\n    logs: metaLogsSchema\n}).strict();\nconst docsIndexSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    docs: zod__WEBPACK_IMPORTED_MODULE_0__.array(docMetaSchema)\n}).strict();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvX2xpYi9zY2hlbWEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Q0FFQyxHQUN1QjtBQUVqQixNQUFNQyxpQkFBaUJELHdDQUFNLENBQUM7SUFDbkM7SUFDQTtDQUNELEVBQUU7QUFFSSxNQUFNRyxrQkFBa0JILHdDQUFNLENBQUM7SUFBQztJQUFXO0lBQVc7Q0FBUyxFQUFFO0FBRWpFLE1BQU1JLGdCQUFnQkosdUNBQ3BCLENBQUM7SUFDTk0sT0FBT04sdUNBQVE7SUFDZlEsV0FBV1IsdUNBQVE7SUFDbkJTLFNBQVNULHVDQUFRO0lBQ2pCVSxXQUFXVix1Q0FBUTtJQUNuQlcsUUFBUVgsdUNBQVE7SUFDaEJZLHFCQUFxQlosdUNBQVE7QUFDL0IsR0FDQ2EsTUFBTSxHQUFHO0FBRUwsTUFBTUMsbUJBQW1CZCx1Q0FDdkIsQ0FBQztJQUNOZSxNQUFNZix1Q0FBUTtJQUNkaUIsU0FBU2pCLHVDQUFRO0lBQ2pCa0IsUUFBUWxCLHVDQUFRO0lBQ2hCbUIsWUFBWW5CLHVDQUFRO0lBQ3BCb0IsVUFBVXBCLHVDQUFRO0FBQ3BCLEdBQ0NhLE1BQU0sR0FBRztBQUVMLE1BQU1RLDhCQUE4QnJCLHVDQUNsQyxDQUFDO0lBQ05lLE1BQU1mLHVDQUFRO0lBQ2RrQixRQUFRbEIsdUNBQVE7SUFDaEJzQixRQUFRdEIsd0NBQVM7SUFDakJ3QixVQUFVeEIsd0NBQU0sQ0FBQztRQUFDO1FBQVE7S0FBTyxFQUFFeUIsUUFBUTtJQUMzQ0MsUUFBUTFCLHVDQUFRLEdBQUd5QixRQUFRO0lBQzNCRSxJQUFJM0IsdUNBQVEsR0FBR3lCLFFBQVE7SUFDdkJHLFdBQVc1Qix1Q0FBUSxHQUFHeUIsUUFBUTtJQUM5Qk4sWUFBWW5CLHVDQUFRLEdBQUd5QixRQUFRO0lBQy9CTCxVQUFVcEIsdUNBQVEsR0FBR3lCLFFBQVE7SUFDN0JSLFNBQVNqQix1Q0FBUSxHQUFHeUIsUUFBUTtBQUM5QixHQUNDWixNQUFNLEdBQUc7QUFFTCxNQUFNZ0IsbUJBQW1CN0IsdUNBQ3ZCLENBQUM7SUFDTjhCLGtCQUFrQjlCLHVDQUFRO0lBQzFCK0IsVUFBVS9CLHVDQUFRO0lBQ2xCZ0MsV0FBV2hDLHVDQUFRO0lBQ25CaUMsUUFBUWpDLHVDQUFRO0lBQ2hCa0MsWUFBWWxDLHVDQUFRO0FBQ3RCLEdBQ0NhLE1BQU0sR0FBRztBQUVMLE1BQU1zQix1QkFBdUJuQyx1Q0FDM0IsQ0FBQztJQUNOb0MsUUFBUWpDO0lBQ1JrQyxPQUFPckMsdUNBQVEsR0FBR3lCLFFBQVE7SUFDMUJhLFVBQVV0Qyx1Q0FBUSxHQUFHeUIsUUFBUTtJQUM3QlIsU0FBU2pCLHVDQUFRLEdBQUd5QixRQUFRO0lBQzVCYyxXQUFXdkMsdUNBQVEsR0FBR3lCLFFBQVE7SUFDOUJlLFdBQVd4Qyx1Q0FBUSxHQUFHeUIsUUFBUTtJQUM5QmdCLFlBQVl6Qyx1Q0FBUSxHQUFHMEMsUUFBUSxHQUFHakIsUUFBUTtJQUMxQ2tCLFlBQVkzQyx1Q0FBUSxHQUFHeUIsUUFBUTtJQUMvQm1CLFlBQVk1Qyx1Q0FBUSxHQUFHeUIsUUFBUTtJQUMvQm9CLFVBQVU3Qyx1Q0FBUSxHQUFHeUIsUUFBUTtJQUM3QnFCLFFBQVE5Qyx1Q0FDQyxDQUFDO1FBQ04rQyxXQUFXL0MsdUNBQVE7UUFDbkJnRCxlQUFlaEQsdUNBQVE7UUFDdkJpRCxnQkFBZ0JqRCx1Q0FBUTtJQUMxQixHQUNDeUIsUUFBUTtBQUNiLEdBQ0NaLE1BQU0sR0FBRztBQUVMLE1BQU1xQyxvQkFBb0JsRCx1Q0FDeEIsQ0FBQztJQUNObUQsY0FBY25ELHVDQUFRLEdBQUcwQyxRQUFRO0lBQ2pDVSxVQUFVcEQsdUNBQVEsR0FBRzBDLFFBQVE7SUFDN0JXLE9BQU9yRCx1Q0FDRSxDQUFDO1FBQ05zRCxVQUFVdEQsdUNBQVE7UUFDbEJ1RCxNQUFNdkQsdUNBQVE7SUFDaEIsR0FDQ2EsTUFBTTtBQUNYLEdBQ0NBLE1BQU0sR0FBRztBQUVMLE1BQU0yQyx5QkFBeUJ4RCx1Q0FDN0IsQ0FBQztJQUNOeUQsZUFBZXpELHVDQUFRLEdBQUd5QixRQUFRO0lBQ2xDWixRQUFRYix3Q0FBUyxHQUFHeUIsUUFBUTtJQUM1QkgsUUFBUXRCLHdDQUFTLEdBQUd5QixRQUFRO0lBQzVCaUMsYUFBYTFELHNDQUFPLENBQUNjO0lBQ3JCOEMsV0FBVzVELHNDQUFPLENBQUNxQjtBQUNyQixHQUNDUixNQUFNLEdBQUc7QUFFTCxNQUFNZ0QsaUJBQWlCN0QsdUNBQ3JCLENBQUM7SUFDTjhELFlBQVk5RCx1Q0FBUTtJQUNwQitELFlBQVkvRCx1Q0FBUTtBQUN0QixHQUNDYSxNQUFNLEdBQUc7QUFFTCxNQUFNbUQsaUJBQWlCaEUsdUNBQ3JCLENBQUM7SUFDTmlFLGVBQWVqRSx1Q0FBUSxHQUFHeUIsUUFBUTtJQUNsQ3lDLElBQUlsRSx1Q0FBUTtJQUNadUMsV0FBV3ZDLHVDQUFRLEdBQUd5QixRQUFRO0lBQzlCMEMsV0FBV25FLHVDQUFRLEdBQUd5QixRQUFRO0lBQzlCMkMsUUFBUXZDO0lBQ1J3QyxZQUFZbEM7SUFDWm1DLFNBQVNwQjtJQUNUcUIsU0FBU25FO0lBQ1RvRSxjQUFjaEI7SUFDZGlCLE1BQU1aO0FBQ1IsR0FDQ2hELE1BQU0sR0FBRztBQUVMLE1BQU02RCxnQkFBZ0IxRSx1Q0FDcEIsQ0FBQztJQUNOa0UsSUFBSWxFLHVDQUFRO0lBQ1o4QixrQkFBa0I5Qix1Q0FBUTtJQUMxQitCLFVBQVU5QjtJQUNWa0UsV0FBV25FLHVDQUFRO0lBQ25Cb0MsUUFBUWpDO0lBQ1JvRSxTQUFTbkU7SUFDVHNELGFBQWExRCxzQ0FBTyxDQUFDYztJQUNyQjJELE1BQU1aO0FBQ1IsR0FDQ2hELE1BQU0sR0FBRztBQUVMLE1BQU04RCxrQkFBa0IzRSx1Q0FDdEIsQ0FBQztJQUNONEUsTUFBTTVFLHNDQUFPLENBQUMwRTtBQUNoQixHQUNDN0QsTUFBTSxHQUFHIiwic291cmNlcyI6WyJEOlxcUHJvZ3JhbW1pbmdcXFBsYXlncm91bmQgQUlcXFBpcGVsaW5lX09DUitFeHBvcnRfUmFwb2FydGVfUERGXFxhcHBcXF9saWJcXHNjaGVtYS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgRGVmaW5lcyBab2Qgc2NoZW1hcyBhbmQgdHlwZXMgZm9yIG1ldGEuanNvbiBjb250cmFjdHMuXG4gKi9cbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmV4cG9ydCBjb25zdCBtaW1lVHlwZVNjaGVtYSA9IHouZW51bShbXG4gIFwiYXBwbGljYXRpb24vcGRmXCIsXG4gIFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnRcIlxuXSk7XG5cbmV4cG9ydCBjb25zdCBkb2NTdGF0dXNTY2hlbWEgPSB6LmVudW0oW1wiUEVORElOR1wiLCBcIlNVQ0NFU1NcIiwgXCJGQUlMRURcIl0pO1xuXG5leHBvcnQgY29uc3QgbWV0cmljc1NjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgcGFnZXM6IHoubnVtYmVyKCksXG4gICAgdGV4dENoYXJzOiB6Lm51bWJlcigpLFxuICAgIG1kQ2hhcnM6IHoubnVtYmVyKCksXG4gICAgdGV4dEl0ZW1zOiB6Lm51bWJlcigpLFxuICAgIHRhYmxlczogei5udW1iZXIoKSxcbiAgICB0ZXh0Q2hhcnNQZXJQYWdlQXZnOiB6Lm51bWJlcigpXG4gIH0pXG4gIC5zdHJpY3QoKTtcblxuZXhwb3J0IGNvbnN0IGZhaWxlZEdhdGVTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIGNvZGU6IHouc3RyaW5nKCksXG4gICAgbWVzc2FnZTogei5zdHJpbmcoKSxcbiAgICBhY3R1YWw6IHoubnVtYmVyKCksXG4gICAgZXhwZWN0ZWRPcDogei5zdHJpbmcoKSxcbiAgICBleHBlY3RlZDogei5udW1iZXIoKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBxdWFsaXR5R2F0ZUV2YWx1YXRpb25TY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIGNvZGU6IHouc3RyaW5nKCksXG4gICAgYWN0dWFsOiB6Lm51bWJlcigpLFxuICAgIHBhc3NlZDogei5ib29sZWFuKCksXG4gICAgc2V2ZXJpdHk6IHouZW51bShbXCJGQUlMXCIsIFwiV0FSTlwiXSkub3B0aW9uYWwoKSxcbiAgICBtZXRyaWM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBvcDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHRocmVzaG9sZDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGV4cGVjdGVkT3A6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBleHBlY3RlZDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBtZXRhU291cmNlU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBvcmlnaW5hbEZpbGVOYW1lOiB6LnN0cmluZygpLFxuICAgIG1pbWVUeXBlOiB6LnN0cmluZygpLFxuICAgIHNpemVCeXRlczogei5udW1iZXIoKSxcbiAgICBzaGEyNTY6IHouc3RyaW5nKCksXG4gICAgc3RvcmVkUGF0aDogei5zdHJpbmcoKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBtZXRhUHJvY2Vzc2luZ1NjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgc3RhdHVzOiBkb2NTdGF0dXNTY2hlbWEsXG4gICAgc3RhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwcm9ncmVzczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXF1ZXN0SWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzdGFydGVkQXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBmaW5pc2hlZEF0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBkdXJhdGlvbk1zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgdGltZW91dFNlYzogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGV4aXRDb2RlOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgd29ya2VyOiB6XG4gICAgICAub2JqZWN0KHtcbiAgICAgICAgcHl0aG9uQmluOiB6LnN0cmluZygpLFxuICAgICAgICBweXRob25WZXJzaW9uOiB6LnN0cmluZygpLFxuICAgICAgICBkb2NsaW5nVmVyc2lvbjogei5zdHJpbmcoKVxuICAgICAgfSlcbiAgICAgIC5vcHRpb25hbCgpXG4gIH0pXG4gIC5zdHJpY3QoKTtcblxuZXhwb3J0IGNvbnN0IG1ldGFPdXRwdXRzU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBtYXJrZG93blBhdGg6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBqc29uUGF0aDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGJ5dGVzOiB6XG4gICAgICAub2JqZWN0KHtcbiAgICAgICAgbWFya2Rvd246IHoubnVtYmVyKCksXG4gICAgICAgIGpzb246IHoubnVtYmVyKClcbiAgICAgIH0pXG4gICAgICAuc3RyaWN0KClcbiAgfSlcbiAgLnN0cmljdCgpO1xuXG5leHBvcnQgY29uc3QgbWV0YVF1YWxpdHlHYXRlc1NjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgY29uZmlnVmVyc2lvbjogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIHN0cmljdDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICBwYXNzZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgZmFpbGVkR2F0ZXM6IHouYXJyYXkoZmFpbGVkR2F0ZVNjaGVtYSksXG4gICAgZXZhbHVhdGVkOiB6LmFycmF5KHF1YWxpdHlHYXRlRXZhbHVhdGlvblNjaGVtYSlcbiAgfSlcbiAgLnN0cmljdCgpO1xuXG5leHBvcnQgY29uc3QgbWV0YUxvZ3NTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIHN0ZG91dFRhaWw6IHouc3RyaW5nKCksXG4gICAgc3RkZXJyVGFpbDogei5zdHJpbmcoKVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBtZXRhRmlsZVNjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgc2NoZW1hVmVyc2lvbjogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHJlcXVlc3RJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNyZWF0ZWRBdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNvdXJjZTogbWV0YVNvdXJjZVNjaGVtYSxcbiAgICBwcm9jZXNzaW5nOiBtZXRhUHJvY2Vzc2luZ1NjaGVtYSxcbiAgICBvdXRwdXRzOiBtZXRhT3V0cHV0c1NjaGVtYSxcbiAgICBtZXRyaWNzOiBtZXRyaWNzU2NoZW1hLFxuICAgIHF1YWxpdHlHYXRlczogbWV0YVF1YWxpdHlHYXRlc1NjaGVtYSxcbiAgICBsb2dzOiBtZXRhTG9nc1NjaGVtYVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBkb2NNZXRhU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICBvcmlnaW5hbEZpbGVOYW1lOiB6LnN0cmluZygpLFxuICAgIG1pbWVUeXBlOiBtaW1lVHlwZVNjaGVtYSxcbiAgICBjcmVhdGVkQXQ6IHouc3RyaW5nKCksXG4gICAgc3RhdHVzOiBkb2NTdGF0dXNTY2hlbWEsXG4gICAgbWV0cmljczogbWV0cmljc1NjaGVtYSxcbiAgICBmYWlsZWRHYXRlczogei5hcnJheShmYWlsZWRHYXRlU2NoZW1hKSxcbiAgICBsb2dzOiBtZXRhTG9nc1NjaGVtYVxuICB9KVxuICAuc3RyaWN0KCk7XG5cbmV4cG9ydCBjb25zdCBkb2NzSW5kZXhTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIGRvY3M6IHouYXJyYXkoZG9jTWV0YVNjaGVtYSlcbiAgfSlcbiAgLnN0cmljdCgpO1xuXG5leHBvcnQgdHlwZSBEb2NNZXRhID0gei5pbmZlcjx0eXBlb2YgZG9jTWV0YVNjaGVtYT47XG5leHBvcnQgdHlwZSBNZXRyaWNzID0gei5pbmZlcjx0eXBlb2YgbWV0cmljc1NjaGVtYT47XG5leHBvcnQgdHlwZSBGYWlsZWRHYXRlID0gei5pbmZlcjx0eXBlb2YgZmFpbGVkR2F0ZVNjaGVtYT47XG5leHBvcnQgdHlwZSBEb2NTdGF0dXMgPSB6LmluZmVyPHR5cGVvZiBkb2NTdGF0dXNTY2hlbWE+O1xuZXhwb3J0IHR5cGUgTWV0YUZpbGUgPSB6LmluZmVyPHR5cGVvZiBtZXRhRmlsZVNjaGVtYT47XG5leHBvcnQgdHlwZSBRdWFsaXR5R2F0ZUV2YWx1YXRpb24gPSB6LmluZmVyPHR5cGVvZiBxdWFsaXR5R2F0ZUV2YWx1YXRpb25TY2hlbWE+O1xuZXhwb3J0IHR5cGUgRG9jc0luZGV4ID0gei5pbmZlcjx0eXBlb2YgZG9jc0luZGV4U2NoZW1hPjtcbiJdLCJuYW1lcyI6WyJ6IiwibWltZVR5cGVTY2hlbWEiLCJlbnVtIiwiZG9jU3RhdHVzU2NoZW1hIiwibWV0cmljc1NjaGVtYSIsIm9iamVjdCIsInBhZ2VzIiwibnVtYmVyIiwidGV4dENoYXJzIiwibWRDaGFycyIsInRleHRJdGVtcyIsInRhYmxlcyIsInRleHRDaGFyc1BlclBhZ2VBdmciLCJzdHJpY3QiLCJmYWlsZWRHYXRlU2NoZW1hIiwiY29kZSIsInN0cmluZyIsIm1lc3NhZ2UiLCJhY3R1YWwiLCJleHBlY3RlZE9wIiwiZXhwZWN0ZWQiLCJxdWFsaXR5R2F0ZUV2YWx1YXRpb25TY2hlbWEiLCJwYXNzZWQiLCJib29sZWFuIiwic2V2ZXJpdHkiLCJvcHRpb25hbCIsIm1ldHJpYyIsIm9wIiwidGhyZXNob2xkIiwibWV0YVNvdXJjZVNjaGVtYSIsIm9yaWdpbmFsRmlsZU5hbWUiLCJtaW1lVHlwZSIsInNpemVCeXRlcyIsInNoYTI1NiIsInN0b3JlZFBhdGgiLCJtZXRhUHJvY2Vzc2luZ1NjaGVtYSIsInN0YXR1cyIsInN0YWdlIiwicHJvZ3Jlc3MiLCJyZXF1ZXN0SWQiLCJzdGFydGVkQXQiLCJmaW5pc2hlZEF0IiwibnVsbGFibGUiLCJkdXJhdGlvbk1zIiwidGltZW91dFNlYyIsImV4aXRDb2RlIiwid29ya2VyIiwicHl0aG9uQmluIiwicHl0aG9uVmVyc2lvbiIsImRvY2xpbmdWZXJzaW9uIiwibWV0YU91dHB1dHNTY2hlbWEiLCJtYXJrZG93blBhdGgiLCJqc29uUGF0aCIsImJ5dGVzIiwibWFya2Rvd24iLCJqc29uIiwibWV0YVF1YWxpdHlHYXRlc1NjaGVtYSIsImNvbmZpZ1ZlcnNpb24iLCJmYWlsZWRHYXRlcyIsImFycmF5IiwiZXZhbHVhdGVkIiwibWV0YUxvZ3NTY2hlbWEiLCJzdGRvdXRUYWlsIiwic3RkZXJyVGFpbCIsIm1ldGFGaWxlU2NoZW1hIiwic2NoZW1hVmVyc2lvbiIsImlkIiwiY3JlYXRlZEF0Iiwic291cmNlIiwicHJvY2Vzc2luZyIsIm91dHB1dHMiLCJtZXRyaWNzIiwicXVhbGl0eUdhdGVzIiwibG9ncyIsImRvY01ldGFTY2hlbWEiLCJkb2NzSW5kZXhTY2hlbWEiLCJkb2NzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/_lib/schema.ts\n");

/***/ }),

/***/ "(rsc)/./app/_lib/storage.ts":
/*!*****************************!*\
  !*** ./app/_lib/storage.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureDataDirs: () => (/* binding */ ensureDataDirs),\n/* harmony export */   getDataDir: () => (/* binding */ getDataDir),\n/* harmony export */   getDocExportDir: () => (/* binding */ getDocExportDir),\n/* harmony export */   getExportsDir: () => (/* binding */ getExportsDir),\n/* harmony export */   getIndexPath: () => (/* binding */ getIndexPath),\n/* harmony export */   getJsonPath: () => (/* binding */ getJsonPath),\n/* harmony export */   getMarkdownPath: () => (/* binding */ getMarkdownPath),\n/* harmony export */   getMetaPath: () => (/* binding */ getMetaPath),\n/* harmony export */   getProgressPath: () => (/* binding */ getProgressPath),\n/* harmony export */   getUploadPath: () => (/* binding */ getUploadPath),\n/* harmony export */   getUploadsDir: () => (/* binding */ getUploadsDir),\n/* harmony export */   listDocs: () => (/* binding */ listDocs),\n/* harmony export */   readIndex: () => (/* binding */ readIndex),\n/* harmony export */   readMetaFile: () => (/* binding */ readMetaFile),\n/* harmony export */   upsertIndexDoc: () => (/* binding */ upsertIndexDoc),\n/* harmony export */   writeIndex: () => (/* binding */ writeIndex),\n/* harmony export */   writeJsonAtomic: () => (/* binding */ writeJsonAtomic)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./schema */ \"(rsc)/./app/_lib/schema.ts\");\n/**\n * @fileoverview Filesystem helpers for document storage paths and indexes.\n */ \n\n\n\n/**\n * Resolves the root data directory from env or defaults.\n */ function getDataDir() {\n    const envDir = process.env.DATA_DIR ?? \"./data\";\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().resolve(process.cwd(), envDir);\n}\n/**\n * Returns the uploads directory path.\n */ function getUploadsDir() {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDataDir(), \"uploads\");\n}\n/**\n * Returns the exports directory path.\n */ function getExportsDir() {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDataDir(), \"exports\");\n}\n/**\n * Returns the export directory for a specific document id.\n */ function getDocExportDir(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getExportsDir(), id);\n}\n/**\n * Builds the path for a stored upload by id and extension.\n */ function getUploadPath(id, extension) {\n    const safeExt = extension.startsWith(\".\") ? extension : `.${extension}`;\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getUploadsDir(), `${id}${safeExt}`);\n}\n/**\n * Returns the meta.json path for a document.\n */ function getMetaPath(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDocExportDir(id), \"meta.json\");\n}\n/**\n * Returns the progress.json path for a document.\n */ function getProgressPath(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDocExportDir(id), \"progress.json\");\n}\n/**\n * Returns the markdown output path for a document.\n */ function getMarkdownPath(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDocExportDir(id), \"output.md\");\n}\n/**\n * Returns the JSON output path for a document.\n */ function getJsonPath(id) {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDocExportDir(id), \"output.json\");\n}\n/**\n * Returns the index.json path.\n */ function getIndexPath() {\n    return node_path__WEBPACK_IMPORTED_MODULE_2___default().join(getDataDir(), \"index.json\");\n}\n/**\n * Ensures the upload and export directories exist.\n */ async function ensureDataDirs() {\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir(getUploadsDir(), {\n        recursive: true\n    });\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir(getExportsDir(), {\n        recursive: true\n    });\n}\n/**\n * Reads the docs index from disk and validates its shape.\n */ async function readIndex() {\n    const indexPath = getIndexPath();\n    try {\n        const raw = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(indexPath, \"utf-8\");\n        const parsed = _schema__WEBPACK_IMPORTED_MODULE_3__.docsIndexSchema.safeParse(JSON.parse(raw));\n        if (!parsed.success) {\n            return {\n                docs: []\n            };\n        }\n        return parsed.data;\n    } catch (error) {\n        if (error.code === \"ENOENT\") {\n            return {\n                docs: []\n            };\n        }\n        throw error;\n    }\n}\n/**\n * Writes the docs index to disk.\n */ async function writeIndex(index) {\n    await writeJsonAtomic(getIndexPath(), index);\n}\n/**\n * Inserts or updates a document entry in the index.\n */ async function upsertIndexDoc(doc) {\n    const index = await readIndex();\n    const existingIndex = index.docs.findIndex((entry)=>entry.id === doc.id);\n    if (existingIndex >= 0) {\n        index.docs[existingIndex] = doc;\n    } else {\n        index.docs.unshift(doc);\n    }\n    index.docs = index.docs.slice(0, 200);\n    await writeIndex(index);\n}\n/**\n * Returns recent documents from the index.\n */ async function listDocs(limit = 50) {\n    const index = await readIndex();\n    return index.docs.slice(0, limit);\n}\n/**\n * Reads meta.json and overlays any progress.json fields when present.\n */ async function readMetaFile(id) {\n    const raw = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(getMetaPath(id), \"utf-8\");\n    const meta = _schema__WEBPACK_IMPORTED_MODULE_3__.metaFileSchema.parse(JSON.parse(raw));\n    try {\n        // WHY: progress.json provides incremental updates before meta.json is rewritten.\n        const progressRaw = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(getProgressPath(id), \"utf-8\");\n        const progress = JSON.parse(progressRaw);\n        if (isRecord(progress)) {\n            if (typeof progress.stage === \"string\") {\n                meta.processing.stage = progress.stage;\n            }\n            if (typeof progress.progress === \"number\") {\n                meta.processing.progress = progress.progress;\n            }\n            if (typeof progress.message === \"string\") {\n                meta.processing.message = progress.message;\n            }\n            if (typeof progress.requestId === \"string\") {\n                meta.processing.requestId = progress.requestId;\n                meta.requestId = progress.requestId;\n            }\n        }\n    } catch (error) {\n        if (error.code !== \"ENOENT\") {\n            throw error;\n        }\n    }\n    return meta;\n}\n/**\n * Writes JSON atomically to avoid partial reads.\n */ async function writeJsonAtomic(filePath, value) {\n    const dir = node_path__WEBPACK_IMPORTED_MODULE_2___default().dirname(filePath);\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir(dir, {\n        recursive: true\n    });\n    const unique = `${process.pid}-${Date.now()}-${node_crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID()}`;\n    const tmpPath = `${filePath}.${unique}.tmp`;\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().writeFile(tmpPath, JSON.stringify(value, null, 2), \"utf-8\");\n    await renameWithRetry(tmpPath, filePath, 4, 50);\n}\nfunction isRecord(value) {\n    return Boolean(value) && typeof value === \"object\" && !Array.isArray(value);\n}\nasync function renameWithRetry(fromPath, toPath, attempts, delayMs) {\n    for(let attempt = 0; attempt < attempts; attempt += 1){\n        try {\n            await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().rename(fromPath, toPath);\n            return;\n        } catch (error) {\n            const code = error.code;\n            if (attempt < attempts - 1 && (code === \"EPERM\" || code === \"EACCES\" || code === \"EBUSY\")) {\n                // WHY: Windows can transiently lock files during rapid writes.\n                await new Promise((resolve)=>setTimeout(resolve, delayMs));\n                continue;\n            }\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cyI6WyJEOlxcUHJvZ3JhbW1pbmdcXFBsYXlncm91bmQgQUlcXFBpcGVsaW5lX09DUitFeHBvcnRfUmFwb2FydGVfUERGXFxhcHBcXF9saWJcXHN0b3JhZ2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEZpbGVzeXN0ZW0gaGVscGVycyBmb3IgZG9jdW1lbnQgc3RvcmFnZSBwYXRocyBhbmQgaW5kZXhlcy5cbiAqL1xuaW1wb3J0IGNyeXB0byBmcm9tIFwibm9kZTpjcnlwdG9cIjtcbmltcG9ydCBmcyBmcm9tIFwibm9kZTpmcy9wcm9taXNlc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiO1xuaW1wb3J0IHsgZG9jc0luZGV4U2NoZW1hLCBtZXRhRmlsZVNjaGVtYSwgdHlwZSBEb2NNZXRhLCB0eXBlIERvY3NJbmRleCwgdHlwZSBNZXRhRmlsZSB9IGZyb20gXCIuL3NjaGVtYVwiO1xuXG5leHBvcnQgdHlwZSBEb2NJbmRleEVudHJ5ID0gRG9jTWV0YTtcblxuLyoqXG4gKiBSZXNvbHZlcyB0aGUgcm9vdCBkYXRhIGRpcmVjdG9yeSBmcm9tIGVudiBvciBkZWZhdWx0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFEaXIoKTogc3RyaW5nIHtcbiAgY29uc3QgZW52RGlyID0gcHJvY2Vzcy5lbnYuREFUQV9ESVIgPz8gXCIuL2RhdGFcIjtcbiAgcmV0dXJuIHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCBlbnZEaXIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHVwbG9hZHMgZGlyZWN0b3J5IHBhdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVcGxvYWRzRGlyKCk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLmpvaW4oZ2V0RGF0YURpcigpLCBcInVwbG9hZHNcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZXhwb3J0cyBkaXJlY3RvcnkgcGF0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4cG9ydHNEaXIoKTogc3RyaW5nIHtcbiAgcmV0dXJuIHBhdGguam9pbihnZXREYXRhRGlyKCksIFwiZXhwb3J0c1wiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBleHBvcnQgZGlyZWN0b3J5IGZvciBhIHNwZWNpZmljIGRvY3VtZW50IGlkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9jRXhwb3J0RGlyKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gcGF0aC5qb2luKGdldEV4cG9ydHNEaXIoKSwgaWQpO1xufVxuXG4vKipcbiAqIEJ1aWxkcyB0aGUgcGF0aCBmb3IgYSBzdG9yZWQgdXBsb2FkIGJ5IGlkIGFuZCBleHRlbnNpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVcGxvYWRQYXRoKGlkOiBzdHJpbmcsIGV4dGVuc2lvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc2FmZUV4dCA9IGV4dGVuc2lvbi5zdGFydHNXaXRoKFwiLlwiKSA/IGV4dGVuc2lvbiA6IGAuJHtleHRlbnNpb259YDtcbiAgcmV0dXJuIHBhdGguam9pbihnZXRVcGxvYWRzRGlyKCksIGAke2lkfSR7c2FmZUV4dH1gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtZXRhLmpzb24gcGF0aCBmb3IgYSBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1ldGFQYXRoKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gcGF0aC5qb2luKGdldERvY0V4cG9ydERpcihpZCksIFwibWV0YS5qc29uXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHByb2dyZXNzLmpzb24gcGF0aCBmb3IgYSBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2dyZXNzUGF0aChpZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHBhdGguam9pbihnZXREb2NFeHBvcnREaXIoaWQpLCBcInByb2dyZXNzLmpzb25cIik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWFya2Rvd24gb3V0cHV0IHBhdGggZm9yIGEgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXJrZG93blBhdGgoaWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLmpvaW4oZ2V0RG9jRXhwb3J0RGlyKGlkKSwgXCJvdXRwdXQubWRcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgSlNPTiBvdXRwdXQgcGF0aCBmb3IgYSBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEpzb25QYXRoKGlkOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gcGF0aC5qb2luKGdldERvY0V4cG9ydERpcihpZCksIFwib3V0cHV0Lmpzb25cIik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXguanNvbiBwYXRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5kZXhQYXRoKCk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLmpvaW4oZ2V0RGF0YURpcigpLCBcImluZGV4Lmpzb25cIik7XG59XG5cbi8qKlxuICogRW5zdXJlcyB0aGUgdXBsb2FkIGFuZCBleHBvcnQgZGlyZWN0b3JpZXMgZXhpc3QuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVEYXRhRGlycygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgZnMubWtkaXIoZ2V0VXBsb2Fkc0RpcigpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgYXdhaXQgZnMubWtkaXIoZ2V0RXhwb3J0c0RpcigpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jcyBpbmRleCBmcm9tIGRpc2sgYW5kIHZhbGlkYXRlcyBpdHMgc2hhcGUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkSW5kZXgoKTogUHJvbWlzZTxEb2NzSW5kZXg+IHtcbiAgY29uc3QgaW5kZXhQYXRoID0gZ2V0SW5kZXhQYXRoKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmF3ID0gYXdhaXQgZnMucmVhZEZpbGUoaW5kZXhQYXRoLCBcInV0Zi04XCIpO1xuICAgIGNvbnN0IHBhcnNlZCA9IGRvY3NJbmRleFNjaGVtYS5zYWZlUGFyc2UoSlNPTi5wYXJzZShyYXcpKTtcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4geyBkb2NzOiBbXSB9O1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkLmRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKChlcnJvciBhcyBOb2RlSlMuRXJybm9FeGNlcHRpb24pLmNvZGUgPT09IFwiRU5PRU5UXCIpIHtcbiAgICAgIHJldHVybiB7IGRvY3M6IFtdIH07XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogV3JpdGVzIHRoZSBkb2NzIGluZGV4IHRvIGRpc2suXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3cml0ZUluZGV4KGluZGV4OiBEb2NzSW5kZXgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgd3JpdGVKc29uQXRvbWljKGdldEluZGV4UGF0aCgpLCBpbmRleCk7XG59XG5cbi8qKlxuICogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgZW50cnkgaW4gdGhlIGluZGV4LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBzZXJ0SW5kZXhEb2MoZG9jOiBEb2NJbmRleEVudHJ5KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGluZGV4ID0gYXdhaXQgcmVhZEluZGV4KCk7XG4gIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBpbmRleC5kb2NzLmZpbmRJbmRleCgoZW50cnkpID0+IGVudHJ5LmlkID09PSBkb2MuaWQpO1xuICBpZiAoZXhpc3RpbmdJbmRleCA+PSAwKSB7XG4gICAgaW5kZXguZG9jc1tleGlzdGluZ0luZGV4XSA9IGRvYztcbiAgfSBlbHNlIHtcbiAgICBpbmRleC5kb2NzLnVuc2hpZnQoZG9jKTtcbiAgfVxuICBpbmRleC5kb2NzID0gaW5kZXguZG9jcy5zbGljZSgwLCAyMDApO1xuICBhd2FpdCB3cml0ZUluZGV4KGluZGV4KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHJlY2VudCBkb2N1bWVudHMgZnJvbSB0aGUgaW5kZXguXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0RG9jcyhsaW1pdCA9IDUwKTogUHJvbWlzZTxEb2NJbmRleEVudHJ5W10+IHtcbiAgY29uc3QgaW5kZXggPSBhd2FpdCByZWFkSW5kZXgoKTtcbiAgcmV0dXJuIGluZGV4LmRvY3Muc2xpY2UoMCwgbGltaXQpO1xufVxuXG4vKipcbiAqIFJlYWRzIG1ldGEuanNvbiBhbmQgb3ZlcmxheXMgYW55IHByb2dyZXNzLmpzb24gZmllbGRzIHdoZW4gcHJlc2VudC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRNZXRhRmlsZShpZDogc3RyaW5nKTogUHJvbWlzZTxNZXRhRmlsZT4ge1xuICBjb25zdCByYXcgPSBhd2FpdCBmcy5yZWFkRmlsZShnZXRNZXRhUGF0aChpZCksIFwidXRmLThcIik7XG4gIGNvbnN0IG1ldGEgPSBtZXRhRmlsZVNjaGVtYS5wYXJzZShKU09OLnBhcnNlKHJhdykpO1xuICB0cnkge1xuICAgIC8vIFdIWTogcHJvZ3Jlc3MuanNvbiBwcm92aWRlcyBpbmNyZW1lbnRhbCB1cGRhdGVzIGJlZm9yZSBtZXRhLmpzb24gaXMgcmV3cml0dGVuLlxuICAgIGNvbnN0IHByb2dyZXNzUmF3ID0gYXdhaXQgZnMucmVhZEZpbGUoZ2V0UHJvZ3Jlc3NQYXRoKGlkKSwgXCJ1dGYtOFwiKTtcbiAgICBjb25zdCBwcm9ncmVzcyA9IEpTT04ucGFyc2UocHJvZ3Jlc3NSYXcpO1xuICAgIGlmIChpc1JlY29yZChwcm9ncmVzcykpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvZ3Jlc3Muc3RhZ2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbWV0YS5wcm9jZXNzaW5nLnN0YWdlID0gcHJvZ3Jlc3Muc3RhZ2U7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHByb2dyZXNzLnByb2dyZXNzID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIG1ldGEucHJvY2Vzc2luZy5wcm9ncmVzcyA9IHByb2dyZXNzLnByb2dyZXNzO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBwcm9ncmVzcy5tZXNzYWdlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG1ldGEucHJvY2Vzc2luZy5tZXNzYWdlID0gcHJvZ3Jlc3MubWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcHJvZ3Jlc3MucmVxdWVzdElkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG1ldGEucHJvY2Vzc2luZy5yZXF1ZXN0SWQgPSBwcm9ncmVzcy5yZXF1ZXN0SWQ7XG4gICAgICAgIG1ldGEucmVxdWVzdElkID0gcHJvZ3Jlc3MucmVxdWVzdElkO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoKGVycm9yIGFzIE5vZGVKUy5FcnJub0V4Y2VwdGlvbikuY29kZSAhPT0gXCJFTk9FTlRcIikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIHJldHVybiBtZXRhO1xufVxuXG4vKipcbiAqIFdyaXRlcyBKU09OIGF0b21pY2FsbHkgdG8gYXZvaWQgcGFydGlhbCByZWFkcy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlSnNvbkF0b21pYyhmaWxlUGF0aDogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBkaXIgPSBwYXRoLmRpcm5hbWUoZmlsZVBhdGgpO1xuICBhd2FpdCBmcy5ta2RpcihkaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICBjb25zdCB1bmlxdWUgPSBgJHtwcm9jZXNzLnBpZH0tJHtEYXRlLm5vdygpfS0ke2NyeXB0by5yYW5kb21VVUlEKCl9YDtcbiAgY29uc3QgdG1wUGF0aCA9IGAke2ZpbGVQYXRofS4ke3VuaXF1ZX0udG1wYDtcbiAgYXdhaXQgZnMud3JpdGVGaWxlKHRtcFBhdGgsIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCAyKSwgXCJ1dGYtOFwiKTtcbiAgYXdhaXQgcmVuYW1lV2l0aFJldHJ5KHRtcFBhdGgsIGZpbGVQYXRoLCA0LCA1MCk7XG59XG5cbmZ1bmN0aW9uIGlzUmVjb3JkKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICByZXR1cm4gQm9vbGVhbih2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVuYW1lV2l0aFJldHJ5KFxuICBmcm9tUGF0aDogc3RyaW5nLFxuICB0b1BhdGg6IHN0cmluZyxcbiAgYXR0ZW1wdHM6IG51bWJlcixcbiAgZGVsYXlNczogbnVtYmVyXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBhdHRlbXB0czsgYXR0ZW1wdCArPSAxKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZzLnJlbmFtZShmcm9tUGF0aCwgdG9QYXRoKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgY29kZSA9IChlcnJvciBhcyBOb2RlSlMuRXJybm9FeGNlcHRpb24pLmNvZGU7XG4gICAgICBpZiAoYXR0ZW1wdCA8IGF0dGVtcHRzIC0gMSAmJiAoY29kZSA9PT0gXCJFUEVSTVwiIHx8IGNvZGUgPT09IFwiRUFDQ0VTXCIgfHwgY29kZSA9PT0gXCJFQlVTWVwiKSkge1xuICAgICAgICAvLyBXSFk6IFdpbmRvd3MgY2FuIHRyYW5zaWVudGx5IGxvY2sgZmlsZXMgZHVyaW5nIHJhcGlkIHdyaXRlcy5cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXlNcykpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyeXB0byIsImZzIiwicGF0aCIsImRvY3NJbmRleFNjaGVtYSIsIm1ldGFGaWxlU2NoZW1hIiwiZ2V0RGF0YURpciIsImVudkRpciIsInByb2Nlc3MiLCJlbnYiLCJEQVRBX0RJUiIsInJlc29sdmUiLCJjd2QiLCJnZXRVcGxvYWRzRGlyIiwiam9pbiIsImdldEV4cG9ydHNEaXIiLCJnZXREb2NFeHBvcnREaXIiLCJpZCIsImdldFVwbG9hZFBhdGgiLCJleHRlbnNpb24iLCJzYWZlRXh0Iiwic3RhcnRzV2l0aCIsImdldE1ldGFQYXRoIiwiZ2V0UHJvZ3Jlc3NQYXRoIiwiZ2V0TWFya2Rvd25QYXRoIiwiZ2V0SnNvblBhdGgiLCJnZXRJbmRleFBhdGgiLCJlbnN1cmVEYXRhRGlycyIsIm1rZGlyIiwicmVjdXJzaXZlIiwicmVhZEluZGV4IiwiaW5kZXhQYXRoIiwicmF3IiwicmVhZEZpbGUiLCJwYXJzZWQiLCJzYWZlUGFyc2UiLCJKU09OIiwicGFyc2UiLCJzdWNjZXNzIiwiZG9jcyIsImRhdGEiLCJlcnJvciIsImNvZGUiLCJ3cml0ZUluZGV4IiwiaW5kZXgiLCJ3cml0ZUpzb25BdG9taWMiLCJ1cHNlcnRJbmRleERvYyIsImRvYyIsImV4aXN0aW5nSW5kZXgiLCJmaW5kSW5kZXgiLCJlbnRyeSIsInVuc2hpZnQiLCJzbGljZSIsImxpc3REb2NzIiwibGltaXQiLCJyZWFkTWV0YUZpbGUiLCJtZXRhIiwicHJvZ3Jlc3NSYXciLCJwcm9ncmVzcyIsImlzUmVjb3JkIiwic3RhZ2UiLCJwcm9jZXNzaW5nIiwibWVzc2FnZSIsInJlcXVlc3RJZCIsImZpbGVQYXRoIiwidmFsdWUiLCJkaXIiLCJkaXJuYW1lIiwidW5pcXVlIiwicGlkIiwiRGF0ZSIsIm5vdyIsInJhbmRvbVVVSUQiLCJ0bXBQYXRoIiwid3JpdGVGaWxlIiwic3RyaW5naWZ5IiwicmVuYW1lV2l0aFJldHJ5IiwiQm9vbGVhbiIsIkFycmF5IiwiaXNBcnJheSIsImZyb21QYXRoIiwidG9QYXRoIiwiYXR0ZW1wdHMiLCJkZWxheU1zIiwiYXR0ZW1wdCIsInJlbmFtZSIsIlByb21pc2UiLCJzZXRUaW1lb3V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/_lib/storage.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/docs/[id]/md/route.ts":
/*!***************************************!*\
  !*** ./app/api/docs/[id]/md/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../_lib/storage */ \"(rsc)/./app/_lib/storage.ts\");\n/**\n * @fileoverview Serves markdown export for a document.\n */ \n\nconst runtime = \"nodejs\";\n/**\n * Streams the markdown export for the requested document.\n */ async function GET(_req, { params }) {\n    try {\n        const { id } = await params;\n        const content = await node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile((0,_lib_storage__WEBPACK_IMPORTED_MODULE_1__.getMarkdownPath)(id), \"utf-8\");\n        return new Response(content, {\n            headers: {\n                \"content-type\": \"text/markdown; charset=utf-8\"\n            }\n        });\n    } catch (error) {\n        return new Response(\"Not found\", {\n            status: 404\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2RvY3MvW2lkXS9tZC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOztDQUVDLEdBQ2lDO0FBQ3lCO0FBRXBELE1BQU1FLFVBQVUsU0FBUztBQUVoQzs7Q0FFQyxHQUNNLGVBQWVDLElBQ3BCQyxJQUFhLEVBQ2IsRUFBRUMsTUFBTSxFQUF1QztJQUUvQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBRyxNQUFNRDtRQUNyQixNQUFNRSxVQUFVLE1BQU1QLGdFQUFXLENBQUNDLDZEQUFlQSxDQUFDSyxLQUFLO1FBQ3ZELE9BQU8sSUFBSUcsU0FBU0YsU0FBUztZQUMzQkcsU0FBUztnQkFBRSxnQkFBZ0I7WUFBK0I7UUFDNUQ7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZCxPQUFPLElBQUlGLFNBQVMsYUFBYTtZQUFFRyxRQUFRO1FBQUk7SUFDakQ7QUFDRiIsInNvdXJjZXMiOlsiRDpcXFByb2dyYW1taW5nXFxQbGF5Z3JvdW5kIEFJXFxQaXBlbGluZV9PQ1IrRXhwb3J0X1JhcG9hcnRlX1BERlxcYXBwXFxhcGlcXGRvY3NcXFtpZF1cXG1kXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgU2VydmVzIG1hcmtkb3duIGV4cG9ydCBmb3IgYSBkb2N1bWVudC5cbiAqL1xuaW1wb3J0IGZzIGZyb20gXCJub2RlOmZzL3Byb21pc2VzXCI7XG5pbXBvcnQgeyBnZXRNYXJrZG93blBhdGggfSBmcm9tIFwiLi4vLi4vLi4vLi4vX2xpYi9zdG9yYWdlXCI7XG5cbmV4cG9ydCBjb25zdCBydW50aW1lID0gXCJub2RlanNcIjtcblxuLyoqXG4gKiBTdHJlYW1zIHRoZSBtYXJrZG93biBleHBvcnQgZm9yIHRoZSByZXF1ZXN0ZWQgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoXG4gIF9yZXE6IFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiBQcm9taXNlPHsgaWQ6IHN0cmluZyB9PiB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCBwYXJhbXM7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGdldE1hcmtkb3duUGF0aChpZCksIFwidXRmLThcIik7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShjb250ZW50LCB7XG4gICAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwidGV4dC9tYXJrZG93bjsgY2hhcnNldD11dGYtOFwiIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFwiTm90IGZvdW5kXCIsIHsgc3RhdHVzOiA0MDQgfSk7XG4gIH1cbn1cclxuIl0sIm5hbWVzIjpbImZzIiwiZ2V0TWFya2Rvd25QYXRoIiwicnVudGltZSIsIkdFVCIsIl9yZXEiLCJwYXJhbXMiLCJpZCIsImNvbnRlbnQiLCJyZWFkRmlsZSIsIlJlc3BvbnNlIiwiaGVhZGVycyIsImVycm9yIiwic3RhdHVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/docs/[id]/md/route.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute&page=%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute.ts&appDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute&page=%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute.ts&appDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/app-render/manifests-singleton */ \"(rsc)/./node_modules/next/dist/server/app-render/manifests-singleton.js\");\n/* harmony import */ var next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var D_Programming_Playground_AI_Pipeline_OCR_Export_Rapoarte_PDF_app_api_docs_id_md_route_ts__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./app/api/docs/[id]/md/route.ts */ \"(rsc)/./app/api/docs/[id]/md/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/docs/[id]/md/route\",\n        pathname: \"/api/docs/[id]/md\",\n        filename: \"route\",\n        bundlePath: \"app/api/docs/[id]/md/route\"\n    },\n    distDir: \".next-e2e\\\\dev\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"D:\\\\Programming\\\\Playground AI\\\\Pipeline_OCR+Export_Rapoarte_PDF\\\\app\\\\api\\\\docs\\\\[id]\\\\md\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Programming_Playground_AI_Pipeline_OCR_Export_Rapoarte_PDF_app_api_docs_id_md_route_ts__WEBPACK_IMPORTED_MODULE_17__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.addRequestMeta)(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/docs/[id]/md/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_6__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        (0,next_dist_server_app_render_manifests_singleton__WEBPACK_IMPORTED_MODULE_5__.setManifestsSingleton)({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext, silenceLog)=>routeModule.onRequestError(req, error, errorContext, silenceLog, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_7__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_8__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean( false || (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        const silenceLog = false;\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_10__.getRevalidateReason)({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, silenceLog, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_16__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_12__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_14__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_13__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__.sendResponse)(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_9__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_15__.NoFallbackError)) {\n            const silenceLog = false;\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_10__.getRevalidateReason)({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            }, silenceLog, routerServerContext);\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_11__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZkb2NzJTJGJTVCaWQlNUQlMkZtZCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZG9jcyUyRiU1QmlkJTVEJTJGbWQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZkb2NzJTJGJTVCaWQlNUQlMkZtZCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDUHJvZ3JhbW1pbmclNUNQbGF5Z3JvdW5kJTIwQUklNUNQaXBlbGluZV9PQ1IlMkJFeHBvcnRfUmFwb2FydGVfUERGJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDUHJvZ3JhbW1pbmclNUNQbGF5Z3JvdW5kJTIwQUklNUNQaXBlbGluZV9PQ1IlMkJFeHBvcnRfUmFwb2FydGVfUERGJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPSZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ0U7QUFDUDtBQUNnQjtBQUNUO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUMrRDtBQUNqSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLGdCQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9EO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGO0FBQ25GO0FBQ1A7QUFDQSxRQUFRLDZFQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUIsQ0FBQztBQUNOO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixLQUF3QztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrTUFBK007QUFDM04sOEJBQThCLDZGQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw2RkFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0dBQXFCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsbUJBQW1CLDRFQUFTO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSw4QkFBOEIsNkVBQWM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0RUFBZTtBQUMzQyw0QkFBNEIsNkVBQWdCO0FBQzVDLG9CQUFvQix5R0FBa0Isa0NBQWtDLGlIQUFzQjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGdGQUFjO0FBQy9FLCtEQUErRCx5Q0FBeUM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUSxFQUFFLE1BQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxrQkFBa0I7QUFDbEIsdUNBQXVDLFFBQVEsRUFBRSxRQUFRO0FBQ3pEO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esc0NBQXNDLE1BQXdCLElBQUksNkVBQWM7QUFDaEY7QUFDQTtBQUNBLCtDQUErQyxvQkFBb0I7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msc0ZBQXlCO0FBQ2pFO0FBQ0Esb0NBQW9DLDRFQUFzQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNKQUFzSixvRUFBYztBQUNwSywwSUFBMEksb0VBQWM7QUFDeEo7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDZFQUFlO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSw4QkFBOEIsNkVBQVk7QUFDMUM7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDRGQUFtQjtBQUNqRTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtFQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxSUFBcUksNkVBQWU7QUFDcEo7QUFDQSwyR0FBMkcsaUhBQWlIO0FBQzVOO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHdGQUEyQjtBQUN2RDtBQUNBLCtCQUErQiw0RUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ04sNkJBQTZCLDZGQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsNEZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGFkZFJlcXVlc3RNZXRhLCBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IHNldE1hbmlmZXN0c1NpbmdsZXRvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvbWFuaWZlc3RzLXNpbmdsZXRvblwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXFByb2dyYW1taW5nXFxcXFBsYXlncm91bmQgQUlcXFxcUGlwZWxpbmVfT0NSK0V4cG9ydF9SYXBvYXJ0ZV9QREZcXFxcYXBwXFxcXGFwaVxcXFxkb2NzXFxcXFtpZF1cXFxcbWRcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2RvY3MvW2lkXS9tZC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2RvY3MvW2lkXS9tZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZG9jcy9baWRdL21kL3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXFByb2dyYW1taW5nXFxcXFBsYXlncm91bmQgQUlcXFxcUGlwZWxpbmVfT0NSK0V4cG9ydF9SYXBvYXJ0ZV9QREZcXFxcYXBwXFxcXGFwaVxcXFxkb2NzXFxcXFtpZF1cXFxcbWRcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgIGFkZFJlcXVlc3RNZXRhKHJlcSwgJ2RldlJlcXVlc3RUaW1pbmdJbnRlcm5hbHNFbmQnLCBwcm9jZXNzLmhydGltZS5iaWdpbnQoKSk7XG4gICAgfVxuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL2RvY3MvW2lkXS9tZC9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIHBhcnNlZFVybCwgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUsIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0LCBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBjb25zdCByZW5kZXI0MDQgPSBhc3luYyAoKT0+e1xuICAgICAgICAvLyBUT0RPOiBzaG91bGQgcm91dGUtbW9kdWxlIGl0c2VsZiBoYW5kbGUgcmVuZGVyaW5nIHRoZSA0MDRcbiAgICAgICAgaWYgKHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQucmVuZGVyNDA0KSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZXJTZXJ2ZXJDb250ZXh0LnJlbmRlcjQwNChyZXEsIHJlcywgcGFyc2VkVXJsLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hZGFwdGVyUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgcmVuZGVyNDA0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1N0YXRpY0dlbmVyYXRpb24gPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgLy8gQmVmb3JlIHJlbmRlcmluZyAod2hpY2ggaW5pdGlhbGl6ZXMgY29tcG9uZW50IHRyZWUgbW9kdWxlcyksIHdlIGhhdmUgdG9cbiAgICAvLyBzZXQgdGhlIHJlZmVyZW5jZSBtYW5pZmVzdHMgdG8gb3VyIGdsb2JhbCBzdG9yZSBzbyBTZXJ2ZXIgQWN0aW9uJ3NcbiAgICAvLyBlbmNyeXB0aW9uIHV0aWwgY2FuIGFjY2VzcyB0byB0aGVtIGF0IHRoZSB0b3AgbGV2ZWwgb2YgdGhlIHBhZ2UgbW9kdWxlLlxuICAgIGlmIChzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QgJiYgY2xpZW50UmVmZXJlbmNlTWFuaWZlc3QpIHtcbiAgICAgICAgc2V0TWFuaWZlc3RzU2luZ2xldG9uKHtcbiAgICAgICAgICAgIHBhZ2U6IHNyY1BhZ2UsXG4gICAgICAgICAgICBjbGllbnRSZWZlcmVuY2VNYW5pZmVzdCxcbiAgICAgICAgICAgIHNlcnZlckFjdGlvbnNNYW5pZmVzdFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmNhY2hlQ29tcG9uZW50cyksXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiBuZXh0Q29uZmlnLmNhY2hlTGlmZSxcbiAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbCxcbiAgICAgICAgICAgIG9uQ2xvc2U6IChjYik9PntcbiAgICAgICAgICAgICAgICByZXMub24oJ2Nsb3NlJywgY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQWZ0ZXJUYXNrRXJyb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9uSW5zdHJ1bWVudGF0aW9uUmVxdWVzdEVycm9yOiAoZXJyb3IsIF9yZXF1ZXN0LCBlcnJvckNvbnRleHQsIHNpbGVuY2VMb2cpPT5yb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVycm9yLCBlcnJvckNvbnRleHQsIHNpbGVuY2VMb2csIHJvdXRlclNlcnZlckNvbnRleHQpXG4gICAgICAgIH0sXG4gICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgIGJ1aWxkSWRcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgbm9kZU5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XG4gICAgY29uc3Qgbm9kZU5leHRSZXMgPSBuZXcgTm9kZU5leHRSZXNwb25zZShyZXMpO1xuICAgIGNvbnN0IG5leHRSZXEgPSBOZXh0UmVxdWVzdEFkYXB0ZXIuZnJvbU5vZGVOZXh0UmVxdWVzdChub2RlTmV4dFJlcSwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZShyZXMpKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlTW9kdWxlLmhhbmRsZShuZXh0UmVxLCBjb250ZXh0KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3NyY1BhZ2V9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGlzTWluaW1hbE1vZGUgPSBCb29sZWFuKHByb2Nlc3MuZW52Lk1JTklNQUxfTU9ERSB8fCBnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpKTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNNaW5pbWFsTW9kZSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpbGVuY2VMb2cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU3RhdGljR2VuZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgc2lsZW5jZUxvZywgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgICAgIGlzTWluaW1hbE1vZGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNNaW5pbWFsTW9kZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGlzTWluaW1hbE1vZGUgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgLy8gQHRzLWV4cGVjdC1lcnJvciAtIEFyZ3VtZW50IG9mIHR5cGUgJ0J1ZmZlcjxBcnJheUJ1ZmZlckxpa2U+JyBpcyBub3QgYXNzaWduYWJsZSB0byBwYXJhbWV0ZXIgb2YgdHlwZSAnQm9keUluaXQgfCBudWxsIHwgdW5kZWZpbmVkJy5cbiAgICAgICAgICAgIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7c3JjUGFnZX1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgY29uc3Qgc2lsZW5jZUxvZyA9IGZhbHNlO1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzU3RhdGljR2VuZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSwgc2lsZW5jZUxvZywgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute&page=%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute.ts&appDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute&page=%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocs%2F%5Bid%5D%2Fmd%2Froute.ts&appDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CProgramming%5CPlayground%20AI%5CPipeline_OCR%2BExport_Rapoarte_PDF&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();